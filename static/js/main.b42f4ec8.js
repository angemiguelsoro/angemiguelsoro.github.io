/*! For license information please see main.b42f4ec8.js.LICENSE.txt */
!function(){var e={579:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},773:function(e,t,n){var r=n(579);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},444:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},35:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},124:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},88:function(e,t,n){var r=n(773),i=n(35),a=n(603),o=n(124);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},603:function(e,t,n){var r=n(579);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},911:function(e,t,n){e.exports=n(762)},104:function(e){!function(e){var t=2*Math.PI;e((function(e,n){var r=Math.random(),i=Math.random(),a=Math.sqrt(-2*Math.log(r))*Math.cos(t*i);return Math.sqrt(-2*Math.log(r)),Math.sin(t*i),a*n+e}))}((function(t){e.exports=t}))},176:function(e,t,n){!function(e){var t=n(104),r=function(e){var t=Math.abs(e),n=1/(1+t/2),r=n*Math.exp(-t*t-1.26551223+n*(1.00002368+n*(.37409196+n*(.09678418+n*(n*(.27886807+n*(n*(1.48851587+n*(.17087277*n-.82215223))-1.13520398))-.18628806)))));return e>=0?r:2-r},i=function(e,t){if(t<=0)throw new Error("Variance must be > 0 (but was "+t+")");this.mean=e,this.variance=t,this.standardDeviation=Math.sqrt(t)};i.prototype.pdf=function(e){var t=this.standardDeviation*Math.sqrt(2*Math.PI);return Math.exp(-Math.pow(e-this.mean,2)/(2*this.variance))/t},i.prototype.cdf=function(e){return.5*r(-(e-this.mean)/(this.standardDeviation*Math.sqrt(2)))},i.prototype.ppf=function(e){return this.mean-this.standardDeviation*Math.sqrt(2)*function(e){if(e>=2)return-100;if(e<=0)return 100;for(var t=e<1?e:2-e,n=Math.sqrt(-2*Math.log(t/2)),i=-.70711*((2.30753+.27061*n)/(1+n*(.99229+.04481*n))-n),a=0;a<2;a++){var o=r(i)-t;i+=o/(1.1283791670955126*Math.exp(-i*i)-i*o)}return e<1?i:-i}(2*e)},i.prototype.mul=function(e){if("number"===typeof e)return this.scale(e);var t=1/this.variance,n=1/e.variance;return o(t+n,t*this.mean+n*e.mean)},i.prototype.div=function(e){if("number"===typeof e)return this.scale(1/e);var t=1/this.variance,n=1/e.variance;return o(t-n,t*this.mean-n*e.mean)},i.prototype.add=function(e){return a(this.mean+e.mean,this.variance+e.variance)},i.prototype.sub=function(e){return a(this.mean-e.mean,this.variance+e.variance)},i.prototype.scale=function(e){return a(this.mean*e,this.variance*e*e)},i.prototype.random=function(e){var n=this.mean,r=this.standardDeviation;return Array(e).fill(0).map((function(){return t(n,r)}))};var a=function(e,t){return new i(e,t)},o=function(e,t){return a(t/e,1/e)};e(a)}((function(t){e.exports=t}))},725:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){var t=e.optimisticTime,n=e.pessimisticTime;return Math.pow((n-t)/6,2)};t.getExpectedTimeByNode=function(e,t){return t[e]?t[e].expectedTime:0},t.default=function(e){return Object.keys(e).reduce((function(t,r){var i;return t[r]={expectedTime:(i=e[r],(i.optimisticTime+4*i.mostLikelyTime+i.pessimisticTime)/6),variance:n(e[r])},t}),{})}},137:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(176)),a=n(324),o=i.default(0,1);t.default=function(e,t){var n=e.criticalPath,r=e.activitiesParams,i=e.latestFinishTimes,s=function(e,t){return e.map((function(e){return t[e].variance})).reduce((function(e,t){return e+t}),0)}(n,r),u=(t-i[a.END])/Math.sqrt(s);return o.cdf(u)}},296:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(324);t.default=function(e,t){for(var n=r.START,i=[];n!==r.END&&void 0!==n;){var a=e[n]?e[n].successors.find((function(e){return 0===t[e]})):void 0;if(!a)throw"No critical path found";(n=a)!==r.END&&i.push(n)}return i}},766:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(533)),a=r(n(137));t.pertProbability=a.default;var o=n(324);t.START=o.START,t.END=o.END,t.default=i.default},324:function(e,t,n){"use strict";var r=n(444).default,i=n(88).default;Object.defineProperty(t,"__esModule",{value:!0}),t.START="__start",t.END="__end";var a=function(e){return e||{predecessors:[],successors:[]}};t.default=function(e){var n;return Object.values(e).reduce((function(n,r){return n[r.id]=a(n[r.id]),r.predecessors.forEach((function(e){n[e]=a(n[e]),n[e].successors.push(r.id)})),n[r.id].predecessors=i(r.predecessors),function(e){return 0===e.predecessors.length}(r)&&(n[t.START].successors.push(r.id),n[r.id].predecessors.push(t.START)),function(e,t){return Object.values(t).reduce((function(t,n){return-1===n.predecessors.indexOf(e.id)&&t}),!0)}(r,e)&&(n[t.END].predecessors.push(r.id),n[r.id].successors.push(t.END)),n}),(r(n={},t.START,a()),r(n,t.END,a()),n))}},533:function(e,t,n){"use strict";var r=n(444).default,i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(324)),s=i(n(217)),u=i(n(725)),l=i(n(152)),c=a(n(296));t.default=function(e){var t=u.default(e),n=o.default(e),i=s.default({network:n,currentNode:o.END,foundTimes:r({},o.START,0),activitiesParams:t,type:"forward"}),a=s.default({network:n,currentNode:o.START,foundTimes:r({},o.END,i[o.END]),activitiesParams:t,type:"backward"}),h=s.mutate({times:i,mutate:function(e,n){return l.default(e-u.getExpectedTimeByNode(n,t),l.PRECISION)}}),f=s.mutate({times:a,mutate:function(e,n){return l.default(e+u.getExpectedTimeByNode(n,t),l.PRECISION)}}),d=s.mutate({times:a,mutate:function(e,t){return l.default(e-h[t],l.PRECISION)}}),p=c.default(n,d);return{activitiesParams:t,network:n,earliestFinishTimes:i,earliestStartTimes:h,latestStartTimes:a,latestFinishTimes:f,slack:d,criticalPath:p}}},152:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PRECISION=3;t.default=function(e,t){var n=Math.pow(10,t),r=e*n;return Math.round(r)/n}},217:function(e,t,n){"use strict";var r=n(444).default,i=n(88).default,a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=n(725),s=a(n(152));t.mutate=function(e){var t=e.times,n=e.mutate;return Object.keys(t).reduce((function(e,r){return e[r]=n(t[r],r),e}),{})};t.default=function e(t){var n=t.network,a=t.currentNode,u=t.foundTimes,l=t.activitiesParams,c=t.type,h="forward"===c?"predecessors":"successors",f="forward"===c?Math.max:Math.min;if(u[a])return u;n[a][h].forEach((function(t){u=e({network:n,currentNode:t,foundTimes:u,activitiesParams:l,type:c})}));var d,p,v=n[a][h].length?f.apply(void 0,i(n[a][h].map((function(e){return u[e]})))):0;return Object.assign({},u,r({},a,(d=v,p=o.getExpectedTimeByNode(a,l),"forward"===c?s.default(d+p,s.PRECISION):s.default(d-p,s.PRECISION))))}},576:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,s,u=i(e),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))n.call(o,c)&&(u[c]=o[c]);if(t){s=t(o);for(var h=0;h<s.length;h++)r.call(o,s[h])&&(u[s[h]]=o[s[h]])}}return u}},456:function(e,t,n){"use strict";var r=n(793),i=n(576),a=n(860);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(f.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,k);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,k);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,k);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=60103,x=60106,E=60107,C=60108,T=60114,S=60109,I=60110,N=60112,R=60113,D=60120,P=60115,A=60116,O=60121,M=60128,L=60129,j=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;b=U("react.element"),x=U("react.portal"),E=U("react.fragment"),C=U("react.strict_mode"),T=U("react.profiler"),S=U("react.provider"),I=U("react.context"),N=U("react.forward_ref"),R=U("react.suspense"),D=U("react.suspense_list"),P=U("react.memo"),A=U("react.lazy"),O=U("react.block"),U("react.scope"),M=U("react.opaque.id"),L=U("react.debug_trace_mode"),j=U("react.offscreen"),F=U("react.legacy_hidden")}var V,B="function"===typeof Symbol&&Symbol.iterator;function z(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}function q(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var H=!1;function W(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?q(e):""}function K(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 22:return e=W(e.type._render,!1);case 1:return e=W(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case x:return"Portal";case T:return"Profiler";case C:return"StrictMode";case R:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case P:return G(e.type);case O:return G(e._render);case A:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function Y(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Y(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Y(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Y(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Y(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Y(n)}}function le(e,t){var n=Y(t.value),r=Y(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml",fe="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ge=(me=function(e,t){if(e.namespaceURI!==fe||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_e=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function be(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){_e.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var xe=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ce(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ie=null,Ne=null;function Re(e){if(e=ri(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Se(e.stateNode,e.type,t))}}function De(e){Ie?Ne?Ne.push(e):Ne=[e]:Ie=e}function Pe(){if(Ie){var e=Ie,t=Ne;if(Ne=Ie=null,Re(e),t)for(e=0;e<t.length;e++)Re(t[e])}}function Ae(e,t){return e(t)}function Oe(e,t,n,r,i){return e(t,n,r,i)}function Me(){}var Le=Ae,je=!1,Fe=!1;function Ue(){null===Ie&&null===Ne||(Me(),Pe())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Be=!1;if(h)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Be=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(me){Be=!1}function qe(e,t,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var He=!1,We=null,Ke=!1,Ge=null,Ye={onError:function(e){He=!0,We=e}};function $e(e,t,n,r,i,a,o,s,u){He=!1,We=null,qe.apply(Ye,arguments)}function Qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Qe(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Qe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Je(i),e;if(a===r)return Je(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],st=null,ut=null,lt=null,ct=new Map,ht=new Map,ft=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ht.delete(t.pointerId)}}function mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function gt(e){var t=ni(e.target);if(null!==t){var n=Qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){yt(e)&&n.delete(t)}function _t(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&yt(st)&&(st=null),null!==ut&&yt(ut)&&(ut=null),null!==lt&&yt(lt)&&(lt=null),ct.forEach(kt),ht.forEach(kt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,_t)))}function bt(e){function t(t){return wt(t,e)}if(0<ot.length){wt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&wt(st,e),null!==ut&&wt(ut,e),null!==lt&&wt(lt,e),ct.forEach(t),ht.forEach(t),n=0;n<ft.length;n++)(r=ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)gt(n),null===n.blockedOn&&ft.shift()}function xt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Et={animationend:xt("Animation","AnimationEnd"),animationiteration:xt("Animation","AnimationIteration"),animationstart:xt("Animation","AnimationStart"),transitionend:xt("Transition","TransitionEnd")},Ct={},Tt={};function St(e){if(Ct[e])return Ct[e];if(!Et[e])return e;var t,n=Et[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return Ct[e]=n[t];return e}h&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete Et.animationend.animation,delete Et.animationiteration.animation,delete Et.animationstart.animation),"TransitionEvent"in window||delete Et.transitionend.transition);var It=St("animationend"),Nt=St("animationiteration"),Rt=St("animationstart"),Dt=St("transitionend"),Pt=new Map,At=new Map,Ot=["abort","abort",It,"animationEnd",Nt,"animationIteration",Rt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Dt,"transitionEnd","waiting","waiting"];function Mt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),At.set(r,t),Pt.set(r,i),l(i,[r])}}(0,a.unstable_now)();var Lt=8;function jt(e){if(0!==(1&e))return Lt=15,1;if(0!==(2&e))return Lt=14,2;if(0!==(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!==(32&e)?(Lt=11,32):0!==(t=192&e)?(Lt=10,t):0!==(256&e)?(Lt=9,256):0!==(t=3584&e)?(Lt=8,t):0!==(4096&e)?(Lt=7,4096):0!==(t=4186112&e)?(Lt=6,t):0!==(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!==(134217728&e)?(Lt=3,134217728):0!==(t=805306368&e)?(Lt=2,t):0!==(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)r=a,i=Lt=15;else if(0!==(a=134217727&n)){var u=a&~o;0!==u?(r=jt(u),i=Lt):0!==(s&=a)&&(r=jt(s),i=Lt)}else 0!==(a=n&~o)?(r=jt(a),i=Lt):0!==s&&(r=jt(s),i=Lt);if(0===r)return 0;if(r=n&((0>(r=31-Ht(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(jt(t),i<=Lt)return t;Lt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Ht(t)),r|=e[n],t&=~i;return r}function Ut(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?Vt(10,t):e;case 10:return 0===(e=Bt(192&~t))?Vt(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Bt(e){return e&-e}function zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function qt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Ht(t)]=n}var Ht=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Wt(e)/Kt|0)|0},Wt=Math.log,Kt=Math.LN2;var Gt=a.unstable_UserBlockingPriority,Yt=a.unstable_runWithPriority,$t=!0;function Qt(e,t,n,r){je||Me();var i=Jt,a=je;je=!0;try{Oe(i,e,t,n,r)}finally{(je=a)||Ue()}}function Xt(e,t,n,r){Yt(Gt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var i;if($t)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=mt(st,e,t,n,r,i),!0;case"dragenter":return ut=mt(ut,e,t,n,r,i),!0;case"mouseover":return lt=mt(lt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return ct.set(a,mt(ct.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ht.set(a,mt(ht.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Mr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var a=Qe(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Xe(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Mr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function un(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var ln,cn,hn,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=un(fn),pn=i({},fn,{view:0,detail:0}),vn=un(pn),mn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hn&&(hn&&"mousemove"===e.type?(ln=e.screenX-hn.screenX,cn=e.screenY-hn.screenY):cn=ln=0,hn=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),gn=un(mn),yn=un(i({},mn,{dataTransfer:0})),kn=un(i({},pn,{relatedTarget:0})),_n=un(i({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=i({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=un(wn),xn=un(i({},fn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function In(){return Sn}var Nn=i({},pn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Cn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Rn=un(Nn),Dn=un(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=un(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),An=un(i({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=un(On),Ln=[9,13,27,32],jn=h&&"CompositionEvent"in window,Fn=null;h&&"documentMode"in document&&(Fn=document.documentMode);var Un=h&&"TextEvent"in window&&!Fn,Vn=h&&(!jn||Fn&&8<Fn&&11>=Fn),Bn=String.fromCharCode(32),zn=!1;function qn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Kn[e.type]:"textarea"===t}function Yn(e,t,n,r){De(r),0<(t=jr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $n=null,Qn=null;function Xn(e){Nr(e,0)}function Jn(e){if(X(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(h){var tr;if(h){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){$n&&($n.detachEvent("onpropertychange",ar),Qn=$n=null)}function ar(e){if("value"===e.propertyName&&Jn(Qn)){var t=[];if(Yn(t,Qn,e,Te(e)),e=Xn,je)e(t);else{je=!0;try{Ae(e,t)}finally{je=!1,Ue()}}}}function or(e,t,n){"focusin"===e?(ir(),Qn=n,($n=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Qn)}function ur(e,t){if("click"===e)return Jn(t)}function lr(e,t){if("input"===e||"change"===e)return Jn(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},hr=Object.prototype.hasOwnProperty;function fr(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!hr.call(t,n[r])||!cr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=h&&"documentMode"in document&&11>=document.documentMode,kr=null,_r=null,wr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==kr||kr!==J(r)||("selectionStart"in(r=kr)&&gr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&fr(wr,r)||(wr=r,0<(r=jr(_r,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Mt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Mt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Mt(Ot,2);for(var Er="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Cr=0;Cr<Er.length;Cr++)At.set(Er[Cr],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Ir(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,l){if($e.apply(this,arguments),He){if(!He)throw Error(o(198));var c=We;He=!1,We=null,Ke||(Ke=!0,Ge=c)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Ir(i,s,l),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Ir(i,s,l),a=u}}}if(Ke)throw e=Ge,Ke=!1,Ge=null,e}function Rr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Or(t,e,2,!1),n.add(r))}var Dr="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){e[Dr]||(e[Dr]=!0,s.forEach((function(t){Sr.has(t)||Ar(t,!1,e,null),Ar(t,!0,e,null)})))}function Ar(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(i|=4),Or(a,e,i,t),o.add(s))}function Or(e,t,n,r){var i=At.get(t);switch(void 0===i?2:i){case 0:i=Qt;break;case 1:i=Xt;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Mr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=ni(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{Le(e,t,n)}finally{Fe=!1,Ue()}}((function(){var r=a,i=Te(n),o=[];e:{var s=Pt.get(e);if(void 0!==s){var u=dn,l=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":u=Rn;break;case"focusin":l="focus",u=kn;break;case"focusout":l="blur",u=kn;break;case"beforeblur":case"afterblur":u=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Pn;break;case It:case Nt:case Rt:u=_n;break;case Dt:u=An;break;case"scroll":u=vn;break;case"wheel":u=Mn;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Dn}var c=0!==(4&t),h=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Ve(p,f))&&c.push(Lr(p,v,d)))),h)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(l=n.relatedTarget||n.fromElement)||!ni(l)&&!l[ei])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?ni(l):null)&&(l!==(h=Qe(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=gn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Dn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:ii(u),d=null==l?s:ii(l),(s=new c(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,ni(i)===r&&((c=new c(f,p+"enter",l,n,i)).target=d,c.relatedTarget=h,v=c),h=v,u&&l)e:{for(f=l,p=0,d=c=u;d;d=Fr(d))p++;for(d=0,v=f;v;v=Fr(v))d++;for(;0<p-d;)c=Fr(c),p--;for(;0<d-p;)f=Fr(f),d--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=Fr(c),f=Fr(f)}c=null}else c=null;null!==u&&Ur(o,s,u,c,!1),null!==l&&null!==h&&Ur(o,h,l,c,!0)}if("select"===(u=(s=r?ii(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Zn;else if(Gn(s))if(er)m=lr;else{m=sr;var g=or}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ur);switch(m&&(m=m(e,r))?Yn(o,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ie(s,"number",s.value)),g=r?ii(r):window,e){case"focusin":(Gn(g)||"true"===g.contentEditable)&&(kr=g,_r=r,wr=null);break;case"focusout":wr=_r=kr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(o,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":xr(o,n,i)}var y;if(jn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Wn?qn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Vn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Wn&&(y=rn()):(tn="value"in(en=i)?en.value:en.textContent,Wn=!0)),0<(g=jr(r,k)).length&&(k=new xn(k,e,null,n,i),o.push({event:k,listeners:g}),y?k.data=y:null!==(y=Hn(n))&&(k.data=y))),(y=Un?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(zn=!0,Bn);case"textInput":return(e=t.data)===Bn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!jn&&qn(e,t)?(e=rn(),nn=tn=en=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=jr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Nr(o,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function jr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ve(e,n))&&r.unshift(Lr(e,a,i)),null!=(a=Ve(e,t))&&r.push(Lr(e,a,i))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ur(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Ve(n,a))&&o.unshift(Lr(n,u,s)):i||null!=(u=Ve(n,a))&&o.push(Lr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Vr(){}var Br=null,zr=null;function qr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Hr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Wr="function"===typeof setTimeout?setTimeout:void 0,Kr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Yr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function $r(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Qr=0;var Xr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Xr,Zr="__reactProps$"+Xr,ei="__reactContainer$"+Xr,ti="__reactEvents$"+Xr;function ni(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=$r(e);null!==e;){if(n=e[Jr])return n;e=$r(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Jr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var si=[],ui=-1;function li(e){return{current:e}}function ci(e){0>ui||(e.current=si[ui],si[ui]=null,ui--)}function hi(e,t){ui++,si[ui]=e.current,e.current=t}var fi={},di=li(fi),pi=li(!1),vi=fi;function mi(e,t){var n=e.type.contextTypes;if(!n)return fi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function gi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function yi(){ci(pi),ci(di)}function ki(e,t,n){if(di.current!==fi)throw Error(o(168));hi(di,t),hi(pi,n)}function _i(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,G(t)||"Unknown",a));return i({},n,r)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fi,vi=di.current,hi(di,e),hi(pi,pi.current),!0}function bi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=_i(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,ci(pi),ci(di),hi(di,e)):ci(pi),hi(pi,n)}var xi=null,Ei=null,Ci=a.unstable_runWithPriority,Ti=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Ii=a.unstable_shouldYield,Ni=a.unstable_requestPaint,Ri=a.unstable_now,Di=a.unstable_getCurrentPriorityLevel,Pi=a.unstable_ImmediatePriority,Ai=a.unstable_UserBlockingPriority,Oi=a.unstable_NormalPriority,Mi=a.unstable_LowPriority,Li=a.unstable_IdlePriority,ji={},Fi=void 0!==Ni?Ni:function(){},Ui=null,Vi=null,Bi=!1,zi=Ri(),qi=1e4>zi?Ri:function(){return Ri()-zi};function Hi(){switch(Di()){case Pi:return 99;case Ai:return 98;case Oi:return 97;case Mi:return 96;case Li:return 95;default:throw Error(o(332))}}function Wi(e){switch(e){case 99:return Pi;case 98:return Ai;case 97:return Oi;case 96:return Mi;case 95:return Li;default:throw Error(o(332))}}function Ki(e,t){return e=Wi(e),Ci(e,t)}function Gi(e,t,n){return e=Wi(e),Ti(e,t,n)}function Yi(){if(null!==Vi){var e=Vi;Vi=null,Si(e)}$i()}function $i(){if(!Bi&&null!==Ui){Bi=!0;var e=0;try{var t=Ui;Ki(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(n){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ti(Pi,Yi),n}finally{Bi=!1}}}var Qi=w.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ji=li(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=Ji.current;ci(Ji),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(jo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var sa=!1;function ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function la(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ca(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ha(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function fa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;sa=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var l=u,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var h=e.alternate;if(null!==h){var f=(h=h.updateQueue).lastBaseUpdate;f!==s&&(null===f?h.firstBaseUpdate=c:f.next=c,h.lastBaseUpdate=l)}}if(null!==o){for(f=a.baseState,s=0,h=c=l=null;;){u=o.lane;var d=o.eventTime;if((r&u)===u){null!==h&&(h=h.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(u=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,u);break e}f=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,f,u):p)||void 0===u)break e;f=i({},f,u);break e;case 2:sa=!0}}null!==o.callback&&(e.flags|=32,null===(u=a.effects)?a.effects=[o]:u.push(o))}else d={eventTime:d,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(c=h=d,l=f):h=h.next=d,s|=u;if(null===(o=o.next)){if(null===(u=a.shared.pending))break;o=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}null===h&&(l=f),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=h,Bs|=s,e.lanes=s,e.memoizedState=f}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ma(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ga={isMounted:function(e){return!!(e=e._reactInternals)&&Qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=fu(),i=du(e),a=ca(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),ha(e,a),pu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=fu(),i=du(e),a=ca(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),ha(e,a),pu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=fu(),r=du(e),i=ca(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),ha(e,i),pu(e,r,n)}};function ya(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!fr(n,r)||!fr(i,a))}function ka(e,t,n){var r=!1,i=fi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=gi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?mi(e,i):fi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ga,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function _a(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ga.enqueueReplaceState(t,t.state,null)}function wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,ua(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=gi(t)?vi:di.current,i.context=mi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ma(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ga.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var ba=Array.isArray;function xa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ea(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ca(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ku(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Qu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=xa(e,t,n),r.return=e,r):((r=Gu(n.type,n.key,n.props,null,e.mode,r)).ref=xa(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Yu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Qu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Gu(t.type,t.key,t.props,null,e.mode,n)).ref=xa(e,null,t),n.return=e,n;case x:return(t=Xu(t,e.mode,n)).return=e,t}if(ba(t)||z(t))return(t=Yu(t,e.mode,n,null)).return=e,t;Ea(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?n.type===E?h(e,t,n.props.children,r,i):l(e,t,n,r):null;case x:return n.key===i?c(e,t,n,r):null}if(ba(n)||z(n))return null!==i?null:h(e,t,n,r,null);Ea(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return e=e.get(null===r.key?n:r.key)||null,r.type===E?h(t,e,r.props.children,i,r.key):l(t,e,r,i);case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ba(r)||z(r))return h(t,e=e.get(n)||null,r,i,null);Ea(t,r)}return null}function v(i,o,s,u){for(var l=null,c=null,h=o,v=o=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var g=d(i,h,s[v],u);if(null===g){null===h&&(h=m);break}e&&h&&null===g.alternate&&t(i,h),o=a(g,o,v),null===c?l=g:c.sibling=g,c=g,h=m}if(v===s.length)return n(i,h),l;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(o=a(h,o,v),null===c?l=h:c.sibling=h,c=h);return l}for(h=r(i,h);v<s.length;v++)null!==(m=p(h,i,v,s[v],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),o=a(m,o,v),null===c?l=m:c.sibling=m,c=m);return e&&h.forEach((function(e){return t(i,e)})),l}function m(i,s,u,l){var c=z(u);if("function"!==typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var h=c=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var k=d(i,v,y.value,l);if(null===k){null===v&&(v=g);break}e&&v&&null===k.alternate&&t(i,v),s=a(k,s,m),null===h?c=k:h.sibling=k,h=k,v=g}if(y.done)return n(i,v),c;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=f(i,y.value,l))&&(s=a(y,s,m),null===h?c=y:h.sibling=y,h=y);return c}for(v=r(i,v);!y.done;m++,y=u.next())null!==(y=p(v,i,m,y.value,l))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=a(y,s,m),null===h?c=y:h.sibling=y,h=y);return e&&v.forEach((function(e){return t(i,e)})),c}return function(e,r,a,u){var l="object"===typeof a&&null!==a&&a.type===E&&null===a.key;l&&(a=a.props.children);var c="object"===typeof a&&null!==a;if(c)switch(a.$$typeof){case b:e:{for(c=a.key,l=r;null!==l;){if(l.key===c){if(7===l.tag){if(a.type===E){n(e,l.sibling),(r=i(l,a.props.children)).return=e,e=r;break e}}else if(l.elementType===a.type){n(e,l.sibling),(r=i(l,a.props)).ref=xa(e,l,a),r.return=e,e=r;break e}n(e,l);break}t(e,l),l=l.sibling}a.type===E?((r=Yu(a.props.children,e.mode,u,a.key)).return=e,e=r):((u=Gu(a.type,a.key,a.props,null,e.mode,u)).ref=xa(e,r,a),u.return=e,e=u)}return s(e);case x:e:{for(l=a.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xu(a,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Qu(a,e.mode,u)).return=e,e=r),s(e);if(ba(a))return v(e,r,a,u);if(z(a))return m(e,r,a,u);if(c&&Ea(e,a),"undefined"===typeof a&&!l)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,G(e.type)||"Component"))}return n(e,r)}}var Ta=Ca(!0),Sa=Ca(!1),Ia={},Na=li(Ia),Ra=li(Ia),Da=li(Ia);function Pa(e){if(e===Ia)throw Error(o(174));return e}function Aa(e,t){switch(hi(Da,t),hi(Ra,e),hi(Na,Ia),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ci(Na),hi(Na,t)}function Oa(){ci(Na),ci(Ra),ci(Da)}function Ma(e){Pa(Da.current);var t=Pa(Na.current),n=pe(t,e.type);t!==n&&(hi(Ra,e),hi(Na,n))}function La(e){Ra.current===e&&(ci(Na),ci(Ra))}var ja=li(0);function Fa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ua=null,Va=null,Ba=!1;function za(e,t){var n=Hu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function qa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ha(e){if(Ba){var t=Va;if(t){var n=t;if(!qa(e,t)){if(!(t=Yr(n.nextSibling))||!qa(e,t))return e.flags=-1025&e.flags|2,Ba=!1,void(Ua=e);za(Ua,n)}Ua=e,Va=Yr(t.firstChild)}else e.flags=-1025&e.flags|2,Ba=!1,Ua=e}}function Wa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ua=e}function Ka(e){if(e!==Ua)return!1;if(!Ba)return Wa(e),Ba=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Hr(t,e.memoizedProps))for(t=Va;t;)za(e,t),t=Yr(t.nextSibling);if(Wa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Va=Yr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Va=null}}else Va=Ua?Yr(e.stateNode.nextSibling):null;return!0}function Ga(){Va=Ua=null,Ba=!1}var Ya=[];function $a(){for(var e=0;e<Ya.length;e++)Ya[e]._workInProgressVersionPrimary=null;Ya.length=0}var Qa=w.ReactCurrentDispatcher,Xa=w.ReactCurrentBatchConfig,Ja=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Ja=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qa.current=null===e||null===e.memoizedState?Ao:Oo,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Qa.current=Mo,e=n(r,i)}while(ro)}if(Qa.current=Po,t=null!==eo&&null!==eo.next,Ja=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function uo(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function lo(e,t){return"function"===typeof t?t(e):t}function co(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=a=null,l=i;do{var c=l.lane;if((Ja&c)===c)null!==u&&(u=u.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===e?l.eagerState:e(r,l.action);else{var h={lane:c,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(s=u=h,a=r):u=u.next=h,Za.lanes|=c,Bs|=c}l=l.next}while(null!==l&&l!==i);null===u?a=r:u.next=s,cr(r,t.memoizedState)||(jo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ho(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);cr(a,t.memoizedState)||(jo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function fo(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Ja&e)===e)&&(t._workInProgressVersionPrimary=r,Ya.push(t))),e)return n(t._source);throw Ya.push(t),Error(o(350))}function po(e,t,n,r){var i=As;if(null===i)throw Error(o(349));var a=t._getVersion,s=a(t._source),u=Qa.current,l=u.useState((function(){return fo(i,t,n)})),c=l[1],h=l[0];l=to;var f=e.memoizedState,d=f.refs,p=d.getSnapshot,v=f.source;f=f.subscribe;var m=Za;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=c;var e=a(t._source);if(!cr(s,e)){e=n(t._source),cr(h,e)||(c(e),e=du(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var u=31-Ht(o),l=1<<u;r[u]|=e,o&=~l}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=du(m);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),cr(p,n)&&cr(v,t)&&cr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:lo,lastRenderedState:h}).dispatch=c=Do.bind(null,Za,e),l.queue=e,l.baseQueue=null,h=fo(i,t,n),l.memoizedState=l.baseState=h),h}function vo(e,t,n){return po(uo(),e,t,n)}function mo(e){var t=so();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:lo,lastRenderedState:e}).dispatch=Do.bind(null,Za,e),[t.memoizedState,e]}function go(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function yo(e){return e={current:e},so().memoizedState=e}function ko(){return uo().memoizedState}function _o(e,t,n,r){var i=so();Za.flags|=e,i.memoizedState=go(1|t,n,void 0,void 0===r?null:r)}function wo(e,t,n,r){var i=uo();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void go(t,n,a,r)}Za.flags|=e,i.memoizedState=go(1|t,n,a,r)}function bo(e,t){return _o(516,4,e,t)}function xo(e,t){return wo(516,4,e,t)}function Eo(e,t){return wo(4,2,e,t)}function Co(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Co.bind(null,t,e),n)}function So(){}function Io(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ro(e,t){var n=Hi();Ki(98>n?98:n,(function(){e(!0)})),Ki(97<n?97:n,(function(){var n=Xa.transition;Xa.transition=1;try{e(!1),t()}finally{Xa.transition=n}}))}function Do(e,t,n){var r=fu(),i=du(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(a.eagerReducer=o,a.eagerState=u,cr(u,s))return}catch(l){}pu(e,i,r)}}var Po={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Ao={readContext:oa,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,_o(4,2,Co.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _o(4,2,e,t)},useMemo:function(e,t){var n=so();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=so();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Do.bind(null,Za,e),[r.memoizedState,e]},useRef:yo,useState:mo,useDebugValue:So,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return bo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return yo(e=Ro.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=so();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(Ba){var e=!1,t=function(e){return{$$typeof:M,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Qr++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,go(5,(function(){n("r:"+(Qr++).toString(36))}),void 0,null)),t}return mo(t="r:"+(Qr++).toString(36)),t},unstable_isNewReconciler:!1},Oo={readContext:oa,useCallback:Io,useContext:oa,useEffect:xo,useImperativeHandle:To,useLayoutEffect:Eo,useMemo:No,useReducer:co,useRef:ko,useState:function(){return co(lo)},useDebugValue:So,useDeferredValue:function(e){var t=co(lo),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=co(lo)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return co(lo)[0]},unstable_isNewReconciler:!1},Mo={readContext:oa,useCallback:Io,useContext:oa,useEffect:xo,useImperativeHandle:To,useLayoutEffect:Eo,useMemo:No,useReducer:ho,useRef:ko,useState:function(){return ho(lo)},useDebugValue:So,useDeferredValue:function(e){var t=ho(lo),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=ho(lo)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return ho(lo)[0]},unstable_isNewReconciler:!1},Lo=w.ReactCurrentOwner,jo=!1;function Fo(e,t,n,r){t.child=null===e?Sa(t,null,n,r):Ta(t,e.child,n,r)}function Uo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||jo?(t.flags|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Vo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Wu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gu(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Bo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:fr)(i,r)&&e.ref===t.ref)?as(e,t,a):(t.flags|=1,(e=Ku(o,r)).ref=t.ref,e.return=t,t.child=e)}function Bo(e,t,n,r,i,a){if(null!==e&&fr(e.memoizedProps,r)&&e.ref===t.ref){if(jo=!1,0===(a&i))return t.lanes=e.lanes,as(e,t,a);0!==(16384&e.flags)&&(jo=!0)}return Ho(e,t,n,r,a)}function zo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},bu(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},bu(t,e),null;t.memoizedState={baseLanes:0},bu(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,bu(t,r);return Fo(e,t,i,n),t.child}function qo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ho(e,t,n,r,i){var a=gi(n)?vi:di.current;return a=mi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||jo?(t.flags|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Wo(e,t,n,r,i){if(gi(n)){var a=!0;wi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=oa(l):l=mi(t,l=gi(n)?vi:di.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&_a(t,o,r,l),sa=!1;var f=t.memoizedState;o.state=f,da(t,r,o,i),u=t.memoizedState,s!==r||f!==u||pi.current||sa?("function"===typeof c&&(ma(t,n,c,r),u=t.memoizedState),(s=sa||ya(t,n,s,r,f,u,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,la(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Xi(t.type,s),o.props=l,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=oa(u):u=mi(t,u=gi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&_a(t,o,r,u),sa=!1,f=t.memoizedState,o.state=f,da(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||pi.current||sa?("function"===typeof d&&(ma(t,n,d,r),p=t.memoizedState),(l=sa||ya(t,n,l,r,f,p,u))?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return Ko(e,t,n,r,a,i)}function Ko(e,t,n,r,i,a){qo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&bi(t,n,!1),as(e,t,a);r=t.stateNode,Lo.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ta(t,e.child,null,a),t.child=Ta(t,null,s,a)):Fo(e,t,s,a),t.memoizedState=r.state,i&&bi(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Aa(e,t.containerInfo)}var Yo,$o,Qo,Xo={dehydrated:null,retryLane:0};function Jo(e,t,n){var r,i=t.pendingProps,a=ja.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),hi(ja,1&a),null===e?(void 0!==i.fallback&&Ha(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,t.lanes=33554432,e):((n=$u({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=ts(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Xo,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=$u(t,i,0,null),n=Yu(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=Ku(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ku(o,s),null!==e?r=Ku(e,r):(r=Yu(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function rs(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Fo(e,t,r.children,n),0!==(2&(r=ja.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(hi(ja,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fa(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fa(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,a,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function as(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ku(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ku(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function os(e,t){if(!Ba)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return gi(t.type)&&yi(),null;case 3:return Oa(),ci(pi),ci(di),$a(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ka(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:La(t);var a=Pa(Da.current);if(n=t.type,null!==e&&null!=t.stateNode)$o(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Pa(Na.current),Ka(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Jr]=t,r[Zr]=s,n){case"dialog":Rr("cancel",r),Rr("close",r);break;case"iframe":case"object":case"embed":Rr("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Rr(Tr[e],r);break;case"source":Rr("error",r);break;case"img":case"image":case"link":Rr("error",r),Rr("load",r);break;case"details":Rr("toggle",r);break;case"input":ee(r,s),Rr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Rr("invalid",r);break;case"textarea":ue(r,s),Rr("invalid",r)}for(var l in Ee(n,s),e=null,s)s.hasOwnProperty(l)&&(a=s[l],"children"===l?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):u.hasOwnProperty(l)&&null!=a&&"onScroll"===l&&Rr("scroll",r));switch(n){case"input":Q(r),re(r,s,!0);break;case"textarea":Q(r),ce(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(l=9===a.nodeType?a:a.ownerDocument,e===he&&(e=de(n)),e===he?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Jr]=t,e[Zr]=r,Yo(e,t),t.stateNode=e,l=Ce(n,r),n){case"dialog":Rr("cancel",e),Rr("close",e),a=r;break;case"iframe":case"object":case"embed":Rr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Tr.length;a++)Rr(Tr[a],e);a=r;break;case"source":Rr("error",e),a=r;break;case"img":case"image":case"link":Rr("error",e),Rr("load",e),a=r;break;case"details":Rr("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Rr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Rr("invalid",e);break;case"textarea":ue(e,r),a=se(e,r),Rr("invalid",e);break;default:a=r}Ee(n,a);var c=a;for(s in c)if(c.hasOwnProperty(s)){var h=c[s];"style"===s?be(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&ge(e,h):"children"===s?"string"===typeof h?("textarea"!==n||""!==h)&&ye(e,h):"number"===typeof h&&ye(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Rr("scroll",e):null!=h&&_(e,s,h,l))}switch(n){case"input":Q(e),re(e,r,!1);break;case"textarea":Q(e),ce(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Y(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Vr)}qr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Qo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Pa(Da.current),Pa(Na.current),Ka(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return ci(ja),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ka(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&ja.current)?0===Fs&&(Fs=3):(0!==Fs&&3!==Fs||(Fs=4),null===As||0===(134217727&Bs)&&0===(134217727&zs)||yu(As,Ms))),(r||n)&&(t.flags|=4),null);case 4:return Oa(),null===e&&Pr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(ci(ja),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(l=r.rendering))if(s)os(r,!1);else{if(0!==Fs||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(l=Fa(e))){for(t.flags|=64,os(r,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return hi(ja,1&ja.current|2),t.child}e=e.sibling}null!==r.tail&&qi()>Ks&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Fa(l))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),os(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!Ba)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*qi()-r.renderingStartTime>Ks&&1073741824!==n&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=r.last)?n.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=qi(),n.sibling=null,t=ja.current,hi(ja,s?1&t|2:1&t),n):null;case 23:case 24:return xu(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function us(e){switch(e.tag){case 1:gi(e.type)&&yi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Oa(),ci(pi),ci(di),$a(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return La(e),null;case 13:return ci(ja),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ci(ja),null;case 4:return Oa(),null;case 10:return ra(e),null;case 23:case 24:return xu(),null;default:return null}}function ls(e,t){try{var n="",r=t;do{n+=K(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function cs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Yo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},$o=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Pa(Na.current);var o,s=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),s=[];break;case"option":a=ae(e,a),r=ae(e,r),s=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":a=se(e,a),r=se(e,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Vr)}for(h in Ee(n,r),n=null,a)if(!r.hasOwnProperty(h)&&a.hasOwnProperty(h)&&null!=a[h])if("style"===h){var l=a[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(u.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(l=null!=a?a[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(null!=c||null!=l))if("style"===h)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(h,c)):"children"===h?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(u.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Rr("scroll",e),s||l===c||(s=[])):"object"===typeof c&&null!==c&&c.$$typeof===M?c.toString():(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},Qo=function(e,t,n,r){n!==r&&(t.flags|=4)};var hs="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=ca(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Qs||(Qs=!0,Xs=r),cs(0,t)},n}function ds(e,t,n){(n=ca(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return cs(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Js?Js=new Set([this]):Js.add(this),cs(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vu(e,n)}else t.current=null}function ms(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(o(163))}function gs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(ju(n,e),Lu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&qr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&bt(n)))))}throw Error(o(163))}function ys(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ks(e,t){if(Ei&&"function"===typeof Ei.onCommitFiberUnmount)try{Ei.onCommitFiberUnmount(xi,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))ju(t,n);else{r=t;try{i()}catch(a){Vu(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Vu(t,a)}break;case 5:vs(t);break;case 4:Cs(e,t)}}function _s(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ws(e){return 5===e.tag||3===e.tag||4===e.tag}function bs(e){e:{for(var t=e.return;null!==t;){if(ws(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ws(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?xs(e,n,t):Es(e,n,t)}function xs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(xs(e,t,n),e=e.sibling;null!==e;)xs(e,t,n),e=e.sibling}function Es(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Es(e,t,n),e=e.sibling;null!==e;)Es(e,t,n),e=e.sibling}function Cs(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,l=u;;)if(ks(s,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===u)break e;for(;null===l.sibling;){if(null===l.return||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ks(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Ts(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ce(e,i),t=Ce(e,r),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];"style"===s?be(n,u):"dangerouslySetInnerHTML"===s?ge(n,u):"children"===s?ye(n,u):_(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":le(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,bt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ws=qi(),ys(t.child,!0)),void Ss(t);case 19:return void Ss(t);case 23:case 24:return void ys(t,null!==t.memoizedState)}throw Error(o(163))}function Ss(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=zu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Is(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ns=Math.ceil,Rs=w.ReactCurrentDispatcher,Ds=w.ReactCurrentOwner,Ps=0,As=null,Os=null,Ms=0,Ls=0,js=li(0),Fs=0,Us=null,Vs=0,Bs=0,zs=0,qs=0,Hs=null,Ws=0,Ks=1/0;function Gs(){Ks=qi()+500}var Ys,$s=null,Qs=!1,Xs=null,Js=null,Zs=!1,eu=null,tu=90,nu=[],ru=[],iu=null,au=0,ou=null,su=-1,uu=0,lu=0,cu=null,hu=!1;function fu(){return 0!==(48&Ps)?qi():-1!==su?su:su=qi()}function du(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Hi()?1:2;if(0===uu&&(uu=Vs),0!==Qi.transition){0!==lu&&(lu=null!==Hs?Hs.pendingLanes:0),e=uu;var t=4186112&~lu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Hi(),0!==(4&Ps)&&98===e?e=Vt(12,uu):e=Vt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function pu(e,t,n){if(50<au)throw au=0,ou=null,Error(o(185));if(null===(e=vu(e,t)))return null;qt(e,t,n),e===As&&(zs|=t,4===Fs&&yu(e,Ms));var r=Hi();1===t?0!==(8&Ps)&&0===(48&Ps)?ku(e):(mu(e,n),0===Ps&&(Gs(),Yi())):(0===(4&Ps)||98!==r&&99!==r||(null===iu?iu=new Set([e]):iu.add(e)),mu(e,n)),Hs=e}function vu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function mu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Ht(s),l=1<<u,c=a[u];if(-1===c){if(0===(l&r)||0!==(l&i)){c=t,jt(l);var h=Lt;a[u]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=t&&(e.expiredLanes|=l);s&=~l}if(r=Ft(e,e===As?Ms:0),t=Lt,0===r)null!==n&&(n!==ji&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==ji&&Si(n)}15===t?(n=ku.bind(null,e),null===Ui?(Ui=[n],Vi=Ti(Pi,$i)):Ui.push(n),n=ji):14===t?n=Gi(99,ku.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Gi(n,gu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function gu(e){if(su=-1,lu=uu=0,0!==(48&Ps))throw Error(o(327));var t=e.callbackNode;if(Mu()&&e.callbackNode!==t)return null;var n=Ft(e,e===As?Ms:0);if(0===n)return null;var r=n,i=Ps;Ps|=16;var a=Tu();for(As===e&&Ms===r||(Gs(),Eu(e,r));;)try{Nu();break}catch(u){Cu(e,u)}if(na(),Rs.current=a,Ps=i,null!==Os?r=0:(As=null,Ms=0,r=Fs),0!==(Vs&zs))Eu(e,0);else if(0!==r){if(2===r&&(Ps|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=Ut(e))&&(r=Su(e,n))),1===r)throw t=Us,Eu(e,0),yu(e,n),mu(e,qi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Pu(e);break;case 3:if(yu(e,n),(62914560&n)===n&&10<(r=Ws+500-qi())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){fu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Wr(Pu.bind(null,e),r);break}Pu(e);break;case 4:if(yu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Ht(n);a=1<<s,(s=r[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=qi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ns(n/1960))-n)){e.timeoutHandle=Wr(Pu.bind(null,e),n);break}Pu(e);break;default:throw Error(o(329))}}return mu(e,qi()),e.callbackNode===t?gu.bind(null,e):null}function yu(e,t){for(t&=~qs,t&=~zs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),r=1<<n;e[n]=-1,t&=~r}}function ku(e){if(0!==(48&Ps))throw Error(o(327));if(Mu(),e===As&&0!==(e.expiredLanes&Ms)){var t=Ms,n=Su(e,t);0!==(Vs&zs)&&(n=Su(e,t=Ft(e,t)))}else n=Su(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Ps|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=Ut(e))&&(n=Su(e,t))),1===n)throw n=Us,Eu(e,0),yu(e,t),mu(e,qi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pu(e),mu(e,qi()),null}function _u(e,t){var n=Ps;Ps|=1;try{return e(t)}finally{0===(Ps=n)&&(Gs(),Yi())}}function wu(e,t){var n=Ps;Ps&=-2,Ps|=8;try{return e(t)}finally{0===(Ps=n)&&(Gs(),Yi())}}function bu(e,t){hi(js,Ls),Ls|=t,Vs|=t}function xu(){Ls=js.current,ci(js)}function Eu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Kr(n)),null!==Os)for(n=Os.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&yi();break;case 3:Oa(),ci(pi),ci(di),$a();break;case 5:La(r);break;case 4:Oa();break;case 13:case 19:ci(ja);break;case 10:ra(r);break;case 23:case 24:xu()}n=n.return}As=e,Os=Ku(e.current,null),Ms=Ls=Vs=t,Fs=0,Us=null,qs=zs=Bs=0}function Cu(e,t){for(;;){var n=Os;try{if(na(),Qa.current=Po,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Ja=0,to=eo=Za=null,ro=!1,Ds.current=null,null===n||null===n.return){Fs=1,Us=t,Os=null;break}e:{var a=e,o=n.return,s=n,u=t;if(t=Ms,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&ja.current),f=o;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=f.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!h)}}if(d){var m=f.updateQueue;if(null===m){var g=new Set;g.add(l),f.updateQueue=g}else m.add(l);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=ca(-1,1);y.tag=2,ha(s,y)}s.lanes|=1;break e}u=void 0,s=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new hs,u=new Set,k.set(l,u)):void 0===(u=k.get(l))&&(u=new Set,k.set(l,u)),!u.has(s)){u.add(s);var _=Bu.bind(null,a,l,s);l.then(_,_)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);u=Error((G(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Fs&&(Fs=2),u=ls(u,s),f=o;do{switch(f.tag){case 3:a=u,f.flags|=4096,t&=-t,f.lanes|=t,fa(f,fs(0,a,t));break e;case 1:a=u;var w=f.type,b=f.stateNode;if(0===(64&f.flags)&&("function"===typeof w.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Js||!Js.has(b)))){f.flags|=4096,t&=-t,f.lanes|=t,fa(f,ds(f,a,t));break e}}f=f.return}while(null!==f)}Du(n)}catch(x){t=x,Os===n&&null!==n&&(Os=n=n.return);continue}break}}function Tu(){var e=Rs.current;return Rs.current=Po,null===e?Po:e}function Su(e,t){var n=Ps;Ps|=16;var r=Tu();for(As===e&&Ms===t||Eu(e,t);;)try{Iu();break}catch(i){Cu(e,i)}if(na(),Ps=n,Rs.current=r,null!==Os)throw Error(o(261));return As=null,Ms=0,Fs}function Iu(){for(;null!==Os;)Ru(Os)}function Nu(){for(;null!==Os&&!Ii();)Ru(Os)}function Ru(e){var t=Ys(e.alternate,e,Ls);e.memoizedProps=e.pendingProps,null===t?Du(e):Os=t,Ds.current=null}function Du(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Ls)))return void(Os=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ls)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Os=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Os=t);Os=t=e}while(null!==t);0===Fs&&(Fs=5)}function Pu(e){var t=Hi();return Ki(99,Au.bind(null,e,t)),null}function Au(e,t){do{Mu()}while(null!==eu);if(0!==(48&Ps))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<a;){var l=31-Ht(a),c=1<<l;i[l]=0,s[l]=-1,u[l]=-1,a&=~c}if(null!==iu&&0===(24&r)&&iu.has(e)&&iu.delete(e),e===As&&(Os=As=null,Ms=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ps,Ps|=32,Ds.current=null,Br=$t,gr(s=mr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(c=u.getSelection&&u.getSelection())&&0!==c.rangeCount){u=c.anchorNode,a=c.anchorOffset,l=c.focusNode,c=c.focusOffset;try{u.nodeType,l.nodeType}catch(T){u=null;break e}var h=0,f=-1,d=-1,p=0,v=0,m=s,g=null;t:for(;;){for(var y;m!==u||0!==a&&3!==m.nodeType||(f=h+a),m!==l||0!==c&&3!==m.nodeType||(d=h+c),3===m.nodeType&&(h+=m.nodeValue.length),null!==(y=m.firstChild);)g=m,m=y;for(;;){if(m===s)break t;if(g===u&&++p===a&&(f=h),g===l&&++v===c&&(d=h),null!==(y=m.nextSibling))break;g=(m=g).parentNode}m=y}u=-1===f||-1===d?null:{start:f,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;zr={focusedElem:s,selectionRange:u},$t=!1,cu=null,hu=!1,$s=r;do{try{Ou()}catch(T){if(null===$s)throw Error(o(330));Vu($s,T),$s=$s.nextEffect}}while(null!==$s);cu=null,$s=r;do{try{for(s=e;null!==$s;){var k=$s.flags;if(16&k&&ye($s.stateNode,""),128&k){var _=$s.alternate;if(null!==_){var w=_.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&k){case 2:bs($s),$s.flags&=-3;break;case 6:bs($s),$s.flags&=-3,Ts($s.alternate,$s);break;case 1024:$s.flags&=-1025;break;case 1028:$s.flags&=-1025,Ts($s.alternate,$s);break;case 4:Ts($s.alternate,$s);break;case 8:Cs(s,u=$s);var b=u.alternate;_s(u),null!==b&&_s(b)}$s=$s.nextEffect}}catch(T){if(null===$s)throw Error(o(330));Vu($s,T),$s=$s.nextEffect}}while(null!==$s);if(w=zr,_=mr(),k=w.focusedElem,s=w.selectionRange,_!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==s&&gr(k)&&(_=s.start,void 0===(w=s.end)&&(w=_),"selectionStart"in k?(k.selectionStart=_,k.selectionEnd=Math.min(w,k.value.length)):(w=(_=k.ownerDocument||document)&&_.defaultView||window).getSelection&&(w=w.getSelection(),u=k.textContent.length,b=Math.min(s.start,u),s=void 0===s.end?b:Math.min(s.end,u),!w.extend&&b>s&&(u=s,s=b,b=u),u=pr(k,b),a=pr(k,s),u&&a&&(1!==w.rangeCount||w.anchorNode!==u.node||w.anchorOffset!==u.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((_=_.createRange()).setStart(u.node,u.offset),w.removeAllRanges(),b>s?(w.addRange(_),w.extend(a.node,a.offset)):(_.setEnd(a.node,a.offset),w.addRange(_))))),_=[];for(w=k;w=w.parentNode;)1===w.nodeType&&_.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<_.length;k++)(w=_[k]).element.scrollLeft=w.left,w.element.scrollTop=w.top}$t=!!Br,zr=Br=null,e.current=n,$s=r;do{try{for(k=e;null!==$s;){var x=$s.flags;if(36&x&&gs(k,$s.alternate,$s),128&x){_=void 0;var E=$s.ref;if(null!==E){var C=$s.stateNode;$s.tag,_=C,"function"===typeof E?E(_):E.current=_}}$s=$s.nextEffect}}catch(T){if(null===$s)throw Error(o(330));Vu($s,T),$s=$s.nextEffect}}while(null!==$s);$s=null,Fi(),Ps=i}else e.current=n;if(Zs)Zs=!1,eu=e,tu=t;else for($s=r;null!==$s;)t=$s.nextEffect,$s.nextEffect=null,8&$s.flags&&((x=$s).sibling=null,x.stateNode=null),$s=t;if(0===(r=e.pendingLanes)&&(Js=null),1===r?e===ou?au++:(au=0,ou=e):au=0,n=n.stateNode,Ei&&"function"===typeof Ei.onCommitFiberRoot)try{Ei.onCommitFiberRoot(xi,n,void 0,64===(64&n.current.flags))}catch(T){}if(mu(e,qi()),Qs)throw Qs=!1,e=Xs,Xs=null,e;return 0!==(8&Ps)||Yi(),null}function Ou(){for(;null!==$s;){var e=$s.alternate;hu||null===cu||(0!==(8&$s.flags)?et($s,cu)&&(hu=!0):13===$s.tag&&Is(e,$s)&&et($s,cu)&&(hu=!0));var t=$s.flags;0!==(256&t)&&ms(e,$s),0===(512&t)||Zs||(Zs=!0,Gi(97,(function(){return Mu(),null}))),$s=$s.nextEffect}}function Mu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Ki(e,Fu)}return!1}function Lu(e,t){nu.push(t,e),Zs||(Zs=!0,Gi(97,(function(){return Mu(),null})))}function ju(e,t){ru.push(t,e),Zs||(Zs=!0,Gi(97,(function(){return Mu(),null})))}function Fu(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Ps))throw Error(o(331));var t=Ps;Ps|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(l){if(null===a)throw Error(o(330));Vu(a,l)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var u=i.create;i.destroy=u()}catch(l){if(null===a)throw Error(o(330));Vu(a,l)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Ps=t,Yi(),!0}function Uu(e,t,n){ha(e,t=fs(0,t=ls(n,t),1)),t=fu(),null!==(e=vu(e,1))&&(qt(e,1,t),mu(e,t))}function Vu(e,t){if(3===e.tag)Uu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Uu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r))){var i=ds(n,e=ls(t,e),1);if(ha(n,i),i=fu(),null!==(n=vu(n,1)))qt(n,1,i),mu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Bu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=fu(),e.pingedLanes|=e.suspendedLanes&n,As===e&&(Ms&n)===n&&(4===Fs||3===Fs&&(62914560&Ms)===Ms&&500>qi()-Ws?Eu(e,0):qs|=n),mu(e,t)}function zu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Hi()?1:2:(0===uu&&(uu=Vs),0===(t=Bt(62914560&~uu))&&(t=4194304))),n=fu(),null!==(e=vu(e,t))&&(qt(e,t,n),mu(e,n))}function qu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Hu(e,t,n,r){return new qu(e,t,n,r)}function Wu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ku(e,t){var n=e.alternate;return null===n?((n=Hu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gu(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Wu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Yu(n.children,i,a,t);case L:s=8,i|=16;break;case C:s=8,i|=1;break;case T:return(e=Hu(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=a,e;case R:return(e=Hu(13,n,t,i)).type=R,e.elementType=R,e.lanes=a,e;case D:return(e=Hu(19,n,t,i)).elementType=D,e.lanes=a,e;case j:return $u(n,i,a,t);case F:return(e=Hu(24,n,t,i)).elementType=F,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case I:s=9;break e;case N:s=11;break e;case P:s=14;break e;case A:s=16,r=null;break e;case O:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Hu(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Yu(e,t,n,r){return(e=Hu(7,e,r,t)).lanes=n,e}function $u(e,t,n,r){return(e=Hu(23,e,r,t)).elementType=j,e.lanes=n,e}function Qu(e,t,n){return(e=Hu(6,e,null,t)).lanes=n,e}function Xu(e,t,n){return(t=Hu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ju(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function Zu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function el(e,t,n,r){var i=t.current,a=fu(),s=du(i);e:if(n){t:{if(Qe(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(gi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var l=n.type;if(gi(l)){n=_i(n,l,u);break e}}n=u}else n=fi;return null===t.context?t.context=n:t.pendingContext=n,(t=ca(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ha(i,t),pu(i,s,a),s}function tl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rl(e,t){nl(e,t),(e=e.alternate)&&nl(e,t)}function il(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ju(e,t,null!=n&&!0===n.hydrate),t=Hu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ua(t),e[ei]=n.current,Pr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function al(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ol(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=tl(o);s.call(e)}}el(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new il(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var u=i;i=function(){var e=tl(o);u.call(e)}}wu((function(){el(t,o,e,i)}))}return tl(o)}function sl(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!al(t))throw Error(o(200));return Zu(e,t,null,n)}Ys=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)jo=!0;else{if(0===(n&r)){switch(jo=!1,t.tag){case 3:Go(t),Ga();break;case 5:Ma(t);break;case 1:gi(t.type)&&wi(t);break;case 4:Aa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;hi(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Jo(e,t,n):(hi(ja,1&ja.current),null!==(t=as(e,t,n))?t.sibling:null);hi(ja,1&ja.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),hi(ja,ja.current),r)break;return null;case 23:case 24:return t.lanes=0,zo(e,t,n)}return as(e,t,n)}jo=0!==(16384&e.flags)}else jo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,gi(r)){var a=!0;wi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ua(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&ma(t,r,s,e),i.updater=ga,t.stateNode=i,i._reactInternals=t,wa(t,r,e,n),t=Ko(null,t,r,!0,a,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Wu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===P)return 14}return 2}(i),e=Xi(i,e),a){case 0:t=Ho(null,t,i,e,n);break e;case 1:t=Wo(null,t,i,e,n);break e;case 11:t=Uo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ho(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Wo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,la(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ga(),t=as(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Va=Yr(t.stateNode.containerInfo.firstChild),Ua=t,a=Ba=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Ya.push(a);for(n=Sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fo(e,t,r,n),Ga();t=t.child}return t;case 5:return Ma(t),null===e&&Ha(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Hr(r,i)?s=null:null!==a&&Hr(r,a)&&(t.flags|=16),qo(e,t),Fo(e,t,s,n),t.child;case 6:return null===e&&Ha(t),null;case 13:return Jo(e,t,n);case 4:return Aa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ta(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value;var u=t.type._context;if(hi(Ji,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=cr(u,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!pi.current){t=as(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var l=u.dependencies;if(null!==l){s=u.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&a)){1===u.tag&&((c=ca(-1,n&-n)).tag=2,ha(u,c)),u.lanes|=n,null!==(c=u.alternate)&&(c.lanes|=n),ia(u.return,n),l.lanes|=n;break}c=c.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Fo(e,t,r,n),t.child;case 14:return a=Xi(i=t.type,t.pendingProps),Vo(e,t,i,a=Xi(i.type,a),r,n);case 15:return Bo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,gi(r)?(e=!0,wi(t)):e=!1,aa(t,n),ka(t,r,i),wa(t,r,i,n),Ko(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return zo(e,t,n)}throw Error(o(156,t.tag))},il.prototype.render=function(e){el(e,this._internalRoot,null,null)},il.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;el(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(pu(e,4,fu()),rl(e,4))},nt=function(e){13===e.tag&&(pu(e,67108864,fu()),rl(e,67108864))},rt=function(e){if(13===e.tag){var t=fu(),n=du(e);pu(e,n,t),rl(e,n)}},it=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));X(r),ne(r,i)}}}break;case"textarea":le(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Ae=_u,Oe=function(e,t,n,r,i){var a=Ps;Ps|=4;try{return Ki(98,e.bind(null,t,n,r,i))}finally{0===(Ps=a)&&(Gs(),Yi())}},Me=function(){0===(49&Ps)&&(function(){if(null!==iu){var e=iu;iu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,mu(e,qi())}))}Yi()}(),Mu())},Le=function(e,t){var n=Ps;Ps|=2;try{return e(t)}finally{0===(Ps=n)&&(Gs(),Yi())}};var ul={Events:[ri,ii,ai,De,Pe,Mu,{current:!1}]},ll={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cl={bundleType:ll.bundleType,version:ll.version,rendererPackageName:ll.rendererPackageName,rendererConfig:ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:ll.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hl.isDisabled&&hl.supportsFiber)try{xi=hl.inject(cl),Ei=hl}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ul,t.createPortal=sl,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ps;if(0!==(48&n))return e(t);Ps|=1;try{if(e)return Ki(99,e.bind(null,t))}finally{Ps=n,Yi()}},t.hydrate=function(e,t,n){if(!al(t))throw Error(o(200));return ol(null,e,t,!0,n)},t.render=function(e,t,n){if(!al(t))throw Error(o(200));return ol(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!al(e))throw Error(o(40));return!!e._reactRootContainer&&(wu((function(){ol(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=_u,t.unstable_createPortal=function(e,t){return sl(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!al(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ol(e,t,n,!1,r)},t.version="17.0.2"},256:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(456)},374:function(e,t,n){"use strict";n(576);var r=n(793),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:a,_owner:o.current}}t.jsx=l,t.jsxs=l},575:function(e,t,n){"use strict";var r=n(576),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var l=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),a=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),s=h("react.context"),u=h("react.forward_ref"),t.Suspense=h("react.suspense"),l=h("react.memo"),c=h("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function g(){}function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var k=y.prototype=new g;k.constructor=y,r(k,m.prototype),k.isPureReactComponent=!0;var _={current:null},w=Object.prototype.hasOwnProperty,b={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!b.hasOwnProperty(r)&&(a[r]=t[r]);var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===a[r]&&(a[r]=u[r]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var C=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case a:u=!0}}if(u)return o=o(u=e),e=""===r?"."+T(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(C,"$&/")+"/"),S(o,t,n,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=r+T(s=e[l],l);u+=S(s,t,n,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=S(s=s.value,t,n,c=r+T(s,l++),o);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function I(e,t,n){if(null==e)return e;var r=[],i=0;return S(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var R={current:null};function D(){var e=R.current;if(null===e)throw Error(d(321));return e}var P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:_,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error(d(143));return e}},t.Component=m,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=_.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!b.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];a.children=l}return{$$typeof:i,type:e.type,key:o,ref:s,props:a,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return D().useCallback(e,t)},t.useContext=function(e,t){return D().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return D().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return D().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return D().useLayoutEffect(e,t)},t.useMemo=function(e,t){return D().useMemo(e,t)},t.useReducer=function(e,t,n){return D().useReducer(e,t,n)},t.useRef=function(e){return D().useRef(e)},t.useState=function(e){return D().useState(e)},t.version="17.0.2"},793:function(e,t,n){"use strict";e.exports=n(575)},872:function(e,t,n){"use strict";e.exports=n(374)},762:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(D){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new I(r||[]);return a._invoke=function(e,t,n){var r=h;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return R()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=C(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=c(e,t,n);if("normal"===u.type){if(r=n.done?p:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",v={};function m(){}function g(){}function y(){}var k={};u(k,a,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(N([])));w&&w!==n&&r.call(w,a)&&(k=w);var b=y.prototype=m.prototype=Object.create(k);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,a,o,s){var u=c(e[i],e,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"===typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function C(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=c(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:R}}function R(){return{value:t,done:!0}}return g.prototype=y,u(b,"constructor",y),u(y,"constructor",g),g.displayName=u(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},x(E.prototype),u(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new E(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(b),u(b,s,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},886:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,c=null,h=function e(){if(null!==l)try{var n=t.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==l?setTimeout(n,0,e):(l=e,setTimeout(h,0))},r=function(e,t){c=setTimeout(e,t)},i=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,g=-1,y=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var _=new MessageChannel,w=_.port2;_.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();k=e+y;try{m(!0,e)?w.postMessage(null):(v=!1,m=null)}catch(n){throw w.postMessage(null),n}}else v=!1},n=function(e){m=e,v||(v=!0,w.postMessage(null))},r=function(e,n){g=f((function(){e(t.unstable_now())}),n)},i=function(){d(g),g=-1}}function b(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<C(i,t)))break e;e[r]=t,e[n]=i,n=r}}function x(e){return void 0===(e=e[0])?null:e}function E(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],s=a+1,u=e[s];if(void 0!==o&&0>C(o,n))void 0!==u&&0>C(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==u&&0>C(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function C(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],S=[],I=1,N=null,R=3,D=!1,P=!1,A=!1;function O(e){for(var t=x(S);null!==t;){if(null===t.callback)E(S);else{if(!(t.startTime<=e))break;E(S),t.sortIndex=t.expirationTime,b(T,t)}t=x(S)}}function M(e){if(A=!1,O(e),!P)if(null!==x(T))P=!0,n(L);else{var t=x(S);null!==t&&r(M,t.startTime-e)}}function L(e,n){P=!1,A&&(A=!1,i()),D=!0;var a=R;try{for(O(n),N=x(T);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,R=N.priorityLevel;var s=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?N.callback=s:N===x(T)&&E(T),O(n)}else E(T);N=x(T)}if(null!==N)var u=!0;else{var l=x(S);null!==l&&r(M,l.startTime-n),u=!1}return u}finally{N=null,R=a,D=!1}}var j=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||D||(P=!0,n(L))},t.unstable_getCurrentPriorityLevel=function(){return R},t.unstable_getFirstCallbackNode=function(){return x(T)},t.unstable_next=function(e){switch(R){case 1:case 2:case 3:var t=3;break;default:t=R}var n=R;R=t;try{return e()}finally{R=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=j,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=R;R=e;try{return t()}finally{R=n}},t.unstable_scheduleCallback=function(e,a,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:I++,callback:a,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,b(S,e),null===x(T)&&e===x(S)&&(A?i():A=!0,r(M,o-s))):(e.sortIndex=u,b(T,e),P||D||(P=!0,n(L))),e},t.unstable_wrapCallback=function(e){var t=R;return function(){var n=R;R=t;try{return e.apply(this,arguments)}finally{R=n}}}},860:function(e,t,n){"use strict";e.exports=n(886)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".8c1278ac.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="firebase-auth:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var h=l[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);l<o.length;l++)a=o[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkfirebase_auth=self.webpackChunkfirebase_auth||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e,t=n(793),r=n(256);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));var u=function(e){return e};var l="beforeunload",c="popstate";function h(e){e.preventDefault(),e.returnValue=""}function f(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function d(){return Math.random().toString(36).substr(2,8)}function p(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function v(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(e,t){if(!e)throw new Error(t)}var g=(0,t.createContext)(null);var y=(0,t.createContext)(null);var k=(0,t.createContext)({outlet:null,matches:[]});function _(e){m(!1)}function w(n){var r=n.basename,i=void 0===r?"/":r,a=n.children,o=void 0===a?null:a,s=n.location,u=n.navigationType,l=void 0===u?e.Pop:u,c=n.navigator,h=n.static,f=void 0!==h&&h;E()&&m(!1);var d=U(i),p=(0,t.useMemo)((function(){return{basename:d,navigator:c,static:f}}),[d,c,f]);"string"===typeof s&&(s=v(s));var k=s,_=k.pathname,w=void 0===_?"/":_,b=k.search,x=void 0===b?"":b,C=k.hash,T=void 0===C?"":C,S=k.state,I=void 0===S?null:S,N=k.key,R=void 0===N?"default":N,D=(0,t.useMemo)((function(){var e=j(w,d);return null==e?null:{pathname:e,search:x,hash:T,state:I,key:R}}),[d,w,x,T,I,R]);return null==D?null:(0,t.createElement)(g.Provider,{value:p},(0,t.createElement)(y.Provider,{children:o,value:{location:D,navigationType:l}}))}function b(e){var n=e.children,r=e.location;return function(e,n){E()||m(!1);var r=(0,t.useContext)(k).matches,i=r[r.length-1],a=i?i.params:{},o=(i&&i.pathname,i?i.pathnameBase:"/");i&&i.route;0;var s,u=C();if(n){var l,c="string"===typeof n?v(n):n;"/"===o||(null==(l=c.pathname)?void 0:l.startsWith(o))||m(!1),s=c}else s=u;var h=s.pathname||"/",f="/"===o?h:h.slice(o.length)||"/",d=function(e,t,n){void 0===n&&(n="/");var r=j(("string"===typeof t?v(t):t).pathname||"/",n);if(null==r)return null;var i=N(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=A(i[o],r);return a}(e,{pathname:f});0;return O(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},a,e.params),pathname:F([o,e.pathname]),pathnameBase:"/"===e.pathnameBase?o:F([o,e.pathnameBase])})})),r)}(I(n),r)}function x(e){E()||m(!1);var n=(0,t.useContext)(g),r=n.basename,i=n.navigator,a=S(e),o=a.hash,s=a.pathname,u=a.search,l=s;if("/"!==r){var c=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?v(e).pathname:e.pathname}(e),h=null!=c&&c.endsWith("/");l="/"===s?r+(h?"/":""):F([r,s])}return i.createHref({pathname:l,search:u,hash:o})}function E(){return null!=(0,t.useContext)(y)}function C(){return E()||m(!1),(0,t.useContext)(y).location}function T(){E()||m(!1);var e=(0,t.useContext)(g),n=e.basename,r=e.navigator,i=(0,t.useContext)(k).matches,a=C().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),s=(0,t.useRef)(!1);(0,t.useEffect)((function(){s.current=!0}));var u=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),s.current)if("number"!==typeof e){var i=L(e,JSON.parse(o),a);"/"!==n&&(i.pathname=F([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,o,a]);return u}function S(e){var n=(0,t.useContext)(k).matches,r=C().pathname,i=JSON.stringify(n.map((function(e){return e.pathnameBase})));return(0,t.useMemo)((function(){return L(e,JSON.parse(i),r)}),[e,i,r])}function I(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==_&&m(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=I(e.props.children)),n.push(r)}else n.push.apply(n,I(e.props.children))})),n}function N(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||m(!1),a.relativePath=a.relativePath.slice(r.length));var o=F([r,a.relativePath]),s=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&m(!1),N(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:P(o,e.index),routesMeta:s})})),t}var R=/^:\w+$/,D=function(e){return"*"===e};function P(e,t){var n=e.split("/"),r=n.length;return n.some(D)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!D(e)})).reduce((function(e,t){return e+(R.test(t)?3:""===t?1:10)}),r)}function A(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=M({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);var h=s.route;a.push({params:r,pathname:F([i,c.pathname]),pathnameBase:U(F([i,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(i=F([i,c.pathnameBase]))}return a}function O(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)(k.Provider,{children:void 0!==i.route.element?i.route.element:r,value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function M(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=o(n,2),i=r[0],a=r[1],s=t.match(i);if(!s)return null;var u=s[0],l=u.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";l=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(Ky){return e}}(c[n]||""),e}),{}),pathname:u,pathnameBase:l,pattern:e}}function L(e,t,n){var r,i="string"===typeof e?v(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var s=a.split("/");".."===s[0];)s.shift(),o-=1;i.pathname=s.join("/")}r=o>=0?t[o]:"/"}var u=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?v(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:V(a),hash:B(s)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!u.pathname.endsWith("/")&&(u.pathname+="/"),u}function j(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var F=function(e){return e.join("/").replace(/\/\/+/g,"/")},U=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},V=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},B=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function z(){return z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z.apply(this,arguments)}function q(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var H=["onClick","reloadDocument","replace","state","target","to"];function W(n){var r=n.basename,i=n.children,a=n.window,m=(0,t.useRef)();null==m.current&&(m.current=function(t){void 0===t&&(t={});var n=t.window,r=void 0===n?document.defaultView:n,i=r.history;function a(){var e=r.location,t=e.pathname,n=e.search,a=e.hash,o=i.state||{};return[o.idx,u({pathname:t,search:n,hash:a,state:o.usr||null,key:o.key||"default"})]}var o=null;r.addEventListener(c,(function(){if(o)w.call(o),o=null;else{var t=e.Pop,n=a(),r=n[0],i=n[1];if(w.length){if(null!=r){var s=y-r;s&&(o={action:t,location:i,retry:function(){S(-1*s)}},S(s))}}else T(t)}}));var m=e.Pop,g=a(),y=g[0],k=g[1],_=f(),w=f();function b(e){return"string"===typeof e?e:p(e)}function x(e,t){return void 0===t&&(t=null),u(s({pathname:k.pathname,hash:"",search:""},"string"===typeof e?v(e):e,{state:t,key:d()}))}function E(e,t){return[{usr:e.state,key:e.key,idx:t},b(e)]}function C(e,t,n){return!w.length||(w.call({action:e,location:t,retry:n}),!1)}function T(e){m=e;var t=a();y=t[0],k=t[1],_.call({action:m,location:k})}function S(e){i.go(e)}null==y&&(y=0,i.replaceState(s({},i.state,{idx:y}),""));var I={get action(){return m},get location(){return k},createHref:b,push:function t(n,a){var o=e.Push,s=x(n,a);if(C(o,s,(function(){t(n,a)}))){var u=E(s,y+1),l=u[0],c=u[1];try{i.pushState(l,"",c)}catch(Ky){r.location.assign(c)}T(o)}},replace:function t(n,r){var a=e.Replace,o=x(n,r);if(C(a,o,(function(){t(n,r)}))){var s=E(o,y),u=s[0],l=s[1];i.replaceState(u,"",l),T(a)}},go:S,back:function(){S(-1)},forward:function(){S(1)},listen:function(e){return _.push(e)},block:function(e){var t=w.push(e);return 1===w.length&&r.addEventListener(l,h),function(){t(),w.length||r.removeEventListener(l,h)}}};return I}({window:a}));var g=m.current,y=o((0,t.useState)({action:g.action,location:g.location}),2),k=y[0],_=y[1];return(0,t.useLayoutEffect)((function(){return g.listen(_)}),[g]),(0,t.createElement)(w,{basename:r,children:i,location:k.location,navigationType:k.action,navigator:g})}var K=(0,t.forwardRef)((function(e,n){var r=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,s=e.state,u=e.target,l=e.to,c=q(e,H),h=x(l),f=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,s=T(),u=C(),l=S(e);return(0,t.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||p(u)===p(l);s(e,{replace:n,state:o})}}),[u,s,l,a,o,i,e])}(l,{replace:o,state:s,target:u});return(0,t.createElement)("a",z({},c,{href:h,onClick:function(e){r&&r(e),e.defaultPrevented||i||f(e)},ref:n,target:u}))}));function G(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(Ky){return void n(Ky)}s.done?t(u):Promise.resolve(u).then(r,i)}function Y(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){G(a,r,i,o,s,"next",e)}function s(e){G(a,r,i,o,s,"throw",e)}o(void 0)}))}}var $=n(911),Q=n.n($);function X(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t,n){return t&&te(e.prototype,t),n&&te(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e,t){return ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ie(e,t)}function ae(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}function oe(e){return oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(e)}function se(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function le(e,t){if(t&&("object"===ue(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return re(e)}function ce(e){var t=se();return function(){var n,r=oe(e);if(t){var i=oe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return le(this,n)}}function he(e,t,n){return he=se()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&ie(i,n.prototype),i},he.apply(null,arguments)}function fe(e){var t="function"===typeof Map?new Map:void 0;return fe=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return he(e,arguments,oe(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ie(n,e)},fe(e)}var de=!1,pe=!1,ve="${JSCORE_VERSION}",me=function(e,t){if(!e)throw ge(t)},ge=function(e){return new Error("Firebase Database ("+ve+") INTERNAL ASSERT FAILED: "+e)},ye=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ke={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|l>>6,d=63&l;u||(d=64,o||(f=64)),r.push(n[c],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ye(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var l=a<<2|o>>4;if(r.push(l),64!==s){var c=o<<4&240|s>>2;if(r.push(c),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},_e=function(e){var t=ye(e);return ke.encodeByteArray(t,!0)},we=function(e){return _e(e).replace(/\./g,"")},be=function(e){try{return ke.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function xe(e){return Ee(void 0,e)}function Ee(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ee(e[n],t[n]));return e}var Ce=function(){function e(){var t=this;ee(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return ne(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Te(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Se(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Te())}function Ie(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ne(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Re(){var e=Te();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function De(){return!0===de||!0===pe}var Pe=function(e){ae(n,e);var t=ce(n);function n(e,r,i){var a;return ee(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(re(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(re(a),Ae.prototype.create),a}return ne(n)}(fe(Error)),Ae=function(){function e(t,n,r){ee(this,e),this.service=t,this.serviceName=n,this.errors=r}return ne(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Oe(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Pe(n,a,t);return o}}]),e}();function Oe(e,t){return e.replace(Me,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Me=/\{\$([^}]+)}/g;function Le(e){return JSON.parse(e)}function je(e){return JSON.stringify(e)}var Fe=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Le(be(a[0])||""),n=Le(be(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function Ue(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ve(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Be(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ze(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function qe(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(He(s)&&He(u)){if(!qe(s,u))return!1}else if(s!==u)return!1}for(var l=0,c=r;l<c.length;l++){var h=c[l];if(!n.includes(h))return!1}return!0}function He(e){return null!==e&&"object"===typeof e}function We(e){for(var t=[],n=function(){var e=o(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Ke(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=o(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Ge(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Ye=function(){function e(){ee(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return ne(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,l=this.chain_[0],c=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=f^c&(h^f),u=1518500249):(s=c^h^f,u=1859775393):p<60?(s=c&h|f&(c|h),u=2400959708):(s=c^h^f,u=3395469782);var v=(l<<5|l>>>27)+s+d+u+n[p]&4294967295;d=f,f=h,h=4294967295&(c<<30|c>>>2),c=l,l=v}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();var $e=function(){function e(t,n){var r=this;ee(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return ne(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=J(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Qe),void 0===r.error&&(r.error=Qe),void 0===r.complete&&(r.complete=Qe);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Qe(){}function Xe(e,t){return"".concat(e," failed: ").concat(t," argument ")}var Je=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Ze(e){return e&&e._delegate?e._delegate:e}function et(e,t){return new Promise((function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}}))}var tt=function(){function e(t){ee(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return ne(e,[{key:"transaction",value:function(e,t){return new nt(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new rt(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),nt=function(){function e(t){var n=this;ee(this,e),this._transaction=t,this.complete=new Promise((function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}}))}return ne(e,[{key:"objectStore",value:function(e){return new rt(this._transaction.objectStore(e))}}]),e}(),rt=function(){function e(t){ee(this,e),this._store=t}return ne(e,[{key:"index",value:function(e){return new it(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new it(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return et(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return et(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return et(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return et(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),it=function(){function e(t){ee(this,e),this._index=t}return ne(e,[{key:"get",value:function(e){return et(this._index.get(e),"Error reading from IndexedDB")}}]),e}();var at=function(){function e(t,n,r){ee(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ne(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ot="[DEFAULT]",st=function(){function e(t,n){ee(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ne(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Ce;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ot})}catch(l){}var t,n=J(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=o(t.value,2),i=r[0],a=r[1],s=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:s});a.resolve(u)}catch(l){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Y($.mark((function e(){var t;return $.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(X(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),X(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),s=J(this.instancesDeferred.entries());try{for(s.s();!(i=s.n()).done;){var u=o(i.value,2),l=u[0],c=u[1],h=this.normalizeInstanceIdentifier(l);r===h&&c.resolve(a)}}catch(f){s.e(f)}finally{s.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=J(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ot?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot;return this.component?this.component.multipleInstances?e:ot:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var ut,lt,ct=function(){function e(t){ee(this,e),this.name=t,this.providers=new Map}return ne(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new st(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ht=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(lt||(lt={}));var ft,dt,pt={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},vt=lt.INFO,mt=(Z(ut={},lt.DEBUG,"log"),Z(ut,lt.VERBOSE,"log"),Z(ut,lt.INFO,"info"),Z(ut,lt.WARN,"warn"),Z(ut,lt.ERROR,"error"),ut),gt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=mt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},yt=function(){function e(t){ee(this,e),this.name=t,this._logLevel=vt,this._logHandler=gt,this._userLogHandler=null,ht.push(this)}return ne(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in lt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?pt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,lt.DEBUG].concat(t)),this._logHandler.apply(this,[this,lt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,lt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,lt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,lt.INFO].concat(t)),this._logHandler.apply(this,[this,lt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,lt.WARN].concat(t)),this._logHandler.apply(this,[this,lt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,lt.ERROR].concat(t)),this._logHandler.apply(this,[this,lt.ERROR].concat(t))}}]),e}();var kt=function(){function e(t){ee(this,e),this.container=t}return ne(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var _t="@firebase/app",wt="0.7.20",bt=new yt("@firebase/app"),xt="[DEFAULT]",Et=(Z(ft={},_t,"fire-core"),Z(ft,"@firebase/app-compat","fire-core-compat"),Z(ft,"@firebase/analytics","fire-analytics"),Z(ft,"@firebase/analytics-compat","fire-analytics-compat"),Z(ft,"@firebase/app-check","fire-app-check"),Z(ft,"@firebase/app-check-compat","fire-app-check-compat"),Z(ft,"@firebase/auth","fire-auth"),Z(ft,"@firebase/auth-compat","fire-auth-compat"),Z(ft,"@firebase/database","fire-rtdb"),Z(ft,"@firebase/database-compat","fire-rtdb-compat"),Z(ft,"@firebase/functions","fire-fn"),Z(ft,"@firebase/functions-compat","fire-fn-compat"),Z(ft,"@firebase/installations","fire-iid"),Z(ft,"@firebase/installations-compat","fire-iid-compat"),Z(ft,"@firebase/messaging","fire-fcm"),Z(ft,"@firebase/messaging-compat","fire-fcm-compat"),Z(ft,"@firebase/performance","fire-perf"),Z(ft,"@firebase/performance-compat","fire-perf-compat"),Z(ft,"@firebase/remote-config","fire-rc"),Z(ft,"@firebase/remote-config-compat","fire-rc-compat"),Z(ft,"@firebase/storage","fire-gcs"),Z(ft,"@firebase/storage-compat","fire-gcs-compat"),Z(ft,"@firebase/firestore","fire-fst"),Z(ft,"@firebase/firestore-compat","fire-fst-compat"),Z(ft,"fire-js","fire-js"),Z(ft,"firebase","fire-js-all"),ft),Ct=new Map,Tt=new Map;function St(e,t){try{e.container.addComponent(t)}catch(n){bt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function It(e){var t=e.name;if(Tt.has(t))return bt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Tt.set(t,e);var n,r=J(Ct.values());try{for(r.s();!(n=r.n()).done;){St(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Nt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var Rt=(Z(dt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Z(dt,"bad-app-name","Illegal App name: '{$appName}"),Z(dt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Z(dt,"app-deleted","Firebase App named '{$appName}' already deleted"),Z(dt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Z(dt,"invalid-log-argument","First argument to `onLog` must be null or a function."),Z(dt,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),Z(dt,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),Z(dt,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),Z(dt,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),dt),Dt=new Ae("app","Firebase",Rt),Pt=function(){function e(t,n,r){var i=this;ee(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new at("app",(function(){return i}),"PUBLIC"))}return ne(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Dt.create("app-deleted",{appName:this._name})}}]),e}(),At="9.6.10";function Ot(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,t=Ct.get(e);if(!t)throw Dt.create("no-app",{appName:e});return t}function Mt(e,t,n){var r,i=null!==(r=Et[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void bt.warn(s.join(" "))}It(new at("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var Lt="firebase-heartbeat-store",jt=null;function Ft(){var e,t,n;return jt||(jt=(e="firebase-heartbeat-database",t=1,n=function(e,t){0===t&&e.createObjectStore(Lt)},new Promise((function(r,i){try{var a=indexedDB.open(e,t);a.onsuccess=function(e){r(new tt(e.target.result))},a.onerror=function(e){var t;i("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},a.onupgradeneeded=function(e){n(new tt(a.result),e.oldVersion,e.newVersion,new nt(a.transaction))}}catch(o){i("Error opening indexedDB: ".concat(o.message))}}))).catch((function(e){throw Dt.create("storage-open",{originalErrorMessage:e.message})}))),jt}function Ut(e){return Vt.apply(this,arguments)}function Vt(){return Vt=Y($.mark((function e(t){var n;return $.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ft();case 3:return n=e.sent,e.abrupt("return",n.transaction(Lt).objectStore(Lt).get(qt(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Dt.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Vt.apply(this,arguments)}function Bt(e,t){return zt.apply(this,arguments)}function zt(){return zt=Y($.mark((function e(t,n){var r,i,a;return $.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ft();case 3:return r=e.sent,i=r.transaction(Lt,"readwrite"),a=i.objectStore(Lt),e.next=8,a.put(n,qt(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),Dt.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),zt.apply(this,arguments)}function qt(e){return"".concat(e.name,"!").concat(e.options.appId)}var Ht=function(){function e(t){var n=this;ee(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Yt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return ne(e,[{key:"triggerHeartbeat",value:function(){var e=Y($.mark((function e(){var t,n,r;return $.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Wt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Y($.mark((function e(){var t,n,r,i,a;return $.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Wt(),n=Kt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=we(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Wt(){return(new Date).toISOString().substring(0,10)}function Kt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=J(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),$t(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),$t(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Gt,Yt=function(){function e(t){ee(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return ne(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Y($.mark((function e(){return $.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"===typeof indexedDB){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Ky){t(Ky)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Y($.mark((function e(){var t;return $.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Ut(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Y($.mark((function e(t){var n,r;return $.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Bt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Y($.mark((function e(t){var n,r;return $.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Bt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(X(r.heartbeats),X(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function $t(e){return we(JSON.stringify({version:2,heartbeats:e})).length}Gt="",It(new at("platform-logger",(function(e){return new kt(e)}),"PRIVATE")),It(new at("heartbeat",(function(e){return new Ht(e)}),"PRIVATE")),Mt(_t,wt,Gt),Mt(_t,wt,"esm2017"),Mt("fire-js","");function Qt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oe(e)););return e}function Xt(){return Xt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Qt(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Xt.apply(this,arguments)}Mt("firebase","9.6.10","app");function Jt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Zt;Object.create;function en(){return Z({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var tn=en,nn=new Ae("auth","Firebase",en()),rn=new yt("@firebase/auth");function an(e){if(rn.logLevel<=lt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];rn.error.apply(rn,["Auth (".concat(At,"): ").concat(e)].concat(n))}}function on(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw cn.apply(void 0,[e].concat(n))}function sn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return cn.apply(void 0,[e].concat(n))}function un(e,t,n){var r=Object.assign(Object.assign({},tn()),Z({},t,n));return new Ae("auth","Firebase",r).create(t,{appName:e.name})}function ln(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&on(e,"argument-error"),un(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function cn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=X(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(X(o)))}return nn.create.apply(nn,[e].concat(n))}function hn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw cn.apply(void 0,[t].concat(r))}}function fn(e){var t="INTERNAL ASSERTION FAILED: "+e;throw an(t),new Error(t)}function dn(e,t){e||fn(t)}var pn=new Map;function vn(e){dn(e instanceof Function,"Expected a class definition");var t=pn.get(e);return t?(dn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,pn.set(e,t),t)}function mn(e,t){var n=Nt(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(qe(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;on(r,"already-initialized")}return n.initialize({options:t})}function gn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function yn(){return"http:"===kn()||"https:"===kn()}function kn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var _n=function(){function e(t,n){ee(this,e),this.shortDelay=t,this.longDelay=n,dn(n>t,"Short delay should be less than long delay!"),this.isMobile=Se()||Ne()}return ne(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(yn()||Ie()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function wn(e,t){dn(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var bn=function(){function e(){ee(this,e)}return ne(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),xn=(Z(Zt={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Z(Zt,"MISSING_CUSTOM_TOKEN","internal-error"),Z(Zt,"INVALID_IDENTIFIER","invalid-email"),Z(Zt,"MISSING_CONTINUE_URI","internal-error"),Z(Zt,"INVALID_PASSWORD","wrong-password"),Z(Zt,"MISSING_PASSWORD","internal-error"),Z(Zt,"EMAIL_EXISTS","email-already-in-use"),Z(Zt,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Z(Zt,"INVALID_IDP_RESPONSE","invalid-credential"),Z(Zt,"INVALID_PENDING_TOKEN","invalid-credential"),Z(Zt,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Z(Zt,"MISSING_REQ_TYPE","internal-error"),Z(Zt,"EMAIL_NOT_FOUND","user-not-found"),Z(Zt,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Z(Zt,"EXPIRED_OOB_CODE","expired-action-code"),Z(Zt,"INVALID_OOB_CODE","invalid-action-code"),Z(Zt,"MISSING_OOB_CODE","internal-error"),Z(Zt,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Z(Zt,"INVALID_ID_TOKEN","invalid-user-token"),Z(Zt,"TOKEN_EXPIRED","user-token-expired"),Z(Zt,"USER_NOT_FOUND","user-token-expired"),Z(Zt,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Z(Zt,"INVALID_CODE","invalid-verification-code"),Z(Zt,"INVALID_SESSION_INFO","invalid-verification-id"),Z(Zt,"INVALID_TEMPORARY_PROOF","invalid-credential"),Z(Zt,"MISSING_SESSION_INFO","missing-verification-id"),Z(Zt,"SESSION_EXPIRED","code-expired"),Z(Zt,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Z(Zt,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Z(Zt,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Z(Zt,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Z(Zt,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Z(Zt,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Z(Zt,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Z(Zt,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Z(Zt,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Z(Zt,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Z(Zt,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Zt),En=new _n(3e4,6e4);function Cn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Tn(e,t,n,r){return Sn.apply(this,arguments)}function Sn(){return Sn=Y(Q().mark((function e(t,n,r,i){var a,o=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",In(t,a,Y(Q().mark((function e(){var a,o,s,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=We(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",bn.fetch()(Pn(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Sn.apply(this,arguments)}function In(e,t,n){return Nn.apply(this,arguments)}function Nn(){return Nn=Y(Q().mark((function e(t,n,r){var i,a,s,u,l,c,h,f,d,p;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},xn),n),e.prev=2,a=new An(t),e.next=6,Promise.race([r(),a.promise]);case 6:return s=e.sent,a.clearNetworkTimeout(),e.next=10,s.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw On(t,"account-exists-with-different-credential",u);case 13:if(!s.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(l=s.ok?u.errorMessage:u.error.message,c=l.split(" : "),h=o(c,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw On(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=25;break}throw On(t,"email-already-in-use",u);case 25:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=30;break}throw un(t,p,d);case 30:on(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof Pe)){e.next=37;break}throw e.t0;case 37:on(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),Nn.apply(this,arguments)}function Rn(e,t,n,r){return Dn.apply(this,arguments)}function Dn(){return Dn=Y(Q().mark((function e(t,n,r,i){var a,o,s=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Tn(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&on(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Dn.apply(this,arguments)}function Pn(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?wn(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var An=function(){function e(t){var n=this;ee(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(sn(n.auth,"network-request-failed"))}),En.get())}))}return ne(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function On(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=sn(e,t,r);return i.customData._tokenResponse=n,i}function Mn(e,t){return Ln.apply(this,arguments)}function Ln(){return Ln=Y(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tn(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Ln.apply(this,arguments)}function jn(e,t){return Fn.apply(this,arguments)}function Fn(){return Fn=Y(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tn(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Fn.apply(this,arguments)}function Un(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Vn(){return Vn=Y(Q().mark((function e(t){var n,r,i,a,o,s,u=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=Ze(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,hn((a=zn(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Un(Bn(a.auth_time)),issuedAtTime:Un(Bn(a.iat)),expirationTime:Un(Bn(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Vn.apply(this,arguments)}function Bn(e){return 1e3*Number(e)}function zn(e){var t=o(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return an("JWT malformed, contained fewer than 3 sections"),null;try{var a=be(r);return a?JSON.parse(a):(an("Failed to decode base64 JWT payload"),null)}catch(s){return an("Caught error parsing JWT payload as JSON",s),null}}function qn(e,t){return Hn.apply(this,arguments)}function Hn(){return Hn=Y(Q().mark((function e(t,n){var r=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Pe&&Wn(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Hn.apply(this,arguments)}function Wn(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Kn=function(){function e(t){ee(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return ne(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Y(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Y(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Gn=function(){function e(t,n){ee(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return ne(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Un(this.lastLoginAt),this.creationTime=Un(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Yn(e){return $n.apply(this,arguments)}function $n(){return $n=Y(Q().mark((function e(t){var n,r,i,a,o,s,u,l,c,h,f;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,qn(t,jn(r,{idToken:i}));case 6:hn(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Jn(o.providerUserInfo):[],u=Xn(t.providerData,s),l=t.isAnonymous,c=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!l&&c,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Gn(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),$n.apply(this,arguments)}function Qn(){return(Qn=Y(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ze(t),e.next=3,Yn(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xn(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(X(n),X(t))}function Jn(e){return e.map((function(e){var t=e.providerId,n=Jt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Zn(e,t){return er.apply(this,arguments)}function er(){return er=Y(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,In(t,{},Y(Q().mark((function e(){var r,i,a,o,s,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=We({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=Pn(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",bn.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),er.apply(this,arguments)}var tr=function(){function e(){ee(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return ne(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){hn(e.idToken,"internal-error"),hn("undefined"!==typeof e.idToken,"internal-error"),hn("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=zn(e);return hn(t,"internal-error"),hn("undefined"!==typeof t.exp,"internal-error"),hn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Y(Q().mark((function e(t){var n,r=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],hn(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Y(Q().mark((function e(t,n){var r,i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zn(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return fn("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(hn("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(hn("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(hn("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function nr(e,t){hn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var rr=function(){function e(t){ee(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Jt(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?X(a.providerData):[],this.metadata=new Gn(a.createdAt||void 0,a.lastLoginAt||void 0)}return ne(e,[{key:"getIdToken",value:function(){var e=Y(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(hn(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Vn.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Qn.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(hn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){hn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Y(Q().mark((function e(t){var n,r,i=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Yn(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Y(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,qn(this,Mn(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,l,c,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,g=null!==(l=n.createdAt)&&void 0!==l?l:void 0,y=null!==(c=n.lastLoginAt)&&void 0!==c?c:void 0,k=n.uid,_=n.emailVerified,w=n.isAnonymous,b=n.providerData,x=n.stsTokenManager;hn(k&&x,t,"internal-error");var E=tr.fromJSON(this.name,x);hn("string"===typeof k,t,"internal-error"),nr(h,t.name),nr(f,t.name),hn("boolean"===typeof _,t,"internal-error"),hn("boolean"===typeof w,t,"internal-error"),nr(d,t.name),nr(p,t.name),nr(v,t.name),nr(m,t.name),nr(g,t.name),nr(y,t.name);var C=new e({uid:k,auth:t,email:f,emailVerified:_,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:g,lastLoginAt:y});return b&&Array.isArray(b)&&(C.providerData=b.map((function(e){return Object.assign({},e)}))),m&&(C._redirectEventId=m),C}},{key:"_fromIdTokenResponse",value:function(){var t=Y(Q().mark((function t(n,r){var i,a,o,s=arguments;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new tr).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Yn(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),ir=function(){function e(){ee(this,e),this.type="NONE",this.storage={}}return ne(e,[{key:"_isAvailable",value:function(){var e=Y(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Y(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Y(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Y(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();ir.type="NONE";var ar=ir;function or(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var sr=function(){function e(t,n,r){ee(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=or(this.userKey,a.apiKey,o),this.fullPersistenceKey=or("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return ne(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Y(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?rr._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Y(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Y(Q().mark((function t(n,r){var i,a,o,s,u,l,c,h,f,d,p,v=arguments;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(vn(ar),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Y(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||vn(ar),s=or(i,n.config.apiKey,n.name),u=null,l=J(r),t.prev=10,l.s();case 12:if((c=l.n()).done){t.next=29;break}return h=c.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return d=rr._fromJSON(n,f),h!==o&&(u=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),l.e(t.t1);case 34:return t.prev=34,l.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Y(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function ur(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(fr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(lr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(pr(t))return"Blackberry";if(vr(t))return"Webos";if(cr(t))return"Safari";if((t.includes("chrome/")||hr(t))&&!t.includes("edge/"))return"Chrome";if(dr(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function lr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te();return/firefox\//i.test(e)}function cr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function hr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te();return/crios\//i.test(e)}function fr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te();return/iemobile/i.test(e)}function dr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te();return/android/i.test(e)}function pr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te();return/blackberry/i.test(e)}function vr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te();return/webos/i.test(e)}function mr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te();return/iphone|ipad|ipod/i.test(e)}function gr(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te();return mr(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function yr(){return Re()&&10===document.documentMode}function kr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te();return mr(e)||dr(e)||vr(e)||pr(e)||/windows phone/i.test(e)||fr(e)}function _r(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ur(Te());break;case"Worker":t="".concat(ur(Te()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(At,"/").concat(r)}var wr=function(){function e(t,n,r){ee(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xr(this),this.idTokenSubscription=new xr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return ne(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=vn(t)),this._initializationPromise=this.queue(Y(Q().mark((function r(){var i,a;return Q().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,sr.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Y(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Y(Q().mark((function e(t){var n,r,i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return hn(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Y(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Y(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yn(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Y(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Y(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Ze(t):null)&&hn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Y(Q().mark((function e(t){var n=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&hn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(Y(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Y(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Y(Q().mark((function n(){return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(vn(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Ae("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Y(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Y(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return hn(n=t&&vn(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,sr.create(this,[vn(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Y(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Y(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Y(Q().mark((function e(t){var n=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Y(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return hn(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Y(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return hn(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_r(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Y(Q().mark((function e(){var t,n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Z({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function br(e){return Ze(e)}var xr=function(){function e(t){var n=this;ee(this,e),this.auth=t,this.observer=null,this.addObserver=function(e,t){var n=new $e(e,t);return n.subscribe.bind(n)}((function(e){return n.observer=e}))}return ne(e,[{key:"next",get:function(){return hn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();var Er=function(){function e(t,n){ee(this,e),this.providerId=t,this.signInMethod=n}return ne(e,[{key:"toJSON",value:function(){return fn("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return fn("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return fn("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return fn("not implemented")}}]),e}();function Cr(e,t){return Tr.apply(this,arguments)}function Tr(){return Tr=Y(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Tr.apply(this,arguments)}function Sr(e,t){return Ir.apply(this,arguments)}function Ir(){return Ir=Y(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rn(t,"POST","/v1/accounts:signInWithPassword",Cn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ir.apply(this,arguments)}function Nr(e,t){return Rr.apply(this,arguments)}function Rr(){return Rr=Y(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tn(t,"POST","/v1/accounts:sendOobCode",Cn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Rr.apply(this,arguments)}function Dr(e,t){return Pr.apply(this,arguments)}function Pr(){return Pr=Y(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nr(t,n));case 1:case"end":return e.stop()}}),e)}))),Pr.apply(this,arguments)}function Ar(e,t){return Or.apply(this,arguments)}function Or(){return Or=Y(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rn(t,"POST","/v1/accounts:signInWithEmailLink",Cn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Or.apply(this,arguments)}function Mr(e,t){return Lr.apply(this,arguments)}function Lr(){return Lr=Y(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rn(t,"POST","/v1/accounts:signInWithEmailLink",Cn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Lr.apply(this,arguments)}var jr=function(e){ae(n,e);var t=ce(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return ee(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return ne(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Y(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Sr(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ar(t,{email:this._email,oobCode:this._password}));case 5:on(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Y(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Cr(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Mr(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:on(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Er);function Fr(e,t){return Ur.apply(this,arguments)}function Ur(){return Ur=Y(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rn(t,"POST","/v1/accounts:signInWithIdp",Cn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ur.apply(this,arguments)}var Vr=function(e){ae(n,e);var t=ce(n);function n(){var e;return ee(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return ne(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Fr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Fr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Fr(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=We(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):on("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Jt(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Er);function Br(e,t){return zr.apply(this,arguments)}function zr(){return zr=Y(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tn(t,"POST","/v1/accounts:sendVerificationCode",Cn(t,n)));case 1:case"end":return e.stop()}}),e)}))),zr.apply(this,arguments)}function qr(){return qr=Y(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rn(t,"POST","/v1/accounts:signInWithPhoneNumber",Cn(t,n)));case 1:case"end":return e.stop()}}),e)}))),qr.apply(this,arguments)}function Hr(){return Hr=Y(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rn(t,"POST","/v1/accounts:signInWithPhoneNumber",Cn(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw On(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Hr.apply(this,arguments)}var Wr=Z({},"USER_NOT_FOUND","user-not-found");function Kr(){return Kr=Y(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Rn(t,"POST","/v1/accounts:signInWithPhoneNumber",Cn(t,r),Wr));case 2:case"end":return e.stop()}}),e)}))),Kr.apply(this,arguments)}var Gr=function(e){ae(n,e);var t=ce(n);function n(e){var r;return ee(this,n),(r=t.call(this,"phone","phone")).params=e,r}return ne(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return qr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Hr.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Kr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Er);var Yr=function(){function e(t){var n,r,i,a,o,s;ee(this,e);var u=Ke(Ge(t)),l=null!==(n=u.apiKey)&&void 0!==n?n:null,c=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);hn(l&&c&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=c,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return ne(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Ke(Ge(e)).link,n=t?Ke(Ge(t)).deep_link_id:null,r=Ke(Ge(e)).deep_link_id;return(r?Ke(Ge(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var $r=function(){function e(){ee(this,e),this.providerId=e.PROVIDER_ID}return ne(e,null,[{key:"credential",value:function(e,t){return jr._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Yr.parseLink(t);return hn(n,"argument-error"),jr._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();$r.PROVIDER_ID="password",$r.EMAIL_PASSWORD_SIGN_IN_METHOD="password",$r.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Qr=function(){function e(t){ee(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return ne(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Xr=function(e){ae(n,e);var t=ce(n);function n(){var e;return ee(this,n),(e=t.apply(this,arguments)).scopes=[],e}return ne(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return X(this.scopes)}}]),n}(Qr),Jr=function(e){ae(n,e);var t=ce(n);function n(){return ee(this,n),t.call(this,"facebook.com")}return ne(n,null,[{key:"credential",value:function(e){return Vr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Xr);Jr.FACEBOOK_SIGN_IN_METHOD="facebook.com",Jr.PROVIDER_ID="facebook.com";var Zr=function(e){ae(n,e);var t=ce(n);function n(){var e;return ee(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return ne(n,null,[{key:"credential",value:function(e,t){return Vr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Xr);Zr.GOOGLE_SIGN_IN_METHOD="google.com",Zr.PROVIDER_ID="google.com";var ei=function(e){ae(n,e);var t=ce(n);function n(){return ee(this,n),t.call(this,"github.com")}return ne(n,null,[{key:"credential",value:function(e){return Vr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Xr);ei.GITHUB_SIGN_IN_METHOD="github.com",ei.PROVIDER_ID="github.com";var ti=function(e){ae(n,e);var t=ce(n);function n(){return ee(this,n),t.call(this,"twitter.com")}return ne(n,null,[{key:"credential",value:function(e,t){return Vr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Xr);function ni(e,t){return ri.apply(this,arguments)}function ri(){return ri=Y(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rn(t,"POST","/v1/accounts:signUp",Cn(t,n)));case 1:case"end":return e.stop()}}),e)}))),ri.apply(this,arguments)}ti.TWITTER_SIGN_IN_METHOD="twitter.com",ti.PROVIDER_ID="twitter.com";var ii=function(){function e(t){ee(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return ne(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Y(Q().mark((function t(n,r,i){var a,o,s,u,l=arguments;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>3&&void 0!==l[3]&&l[3],t.next=3,rr._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=ai(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Y(Q().mark((function t(n,r,i){var a;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=ai(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function ai(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var oi=function(e){ae(n,e);var t=ce(n);function n(e,r,i,a){var o,s;return ee(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(re(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return ne(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Pe);function si(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw oi._fromErrorAndOperation(e,n,t,r);throw n}))}function ui(e,t){return li.apply(this,arguments)}function li(){return li=Y(Q().mark((function e(t,n){var r,i,a=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=qn,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",ii._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),li.apply(this,arguments)}function ci(e,t){return hi.apply(this,arguments)}function hi(){return hi=Y(Q().mark((function e(t,n){var r,i,a,o,s,u,l=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,qn(t,si(i,a,n,t),r);case 6:return hn((o=e.sent).idToken,i,"internal-error"),hn(s=zn(o.idToken),i,"internal-error"),u=s.sub,hn(t.uid===u,i,"user-mismatch"),e.abrupt("return",ii._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&on(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),hi.apply(this,arguments)}function fi(e,t){return di.apply(this,arguments)}function di(){return di=Y(Q().mark((function e(t,n){var r,i,a,o,s=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,si(t,i,n);case 4:return a=e.sent,e.next=7,ii._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),di.apply(this,arguments)}function pi(e,t){return vi.apply(this,arguments)}function vi(){return vi=Y(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fi(br(t),n));case 1:case"end":return e.stop()}}),e)}))),vi.apply(this,arguments)}function mi(e,t,n){var r;hn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),hn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(hn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(hn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function gi(e,t,n){return yi.apply(this,arguments)}function yi(){return yi=Y(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ze(t),a={requestType:"PASSWORD_RESET",email:n},r&&mi(i,a,r),e.next=5,Dr(i,a);case 5:case"end":return e.stop()}}),e)}))),yi.apply(this,arguments)}function ki(e,t,n){return _i.apply(this,arguments)}function _i(){return _i=Y(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=br(t),e.next=3,ni(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,ii._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),_i.apply(this,arguments)}function wi(e,t,n){return pi(Ze(e),$r.credential(t,n))}function bi(e,t){return Tn(e,"POST","/v2/accounts/mfaEnrollment:start",Cn(e,t))}new WeakMap;var xi="__sak",Ei=function(){function e(t,n){ee(this,e),this.storageRetriever=t,this.type=n}return ne(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(xi,"1"),this.storage.removeItem(xi),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Ci=function(e){ae(n,e);var t=ce(n);function n(){var e;return ee(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Te();return cr(e)||mr(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=kr(),e._shouldAllowMigration=!0,e}return ne(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);yr()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Y(Q().mark((function e(t,r){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xt(oe(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Y(Q().mark((function e(t){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xt(oe(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Y(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xt(oe(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ei);Ci.type="LOCAL";var Ti=Ci,Si=function(e){ae(n,e);var t=ce(n);function n(){return ee(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return ne(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Ei);Si.type="SESSION";var Ii=Si;function Ni(e){return Promise.all(e.map(function(){var e=Y(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Ri=function(){function e(t){ee(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return ne(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Y(Q().mark((function e(t){var n,r,i,a,o,s,u,l;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=Y(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Ni(u);case 9:l=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:l});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Di(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ri.receivers=[];var Pi=function(){function e(t){ee(this,e),this.target=t,this.handlers=new Set}return ne(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Y(Q().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var l=Di("",20);i.port1.start();var c=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===l)switch(n.data.status){case"ack":clearTimeout(c),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(c),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Ai(){return window}function Oi(){return"undefined"!==typeof Ai().WorkerGlobalScope&&"function"===typeof Ai().importScripts}function Mi(){return Li.apply(this,arguments)}function Li(){return(Li=Y(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function ji(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Fi="firebaseLocalStorageDb",Ui="firebaseLocalStorage",Vi="fbase_key",Bi=function(){function e(t){ee(this,e),this.request=t}return ne(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function zi(e,t){return e.transaction([Ui],t?"readwrite":"readonly").objectStore(Ui)}function qi(){var e=indexedDB.deleteDatabase(Fi);return new Bi(e).toPromise()}function Hi(){var e=indexedDB.open(Fi,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Ui,{keyPath:Vi})}catch(r){n(r)}})),e.addEventListener("success",Y(Q().mark((function n(){var r;return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Ui)){n.next=12;break}return r.close(),n.next=5,qi();case 5:return n.t0=t,n.next=8,Hi();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Wi(e,t,n){return Ki.apply(this,arguments)}function Ki(){return Ki=Y(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=zi(t,!0).put((Z(i={},Vi,n),Z(i,"value",r),i)),e.abrupt("return",new Bi(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Ki.apply(this,arguments)}function Gi(e,t){return Yi.apply(this,arguments)}function Yi(){return Yi=Y(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zi(t,!1).get(n),e.next=3,new Bi(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Yi.apply(this,arguments)}function $i(e,t){var n=zi(e,!0).delete(t);return new Bi(n).toPromise()}var Qi=function(){function e(){ee(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return ne(e,[{key:"_openDb",value:function(){var e=Y(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Hi();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Y(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Y(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oi()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Y(Q().mark((function e(){var t=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Ri._getInstance(Oi()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Y(Q().mark((function e(n,r){var i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Y(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Y(Q().mark((function e(){var t,n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mi();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Pi(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Y(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&ji()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Y(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Hi();case 5:return t=e.sent,e.next=8,Wi(t,xi,"1");case 8:return e.next=10,$i(t,xi);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Y(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Y(Q().mark((function e(t,n){var r=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Y(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Wi(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Y(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Gi(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Y(Q().mark((function e(t){var n=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Y(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return $i(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Y(Q().mark((function e(){var t,n,r,i,a,o,s,u,l,c,h;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=zi(e,!1).getAll();return new Bi(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=J(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}for(l=0,c=Object.keys(this.localCache);l<c.length;l++)h=c[l],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Y(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Qi.type="LOCAL";var Xi=Qi;function Ji(e,t){return Tn(e,"POST","/v2/accounts/mfaSignIn:start",Cn(e,t))}function Zi(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=sn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function ea(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}ea("rcb"),new _n(3e4,6e4);var ta="recaptcha";function na(e,t,n){return ra.apply(this,arguments)}function ra(){return ra=Y(Q().mark((function e(t,n,r){var i,a,o,s,u,l,c,h,f;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,hn("string"===typeof a,t,"argument-error"),hn(r.type===ta,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return hn("enroll"===s.type,t,"internal-error"),e.next=13,bi(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return hn("signin"===s.type,t,"internal-error"),hn(l=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Ji(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:a}});case 22:return c=e.sent,e.abrupt("return",c.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Br(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),ra.apply(this,arguments)}var ia=function(){function e(t){ee(this,e),this.providerId=e.PROVIDER_ID,this.auth=br(t)}return ne(e,[{key:"verifyPhoneNumber",value:function(e,t){return na(this.auth,e,Ze(t))}}],[{key:"credential",value:function(e,t){return Gr._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Gr._fromTokenResponse(n,r):null}}]),e}();function aa(e,t){return t?vn(t):(hn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ia.PROVIDER_ID="phone",ia.PHONE_SIGN_IN_METHOD="phone";var oa=function(e){ae(n,e);var t=ce(n);function n(e){var r;return ee(this,n),(r=t.call(this,"custom","custom")).params=e,r}return ne(n,[{key:"_getIdTokenResponse",value:function(e){return Fr(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Fr(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Fr(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Er);function sa(e){return fi(e.auth,new oa(e),e.bypassAuthState)}function ua(e){var t=e.auth,n=e.user;return hn(n,t,"internal-error"),ci(n,new oa(e),e.bypassAuthState)}function la(e){return ca.apply(this,arguments)}function ca(){return ca=Y(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,hn(r=t.user,n,"internal-error"),e.abrupt("return",ui(r,new oa(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),ca.apply(this,arguments)}var ha=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];ee(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return ne(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Y(Q().mark((function t(n,r){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Y(Q().mark((function e(t){var n,r,i,a,o,s,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sa;case"linkViaPopup":case"linkViaRedirect":return la;case"reauthViaPopup":case"reauthViaRedirect":return ua;default:on(this.auth,"internal-error")}}},{key:"resolve",value:function(e){dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),fa=new _n(2e3,1e4);function da(e,t,n){return pa.apply(this,arguments)}function pa(){return pa=Y(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=br(t),ln(t,n,Qr),a=aa(i,r),o=new va(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),pa.apply(this,arguments)}var va=function(e){ae(n,e);var t=ce(n);function n(e,r,i,a,o){var s;return ee(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=re(s),s}return ne(n,[{key:"executeNotNull",value:function(){var e=Y(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return hn(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Y(Q().mark((function e(){var t,n=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dn(1===this.filter.length,"Popup operations only handle one event"),t=Di(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(sn(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(sn(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(sn(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,fa.get())}()}}]),n}(ha);va.currentPopupAction=null;var ma=new Map,ga=function(e){ae(n,e);var t=ce(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ee(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return ne(n,[{key:"execute",value:function(){var e=Y(Q().mark((function e(){var t,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ma.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,ya(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Xt(oe(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:ma.set(this.auth._key(),t);case 21:return this.bypassAuthState||ma.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Y(Q().mark((function e(t){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Xt(oe(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Xt(oe(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Y(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(ha);function ya(e,t){return ka.apply(this,arguments)}function ka(){return ka=Y(Q().mark((function e(t,n){var r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wa(n),i=_a(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),ka.apply(this,arguments)}function _a(e){return vn(e._redirectPersistence)}function wa(e){return or("pendingRedirect",e.config.apiKey,e.name)}function ba(e,t){return xa.apply(this,arguments)}function xa(){return xa=Y(Q().mark((function e(t,n){var r,i,a,o,s,u=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=br(t),a=aa(i,n),o=new ga(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),xa.apply(this,arguments)}var Ea=function(){function e(t){ee(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return ne(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ta(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Ta(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(sn(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ca(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Ca(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Ca(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Ta(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Sa(e){return Ia.apply(this,arguments)}function Ia(){return Ia=Y(Q().mark((function e(t){var n,r=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Tn(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Ia.apply(this,arguments)}var Na=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ra=/^https?/;function Da(){return Da=Y(Q().mark((function e(t){var n,r,i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Sa(t);case 4:n=e.sent,r=n.authorizedDomains,i=J(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Pa(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:on(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Da.apply(this,arguments)}function Pa(e){var t=gn(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Ra.test(r))return!1;if(Na.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Aa=new _n(3e4,6e4);function Oa(){var e=Ai().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=X(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Ma=null;function La(e){return Ma=Ma||function(e){return new Promise((function(t,n){var r,i,a;function o(){Oa(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Oa(),n(sn(e,"network-request-failed"))},timeout:Aa.get()})}if(null===(i=null===(r=Ai().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Ai().gapi)||void 0===a?void 0:a.load)){var s=ea("iframefcb");return Ai()[s]=function(){gapi.load?o():n(sn(e,"network-request-failed"))},Zi("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Ma=null,e}))}(e),Ma}var ja=new _n(5e3,15e3),Fa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ua=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Va(e){var t=e.config;hn(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?wn(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:At},i=Ua.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(We(r).slice(1))}function Ba(e){return za.apply(this,arguments)}function za(){return za=Y(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,La(t);case 2:return n=e.sent,hn(r=Ai().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Va(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fa,dontclear:!0},(function(e){return new Promise(function(){var n=Y(Q().mark((function n(r,i){var a,o,s;return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Ai().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=sn(t,"network-request-failed"),o=Ai().setTimeout((function(){i(a)}),ja.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),za.apply(this,arguments)}var qa={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ha="_blank",Wa="http://localhost",Ka=function(){function e(t){ee(this,e),this.window=t,this.associatedEvent=null}return ne(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Ga(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",l=Object.assign(Object.assign({},qa),{width:r.toString(),height:i.toString(),top:a,left:s}),c=Te().toLowerCase();n&&(u=hr(c)?Ha:n),lr(c)&&(t=t||Wa,l.scrollbars="yes");var h=Object.entries(l).reduce((function(e,t){var n=o(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(gr(c)&&"_self"!==u)return Ya(t||"",u),new Ka(null);var f=window.open(t||"",u,h);hn(f,e,"popup-blocked");try{f.focus()}catch(d){}return new Ka(f)}function Ya(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var $a="__/auth/handler",Qa="emulator/auth/handler";function Xa(e,t,n,r,i,a){hn(e.config.authDomain,e,"auth-domain-config-required"),hn(e.config.apiKey,e,"invalid-api-key");var s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:At,eventId:i};if(t instanceof Qr){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",Be(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,l=Object.entries(a||{});u<l.length;u++){var c=o(l[u],2),h=c[0],f=c[1];s[h]=f}}if(t instanceof Xr){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(s.scopes=d.join(","))}e.tenantId&&(s.tid=e.tenantId);for(var p=s,v=0,m=Object.keys(p);v<m.length;v++){var g=m[v];void 0===p[g]&&delete p[g]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat($a);return wn(t,Qa)}(e),"?").concat(We(p).slice(1))}var Ja="webStorageSupport",Za=function(){function e(){ee(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ii,this._completeRedirectFn=ba}return ne(e,[{key:"_openPopup",value:function(){var e=Y(Q().mark((function e(t,n,r,i){var a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dn(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Xa(t,n,r,gn(),i),e.abrupt("return",Ga(t,o,Di()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Y(Q().mark((function e(t,n,r,i){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Xa(t,n,r,gn(),i),Ai().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(dn(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Y(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ba(t);case 2:return n=e.sent,r=new Ea(t),n.register("authEvent",(function(e){return hn(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Ja,{type:Ja},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),on(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Da.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return kr()||cr()||mr()}}]),e}(),eo=Za,to=function(){function e(t){ee(this,e),this.factorId=t}return ne(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return fn("unexpected MultiFactorSessionType")}}}]),e}(),no=function(e){ae(n,e);var t=ce(n);function n(e){var r;return ee(this,n),(r=t.call(this,"phone")).credential=e,r}return ne(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Tn(e,"POST","/v2/accounts/mfaEnrollment:finalize",Cn(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Tn(e,"POST","/v2/accounts/mfaSignIn:finalize",Cn(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(to);(function(){function e(){ee(this,e)}return ne(e,null,[{key:"assertion",value:function(e){return no._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var ro,io="@firebase/auth",ao="0.19.11",oo=function(){function e(t){ee(this,e),this.auth=t,this.internalListeners=new Map}return ne(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Y(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){hn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();ro="Browser",It(new at("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){hn(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),hn(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:ro,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_r(ro)},i=new wr(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),It(new at("auth-internal",(function(e){return function(e){return new oo(e)}(br(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Mt(io,ao,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(ro)),Mt(io,ao,"esm2017");var so,uo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},lo={},co=co||{},ho=uo||self;function fo(){}function po(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function vo(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var mo="closure_uid_"+(1e9*Math.random()>>>0),go=0;function yo(e,t,n){return e.call.apply(e.bind,arguments)}function ko(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function _o(e,t,n){return(_o=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yo:ko).apply(null,arguments)}function wo(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function bo(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function xo(){this.s=this.s,this.o=this.o}var Eo={};xo.prototype.s=!1,xo.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,mo)&&e[mo]||(e[mo]=++go)}(this);delete Eo[e]}},xo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Co=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},To=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function So(e){return Array.prototype.concat.apply([],arguments)}function Io(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function No(e){return/^[\s\xa0]*$/.test(e)}var Ro,Do=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Po(e,t){return-1!=e.indexOf(t)}function Ao(e,t){return e<t?-1:e>t?1:0}e:{var Oo=ho.navigator;if(Oo){var Mo=Oo.userAgent;if(Mo){Ro=Mo;break e}}Ro=""}function Lo(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function jo(e){var t={};for(var n in e)t[n]=e[n];return t}var Fo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Uo(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Fo.length;a++)n=Fo[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Vo(e){return Vo[" "](e),e}Vo[" "]=fo;var Bo,zo=Po(Ro,"Opera"),qo=Po(Ro,"Trident")||Po(Ro,"MSIE"),Ho=Po(Ro,"Edge"),Wo=Ho||qo,Ko=Po(Ro,"Gecko")&&!(Po(Ro.toLowerCase(),"webkit")&&!Po(Ro,"Edge"))&&!(Po(Ro,"Trident")||Po(Ro,"MSIE"))&&!Po(Ro,"Edge"),Go=Po(Ro.toLowerCase(),"webkit")&&!Po(Ro,"Edge");function Yo(){var e=ho.document;return e?e.documentMode:void 0}e:{var $o="",Qo=function(){var e=Ro;return Ko?/rv:([^\);]+)(\)|;)/.exec(e):Ho?/Edge\/([\d\.]+)/.exec(e):qo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Go?/WebKit\/(\S+)/.exec(e):zo?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Qo&&($o=Qo?Qo[1]:""),qo){var Xo=Yo();if(null!=Xo&&Xo>parseFloat($o)){Bo=String(Xo);break e}}Bo=$o}var Jo,Zo={};function es(){return function(e){var t=Zo;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Do(String(Bo)).split("."),n=Do("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Ao(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Ao(0==a[2].length,0==o[2].length)||Ao(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(ho.document&&qo){var ts=Yo();Jo=ts||(parseInt(Bo,10)||void 0)}else Jo=void 0;var ns=Jo,rs=function(){if(!ho.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{ho.addEventListener("test",fo,t),ho.removeEventListener("test",fo,t)}catch(Bx){}return e}();function is(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function as(e,t){if(is.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ko){e:{try{Vo(t.nodeName);var i=!0;break e}catch(Kx){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:os[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&as.Z.h.call(this)}}is.prototype.h=function(){this.defaultPrevented=!0},bo(as,is);var os={2:"touch",3:"pen",4:"mouse"};as.prototype.h=function(){as.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ss="closure_listenable_"+(1e6*Math.random()|0),us=0;function ls(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++us,this.ca=this.fa=!1}function cs(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function hs(e){this.src=e,this.g={},this.h=0}function fs(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Co(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(cs(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ds(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}hs.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=ds(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new ls(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var ps="closure_lm_"+(1e6*Math.random()|0),vs={};function ms(e,t,n,r,i){if(r&&r.once)return ys(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)ms(e,t[a],n,r,i);return null}return n=Cs(n),e&&e[ss]?e.N(t,n,vo(r)?!!r.capture:!!r,i):gs(e,t,n,!1,r,i)}function gs(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=vo(i)?!!i.capture:!!i,s=xs(e);if(s||(e[ps]=s=new hs(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=bs;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)rs||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ws(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ys(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ys(e,t[a],n,r,i);return null}return n=Cs(n),e&&e[ss]?e.O(t,n,vo(r)?!!r.capture:!!r,i):gs(e,t,n,!0,r,i)}function ks(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ks(e,t[a],n,r,i);else r=vo(r)?!!r.capture:!!r,n=Cs(n),e&&e[ss]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ds(a=e.g[t],n,r,i))&&(cs(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=xs(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ds(t,n,r,i)),(n=-1<e?t[e]:null)&&_s(n))}function _s(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[ss])fs(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ws(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=xs(t))?(fs(n,e),0==n.h&&(n.src=null,t[ps]=null)):cs(e)}}}function ws(e){return e in vs?vs[e]:vs[e]="on"+e}function bs(e,t){if(e.ca)e=!0;else{t=new as(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&_s(e),e=n.call(r,t)}return e}function xs(e){return(e=e[ps])instanceof hs?e:null}var Es="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cs(e){return"function"===typeof e?e:(e[Es]||(e[Es]=function(t){return e.handleEvent(t)}),e[Es])}function Ts(){xo.call(this),this.i=new hs(this),this.P=this,this.I=null}function Ss(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new is(t,e);else if(t instanceof is)t.target=t.target||e;else{var i=t;Uo(t=new is(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Is(o,r,!0,t)&&i}if(i=Is(o=t.g=e,r,!0,t)&&i,i=Is(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Is(o=t.g=n[a],r,!1,t)&&i}function Is(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&fs(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}bo(Ts,xo),Ts.prototype[ss]=!0,Ts.prototype.removeEventListener=function(e,t,n,r){ks(this,e,t,n,r)},Ts.prototype.M=function(){if(Ts.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)cs(n[r]);delete t.g[e],t.h--}}this.I=null},Ts.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ts.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ns=ho.JSON.stringify;function Rs(){var e=Fs,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ds,Ps=function(){function e(){ee(this,e),this.h=this.g=null}return ne(e,[{key:"add",value:function(e,t){var n=As.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),As=new(function(){function e(t,n){ee(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return ne(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Os}),(function(e){return e.reset()})),Os=function(){function e(){ee(this,e),this.next=this.g=this.h=null}return ne(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Ms(e){ho.setTimeout((function(){throw e}),0)}function Ls(e,t){Ds||function(){var e=ho.Promise.resolve(void 0);Ds=function(){e.then(Us)}}(),js||(Ds(),js=!0),Fs.add(e,t)}var js=!1,Fs=new Ps;function Us(){for(var e;e=Rs();){try{e.h.call(e.g)}catch(Bx){Ms(Bx)}var t=As;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}js=!1}function Vs(e,t){Ts.call(this),this.h=e||1,this.g=t||ho,this.j=_o(this.kb,this),this.l=Date.now()}function Bs(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function zs(e,t,n){if("function"===typeof e)n&&(e=_o(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=_o(e.handleEvent,e)}return 2147483647<Number(t)?-1:ho.setTimeout(e,t||0)}function qs(e){e.g=zs((function(){e.g=null,e.i&&(e.i=!1,qs(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}bo(Vs,Ts),(so=Vs.prototype).da=!1,so.S=null,so.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ss(this,"tick"),this.da&&(Bs(this),this.start()))}},so.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},so.M=function(){Vs.Z.M.call(this),Bs(this),delete this.g};var Hs=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return ee(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return ne(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:qs(this)}},{key:"M",value:function(){Xt(oe(n.prototype),"M",this).call(this),this.g&&(ho.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(xo);function Ws(e){xo.call(this),this.h=e,this.g={}}bo(Ws,xo);var Ks=[];function Gs(e,t,n,r){Array.isArray(n)||(n&&(Ks[0]=n.toString()),n=Ks);for(var i=0;i<n.length;i++){var a=ms(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ys(e){Lo(e.g,(function(e,t){this.g.hasOwnProperty(t)&&_s(e)}),e),e.g={}}function $s(){this.g=!0}function Qs(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Ns(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}Ws.prototype.M=function(){Ws.Z.M.call(this),Ys(this)},Ws.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$s.prototype.Aa=function(){this.g=!1},$s.prototype.info=function(){};var Xs={},Js=null;function Zs(){return Js=Js||new Ts}function eu(e){is.call(this,Xs.Ma,e)}function tu(e){var t=Zs();Ss(t,new eu(t,e))}function nu(e,t){is.call(this,Xs.STAT_EVENT,e),this.stat=t}function ru(e){var t=Zs();Ss(t,new nu(t,e))}function iu(e,t){is.call(this,Xs.Na,e),this.size=t}function au(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return ho.setTimeout((function(){e()}),t)}Xs.Ma="serverreachability",bo(eu,is),Xs.STAT_EVENT="statevent",bo(nu,is),Xs.Na="timingevent",bo(iu,is);var ou={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},su={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function uu(){}function lu(e){return e.h||(e.h=e.i())}function cu(){}uu.prototype.h=null;var hu,fu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function du(){is.call(this,"d")}function pu(){is.call(this,"c")}function vu(){}function mu(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ws(this),this.P=yu,e=Wo?125:void 0,this.W=new Vs(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new gu}function gu(){this.i=null,this.g="",this.h=!1}bo(du,is),bo(pu,is),bo(vu,uu),vu.prototype.g=function(){return new XMLHttpRequest},vu.prototype.i=function(){return{}},hu=new vu;var yu=45e3,ku={},_u={};function wu(e,t,n){e.K=1,e.v=Hu(Fu(t)),e.s=n,e.U=!0,bu(e,null)}function bu(e,t){e.F=Date.now(),Tu(e),e.A=Fu(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),rl(n.h,"t",r),e.C=0,n=e.l.H,e.h=new gu,e.g=ic(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Hs(_o(e.Ia,e,e.g),e.O)),Gs(e.V,e.g,"readystatechange",e.gb),t=e.H?jo(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),tu(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var l=s[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function xu(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Eu(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Cu(e,n))==_u){4==t&&(e.o=4,ru(14),i=!1),Qs(e.j,e.m,null,"[Incomplete Response]");break}if(r==ku){e.o=4,ru(15),Qs(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Qs(e.j,e.m,r,null),Du(e,r)}xu(e)&&r!=_u&&r!=ku&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ru(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ql(t),t.L=!0,ru(11))):(Qs(e.j,e.m,n,"[Invalid Chunked Response]"),Ru(e),Nu(e))}function Cu(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?_u:(n=Number(t.substring(n,r)),isNaN(n)?ku:(r+=1)+n>t.length?_u:(t=t.substr(r,n),e.C=r+n,t))}function Tu(e){e.Y=Date.now()+e.P,Su(e,e.P)}function Su(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=au(_o(e.eb,e),t)}function Iu(e){e.B&&(ho.clearTimeout(e.B),e.B=null)}function Nu(e){0==e.l.G||e.I||Zl(e.l,e)}function Ru(e){Iu(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Bs(e.W),Ys(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Du(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||cl(n.i,e)))if(n.I=e.N,!e.J&&cl(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Jl(n),Bl(n)}$l(n),ru(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=au(_o(n.ab,n),6e3));if(1>=ll(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else tc(n,11)}else if((e.J||n.g==e)&&Jl(n),!No(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var l=e.g;if(l){var c=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=r.i;!h.g&&(Po(c,"spdy")||Po(c,"quic")||Po(c,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(hl(h,h.h),h.h=null))}if(r.D){var f=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,qu(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=rc(r,r.H?r.la:null,r.W),d.J){fl(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Iu(p),Tu(p)),r.g=d}else Yl(r);0<n.l.length&&Hl(n)}else"stop"!=a[0]&&"close"!=a[0]||tc(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?tc(n,7):Vl(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}tu(4)}catch(a){}}function Pu(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(po(e)||"string"===typeof e)To(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(po(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(po(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Au(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Au)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Ou(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Mu(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Mu(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Mu(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(so=mu.prototype).setTimeout=function(e){this.P=e},so.gb=function(e){e=e.target;var t=this.L;t&&3==Ml(e)?t.l():this.Ia(e)},so.Ia=function(e){try{if(e==this.g)e:{var t=Ml(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Wo||this.g&&(this.h.h||this.g.ga()||Ll(this.g)))){this.I||4!=t||7==n||tu(8==n||0>=r?3:2),Iu(this);var i=this.g.ba();this.N=i;t:if(xu(this)){var a=Ll(this.g);e="";var o=a.length,s=4==Ml(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ru(this),Nu(this);var u="";break t}this.h.i=new ho.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!No(l)){var h=l;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,ru(12),Ru(this),Nu(this);break e}Qs(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Du(this,i)}this.U?(Eu(this,t,u),Wo&&this.i&&3==t&&(Gs(this.V,this.W,"tick",this.fb),this.W.start())):(Qs(this.j,this.m,u,null),Du(this,u)),4==t&&Ru(this),this.i&&!this.I&&(4==t?Zl(this.l,this):(this.i=!1,Tu(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,ru(12)):(this.o=0,ru(13)),Ru(this),Nu(this)}}}catch(t){}},so.fb=function(){if(this.g){var e=Ml(this.g),t=this.g.ga();this.C<t.length&&(Iu(this),Eu(this,e,t),this.i&&4!=e&&Tu(this))}},so.cancel=function(){this.I=!0,Ru(this)},so.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(tu(3),ru(17)),Ru(this),this.o=2,Nu(this)):Su(this,this.Y-e)},(so=Au.prototype).R=function(){Ou(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},so.T=function(){return Ou(this),this.g.concat()},so.get=function(e,t){return Mu(this.h,e)?this.h[e]:t},so.set=function(e,t){Mu(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},so.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Lu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ju(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof ju){this.g=void 0!==t?t:e.g,Uu(this,e.j),this.s=e.s,Vu(this,e.i),Bu(this,e.m),this.l=e.l,t=e.h;var n=new Zu;n.i=t.i,t.g&&(n.g=new Au(t.g),n.h=t.h),zu(this,n),this.o=e.o}else e&&(n=String(e).match(Lu))?(this.g=!!t,Uu(this,n[1]||"",!0),this.s=Wu(n[2]||""),Vu(this,n[3]||"",!0),Bu(this,n[4]),this.l=Wu(n[5]||"",!0),zu(this,n[6]||"",!0),this.o=Wu(n[7]||"")):(this.g=!!t,this.h=new Zu(null,this.g))}function Fu(e){return new ju(e)}function Uu(e,t,n){e.j=n?Wu(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Vu(e,t,n){e.i=n?Wu(t,!0):t}function Bu(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function zu(e,t,n){t instanceof Zu?(e.h=t,function(e,t){t&&!e.j&&(el(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(tl(this,t),rl(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Ku(t,Xu)),e.h=new Zu(t,e.g))}function qu(e,t,n){e.h.set(t,n)}function Hu(e){return qu(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Wu(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ku(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Gu),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Gu(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ju.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ku(t,Yu,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ku(t,Yu,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ku(n,"/"==n.charAt(0)?Qu:$u,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ku(n,Ju)),e.join("")};var Yu=/[#\/\?@]/g,$u=/[#\?:]/g,Qu=/[#\?]/g,Xu=/[#\?@]/g,Ju=/#/g;function Zu(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function el(e){e.g||(e.g=new Au,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function tl(e,t){el(e),t=il(e,t),Mu(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Mu((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Ou(e)))}function nl(e,t){return el(e),t=il(e,t),Mu(e.g.h,t)}function rl(e,t,n){tl(e,t),0<n.length&&(e.i=null,e.g.set(il(e,t),Io(n)),e.h+=n.length)}function il(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(so=Zu.prototype).add=function(e,t){el(this),this.i=null,e=il(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},so.forEach=function(e,t){el(this),this.g.forEach((function(n,r){To(n,(function(n){e.call(t,n,r,this)}),this)}),this)},so.T=function(){el(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},so.R=function(e){el(this);var t=[];if("string"===typeof e)nl(this,e)&&(t=So(t,this.g.get(il(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=So(t,e[n])}return t},so.set=function(e,t){return el(this),this.i=null,nl(this,e=il(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},so.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},so.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var al=ne((function e(t,n){ee(this,e),this.h=t,this.g=n}));function ol(e){this.l=e||sl,ho.PerformanceNavigationTiming?e=0<(e=ho.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(ho.g&&ho.g.Ea&&ho.g.Ea()&&ho.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var sl=10;function ul(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ll(e){return e.h?1:e.g?e.g.size:0}function cl(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function hl(e,t){e.g?e.g.add(t):e.h=t}function fl(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function dl(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=J(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Io(e.i)}function pl(){}function vl(){this.g=new pl}function ml(e,t,n){var r=n||"";try{Pu(e,(function(e,n){var i=e;vo(e)&&(i=Ns(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function gl(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(Kx){}}function yl(e){this.l=e.$b||null,this.j=e.ib||!1}function kl(e,t){Ts.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=_l,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ol.prototype.cancel=function(){if(this.i=dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=J(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},pl.prototype.stringify=function(e){return ho.JSON.stringify(e,void 0)},pl.prototype.parse=function(e){return ho.JSON.parse(e,void 0)},bo(yl,uu),yl.prototype.g=function(){return new kl(this.l,this.j)},yl.prototype.i=function(e){return function(){return e}}({}),bo(kl,Ts);var _l=0;function wl(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function bl(e){e.readyState=4,e.l=null,e.j=null,e.A=null,xl(e)}function xl(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(so=kl.prototype).open=function(e,t){if(this.readyState!=_l)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,xl(this)},so.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||ho).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},so.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,bl(this)),this.readyState=_l},so.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,xl(this)),this.g&&(this.readyState=3,xl(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof ho.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wl(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},so.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?bl(this):xl(this),3==this.readyState&&wl(this)}},so.Ua=function(e){this.g&&(this.response=this.responseText=e,bl(this))},so.Ta=function(e){this.g&&(this.response=e,bl(this))},so.ha=function(){this.g&&bl(this)},so.setRequestHeader=function(e,t){this.v.append(e,t)},so.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},so.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(kl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var El=ho.JSON.parse;function Cl(e){Ts.call(this),this.headers=new Au,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Tl,this.K=this.L=!1}bo(Cl,Ts);var Tl="",Sl=/^https?$/i,Il=["POST","PUT"];function Nl(e){return"content-type"==e.toLowerCase()}function Rl(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Dl(e),Al(e)}function Dl(e){e.D||(e.D=!0,Ss(e,"complete"),Ss(e,"error"))}function Pl(e){if(e.h&&"undefined"!=typeof co&&(!e.C[1]||4!=Ml(e)||2!=e.ba()))if(e.v&&4==Ml(e))zs(e.Fa,0,e);else if(Ss(e,"readystatechange"),4==Ml(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Lu)[1]||null;if(!a&&ho.self&&ho.self.location){var o=ho.self.location.protocol;a=o.substr(0,o.length-1)}i=!Sl.test(a?a.toLowerCase():"")}t=i}if(t)Ss(e,"complete"),Ss(e,"success");else{e.m=6;try{var s=2<Ml(e)?e.g.statusText:""}catch(qx){s=""}e.j=s+" ["+e.ba()+"]",Dl(e)}}finally{Al(e)}}}function Al(e,t){if(e.g){Ol(e);var n=e.g,r=e.C[0]?fo:null;e.g=null,e.C=null,t||Ss(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Ol(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(ho.clearTimeout(e.A),e.A=null)}function Ml(e){return e.g?e.g.readyState:0}function Ll(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Tl:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Qx){return null}}function jl(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Lo(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):qu(e,t,n))}function Fl(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ul(e){this.za=0,this.l=[],this.h=new $s,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Fl("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Fl("baseRetryDelayMs",5e3,e),this.$a=Fl("retryDelaySeedMs",1e4,e),this.Ya=Fl("forwardChannelMaxRetries",2,e),this.ra=Fl("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new ol(e&&e.concurrentRequestLimit),this.Ca=new vl,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Vl(e){if(zl(e),3==e.G){var t=e.V++,n=Fu(e.F);qu(n,"SID",e.J),qu(n,"RID",t),qu(n,"TYPE","terminate"),Kl(e,n),(t=new mu(e,e.h,t,void 0)).K=2,t.v=Hu(Fu(n)),n=!1,ho.navigator&&ho.navigator.sendBeacon&&(n=ho.navigator.sendBeacon(t.v.toString(),"")),!n&&ho.Image&&((new Image).src=t.v,n=!0),n||(t.g=ic(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Tu(t)}nc(e)}function Bl(e){e.g&&(Ql(e),e.g.cancel(),e.g=null)}function zl(e){Bl(e),e.u&&(ho.clearTimeout(e.u),e.u=null),Jl(e),e.i.cancel(),e.m&&("number"===typeof e.m&&ho.clearTimeout(e.m),e.m=null)}function ql(e,t){e.l.push(new al(e.Za++,t)),3==e.G&&Hl(e)}function Hl(e){ul(e.i)||e.m||(e.m=!0,Ls(e.Ha,e),e.C=0)}function Wl(e,t){var n;n=t?t.m:e.V++;var r=Fu(e.F);qu(r,"SID",e.J),qu(r,"RID",n),qu(r,"AID",e.U),Kl(e,r),e.o&&e.s&&jl(r,e.o,e.s),n=new mu(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Gl(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),hl(e.i,n),wu(n,r,t)}function Kl(e,t){e.j&&Pu({},(function(e,n){qu(t,n,e)}))}function Gl(e,t,n){n=Math.min(e.l.length,n);var r=e.j?_o(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var l=i[u].h,c=i[u].g;if(0>(l-=a))a=Math.max(0,i[u].h-100),s=!1;else try{ml(c,o,"req"+l+"_")}catch(Dc){r&&r(c)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Yl(e){e.g||e.u||(e.Y=1,Ls(e.Ga,e),e.A=0)}function $l(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=au(_o(e.Ga,e),ec(e,e.A)),e.A++,!0)}function Ql(e){null!=e.B&&(ho.clearTimeout(e.B),e.B=null)}function Xl(e){e.g=new mu(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Fu(e.oa);qu(t,"RID","rpc"),qu(t,"SID",e.J),qu(t,"CI",e.N?"0":"1"),qu(t,"AID",e.U),Kl(e,t),qu(t,"TYPE","xmlhttp"),e.o&&e.s&&jl(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Hu(Fu(t)),n.s=null,n.U=!0,bu(n,e)}function Jl(e){null!=e.v&&(ho.clearTimeout(e.v),e.v=null)}function Zl(e,t){var n=null;if(e.g==t){Jl(e),Ql(e),e.g=null;var r=2}else{if(!cl(e.i,t))return;n=t.D,fl(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Ss(r=Zs(),new iu(r,n,t,i)),Hl(e)}else Yl(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(ll(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=au(_o(e.Ha,e,t),ec(e,e.C)),e.C++,!0))}(e,t)||2==r&&$l(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:tc(e,5);break;case 4:tc(e,10);break;case 3:tc(e,6);break;default:tc(e,2)}}function ec(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function tc(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=_o(e.jb,e);n||(n=new ju("//www.google.com/images/cleardot.gif"),ho.location&&"http"==ho.location.protocol||Uu(n,"https"),Hu(n)),function(e,t){var n=new $s;if(ho.Image){var r=new Image;r.onload=wo(gl,n,r,"TestLoadImage: loaded",!0,t),r.onerror=wo(gl,n,r,"TestLoadImage: error",!1,t),r.onabort=wo(gl,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=wo(gl,n,r,"TestLoadImage: timeout",!1,t),ho.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ru(2);e.G=0,e.j&&e.j.va(t),nc(e),zl(e)}function nc(e){e.G=0,e.I=-1,e.j&&(0==dl(e.i).length&&0==e.l.length||(e.i.i.length=0,Io(e.l),e.l.length=0),e.j.ua())}function rc(e,t,n){var r=function(e){return e instanceof ju?Fu(e):new ju(e,void 0)}(n);if(""!=r.i)t&&Vu(r,t+"."+r.i),Bu(r,r.m);else{var i=ho.location;r=function(e,t,n,r){var i=new ju(null,void 0);return e&&Uu(i,e),t&&Vu(i,t),n&&Bu(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Lo(e.aa,(function(e,t){qu(r,t,e)})),t=e.D,n=e.sa,t&&n&&qu(r,t,n),qu(r,"VER",e.ma),Kl(e,r),r}function ic(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Cl(new yl({ib:!0})):new Cl(e.qa)).L=e.H,t}function ac(){}function oc(){if(qo&&!(10<=Number(ns)))throw Error("Environmental error: no available transport.")}function sc(e,t){Ts.call(this),this.g=new Ul(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!No(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!No(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new cc(this)}function uc(e){du.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function lc(){pu.call(this),this.status=1}function cc(e){this.g=e}(so=Cl.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():hu.g(),this.C=this.u?lu(this.u):lu(hu),this.g.onreadystatechange=_o(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(Kx){return void Rl(this,Kx)}e=n||"";var i=new Au(this.headers);r&&Pu(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Nl,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=ho.FormData&&e instanceof ho.FormData,!(0<=Co(Il,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ol(this),0<this.B&&((this.K=function(e){return qo&&es()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_o(this.pa,this)):this.A=zs(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(Kx){Rl(this,Kx)}},so.pa=function(){"undefined"!=typeof co&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ss(this,"timeout"),this.abort(8))},so.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ss(this,"complete"),Ss(this,"abort"),Al(this))},so.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Al(this,!0)),Cl.Z.M.call(this)},so.Fa=function(){this.s||(this.F||this.v||this.l?Pl(this):this.cb())},so.cb=function(){Pl(this)},so.ba=function(){try{return 2<Ml(this)?this.g.status:-1}catch(Lx){return-1}},so.ga=function(){try{return this.g?this.g.responseText:""}catch(Lx){return""}},so.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),El(t)}},so.Da=function(){return this.m},so.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(so=Ul.prototype).ma=8,so.G=1,so.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(Qx){}},so.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new mu(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Uo(n=jo(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Gl(this,t,r),qu(i=Fu(this.F),"RID",e),qu(i,"CVER",22),this.D&&qu(i,"X-HTTP-Session-Id",this.D),Kl(this,i),this.o&&n&&jl(i,this.o,n),hl(this.i,t),this.Ra&&qu(i,"TYPE","init"),this.ja?(qu(i,"$req",r),qu(i,"SID","null"),t.$=!0,wu(t,i,null)):wu(t,i,r),this.G=2}}else 3==this.G&&(e?Wl(this,e):0==this.l.length||ul(this.i)||Wl(this))},so.Ga=function(){if(this.u=null,Xl(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=au(_o(this.bb,this),e)}},so.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ru(10),Bl(this),Xl(this))},so.ab=function(){null!=this.v&&(this.v=null,Bl(this),$l(this),ru(19))},so.jb=function(e){e?(this.h.info("Successfully pinged google.com"),ru(2)):(this.h.info("Failed to ping google.com"),ru(1))},(so=ac.prototype).xa=function(){},so.wa=function(){},so.va=function(){},so.ua=function(){},so.Oa=function(){},oc.prototype.g=function(e,t){return new sc(e,t)},bo(sc,Ts),sc.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Ls(_o(e.hb,e,t))),ru(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=rc(e,null,e.W),Hl(e)},sc.prototype.close=function(){Vl(this.g)},sc.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,ql(this.g,t)}else this.v?((t={}).__data__=Ns(e),ql(this.g,t)):ql(this.g,e)},sc.prototype.M=function(){this.g.j=null,delete this.j,Vl(this.g),delete this.g,sc.Z.M.call(this)},bo(uc,du),bo(lc,pu),bo(cc,ac),cc.prototype.xa=function(){Ss(this.g,"a")},cc.prototype.wa=function(e){Ss(this.g,new uc(e))},cc.prototype.va=function(e){Ss(this.g,new lc(e))},cc.prototype.ua=function(){Ss(this.g,"b")},oc.prototype.createWebChannel=oc.prototype.g,sc.prototype.send=sc.prototype.u,sc.prototype.open=sc.prototype.m,sc.prototype.close=sc.prototype.close,ou.NO_ERROR=0,ou.TIMEOUT=8,ou.HTTP_ERROR=6,su.COMPLETE="complete",cu.EventType=fu,fu.OPEN="a",fu.CLOSE="b",fu.ERROR="c",fu.MESSAGE="d",Ts.prototype.listen=Ts.prototype.N,Cl.prototype.listenOnce=Cl.prototype.O,Cl.prototype.getLastError=Cl.prototype.La,Cl.prototype.getLastErrorCode=Cl.prototype.Da,Cl.prototype.getStatus=Cl.prototype.ba,Cl.prototype.getResponseJson=Cl.prototype.Qa,Cl.prototype.getResponseText=Cl.prototype.ga,Cl.prototype.send=Cl.prototype.ea;var hc=lo.createWebChannelTransport=function(){return new oc},fc=lo.getStatEventTarget=function(){return Zs()},dc=lo.ErrorCode=ou,pc=lo.EventType=su,vc=lo.Event=Xs,mc=lo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},gc=lo.FetchXmlHttpFactory=yl,yc=lo.WebChannel=cu,kc=lo.XhrIo=Cl,_c="@firebase/firestore",wc=function(){function e(t){ee(this,e),this.uid=t}return ne(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();wc.UNAUTHENTICATED=new wc(null),wc.GOOGLE_CREDENTIALS=new wc("google-credentials-uid"),wc.FIRST_PARTY=new wc("first-party-uid"),wc.MOCK_USER=new wc("mock-user");var bc="9.6.10",xc=new yt("@firebase/firestore");function Ec(){return xc.logLevel}function Cc(e){if(xc.logLevel<=lt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ic);xc.debug.apply(xc,["Firestore (".concat(bc,"): ").concat(e)].concat(X(i)))}}function Tc(e){if(xc.logLevel<=lt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ic);xc.error.apply(xc,["Firestore (".concat(bc,"): ").concat(e)].concat(X(i)))}}function Sc(e){if(xc.logLevel<=lt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ic);xc.warn.apply(xc,["Firestore (".concat(bc,"): ").concat(e)].concat(X(i)))}}function Ic(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Nc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(bc,") INTERNAL ASSERTION FAILED: ")+e;throw Tc(t),new Error(t)}function Rc(e,t){e||Nc()}function Dc(e,t){return e}var Pc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ac=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return ee(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return ne(n)}(Pe),Oc=ne((function e(){var t=this;ee(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Mc=ne((function e(t,n){ee(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Lc=function(){function e(){ee(this,e)}return ne(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(wc.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),jc=function(){function e(t){ee(this,e),this.t=t,this.currentUser=wc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return ne(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Oc;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Oc,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Y(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Cc("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Cc("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Oc)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Cc("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Rc("string"==typeof n.accessToken),new Mc(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Rc(null===e||"string"==typeof e),new wc(e)}}]),e}(),Fc=ne((function e(t,n,r){ee(this,e),this.type="FirstParty",this.user=wc.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Uc=function(){function e(t,n,r){ee(this,e),this.h=t,this.l=n,this.m=r}return ne(e,[{key:"getToken",value:function(){return Promise.resolve(new Fc(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(wc.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Vc=ne((function e(t){ee(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Bc=function(){function e(t){ee(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return ne(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Cc("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Cc("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Cc("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):Cc("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Rc("string"==typeof t.token),e.p=t.token,new Vc(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),zc=function(){function e(t,n){var r=this;ee(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return ne(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function qc(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}zc.A=-1;var Hc=function(){function e(){ee(this,e)}return ne(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=qc(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Wc(e,t){return e<t?-1:e>t?1:0}function Kc(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var Gc=function(){function e(t,n){if(ee(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Ac(Pc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ac(Pc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Ac(Pc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ac(Pc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return ne(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Wc(this.nanoseconds,e.nanoseconds):Wc(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Yc=function(){function e(t){ee(this,e),this.timestamp=t}return ne(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Gc(0,0))}},{key:"max",value:function(){return new e(new Gc(253402300799,999999999))}}]),e}();function $c(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Qc(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Xc(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Jc=function(){function e(t,n,r){ee(this,e),void 0===n?n=0:n>t.length&&Nc(),void 0===r?r=t.length-n:r>t.length-n&&Nc(),this.segments=t,this.offset=n,this.len=r}return ne(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Zc=function(e){ae(n,e);var t=ce(n);function n(){return ee(this,n),t.apply(this,arguments)}return ne(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new Ac(Pc.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,X(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Jc),eh=/^[_a-zA-Z][_a-zA-Z0-9]*$/,th=function(e){ae(n,e);var t=ce(n);function n(){return ee(this,n),t.apply(this,arguments)}return ne(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return eh.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Ac(Pc.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Ac(Pc.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ac(Pc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Ac(Pc.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Jc),nh=function(){function e(t){ee(this,e),this.fields=t,t.sort(th.comparator)}return ne(e,[{key:"covers",value:function(e){var t,n=J(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Kc(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var rh=function(e){function t(e){ee(this,t),this.binaryString=e}return ne(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Wc(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();rh.EMPTY_BYTE_STRING=new rh("");var ih=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ah(e){if(Rc(!!e),"string"==typeof e){var t=0,n=ih.exec(e);if(Rc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:oh(e.seconds),nanos:oh(e.nanos)}}function oh(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function sh(e){return"string"==typeof e?rh.fromBase64String(e):rh.fromUint8Array(e)}function uh(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function lh(e){var t=e.mapValue.fields.__previous_value__;return uh(t)?lh(t):t}function ch(e){var t=ah(e.mapValue.fields.__local_write_time__.timestampValue);return new Gc(t.seconds,t.nanos)}var hh=ne((function e(t,n,r,i,a,o,s,u){ee(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),fh=function(){function e(t,n){ee(this,e),this.projectId=t,this.database=n||"(default)"}return ne(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function dh(e){return null==e}function ph(e){return 0===e&&1/e==-1/0}function vh(e){return"number"==typeof e&&Number.isInteger(e)&&!ph(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var mh=function(){function e(t){ee(this,e),this.path=t}return ne(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Zc.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Zc.fromString(t))}},{key:"fromName",value:function(t){return new e(Zc.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Zc.emptyPath())}},{key:"comparator",value:function(e,t){return Zc.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Zc(t.slice()))}}]),e}();function gh(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?uh(e)?4:Dh(e)?9:10:Nc()}function yh(e,t){if(e===t)return!0;var n=gh(e);if(n!==gh(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ch(e).isEqual(ch(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=ah(e.timestampValue),r=ah(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return sh(e.bytesValue).isEqual(sh(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return oh(e.geoPointValue.latitude)===oh(t.geoPointValue.latitude)&&oh(e.geoPointValue.longitude)===oh(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return oh(e.integerValue)===oh(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=oh(e.doubleValue),r=oh(t.doubleValue);return n===r?ph(n)===ph(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Kc(e.arrayValue.values||[],t.arrayValue.values||[],yh);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if($c(n)!==$c(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!yh(n[i],r[i])))return!1;return!0}(e,t);default:return Nc()}}function kh(e,t){return void 0!==(e.values||[]).find((function(e){return yh(e,t)}))}function _h(e,t){if(e===t)return 0;var n=gh(e),r=gh(t);if(n!==r)return Wc(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Wc(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=oh(e.integerValue||e.doubleValue),r=oh(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return wh(e.timestampValue,t.timestampValue);case 4:return wh(ch(e),ch(t));case 5:return Wc(e.stringValue,t.stringValue);case 6:return function(e,t){var n=sh(e),r=sh(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Wc(n[i],r[i]);if(0!==a)return a}return Wc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Wc(oh(e.latitude),oh(t.latitude));return 0!==n?n:Wc(oh(e.longitude),oh(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=_h(n[i],r[i]);if(a)return a}return Wc(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Wc(r[o],a[o]);if(0!==s)return s;var u=_h(n[r[o]],i[a[o]]);if(0!==u)return u}return Wc(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Nc()}}function wh(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Wc(e,t);var n=ah(e),r=ah(t),i=Wc(n.seconds,r.seconds);return 0!==i?i:Wc(n.nanos,r.nanos)}function bh(e){return xh(e)}function xh(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=ah(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?sh(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,mh.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=J(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=xh(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=J(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(xh(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Nc();var t,n}function Eh(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ch(e){return!!e&&"integerValue"in e}function Th(e){return!!e&&"arrayValue"in e}function Sh(e){return!!e&&"nullValue"in e}function Ih(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Nh(e){return!!e&&"mapValue"in e}function Rh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Qc(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Rh(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Rh(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Dh(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var Ph=function(){function e(t){ee(this,e),this.value=t}return ne(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Nh(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rh(t)}},{key:"setAll",value:function(e){var t=this,n=th.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Rh(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Nh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return yh(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Nh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Qc(t,(function(t,n){return e[t]=n}));var r,i=J(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Rh(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Ah(e){var t=[];return Qc(e.fields,(function(e,n){var r=new th([e]);if(Nh(n)){var i=Ah(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=J(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new nh(t)}var Oh=function(){function e(t,n,r,i,a,o){ee(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return ne(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Ph.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Ph.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Yc.min(),Yc.min(),Ph.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Yc.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Yc.min(),Ph.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Yc.min(),Ph.empty(),2)}}]),e}(),Mh=ne((function e(t,n,r,i){ee(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));Mh.UNKNOWN_ID=-1;function Lh(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Yc.fromTimestamp(1e9===r?new Gc(n+1,0):new Gc(n,r));return new Fh(i,mh.empty(),t)}function jh(e){return new Fh(e.readTime,e.key,-1)}var Fh=function(){function e(t,n,r){ee(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return ne(e,null,[{key:"min",value:function(){return new e(Yc.min(),mh.empty(),-1)}},{key:"max",value:function(){return new e(Yc.max(),mh.empty(),-1)}}]),e}();function Uh(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=mh.comparator(e.documentKey,t.documentKey))?n:Wc(e.largestBatchId,t.largestBatchId)}var Vh=ne((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;ee(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.P=null}));function Bh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Vh(e,t,n,r,i,a,o)}function zh(e){var t=Dc(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+bh(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),dh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return bh(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return bh(e)})).join(",")),t.P=n}return t.P}function qh(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!nf(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!yh(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!af(e.startAt,t.startAt)&&af(e.endAt,t.endAt)}function Hh(e){return mh.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Wh=function(e){ae(n,e);var t=ce(n);function n(e,r,i){var a;return ee(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return ne(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(_h(t,this.value)):null!==t&&gh(this.value)===gh(t)&&this.v(_h(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Nc()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Kh(e,t,r):"array-contains"===t?new Qh(e,r):"in"===t?new Xh(e,r):"not-in"===t?new Jh(e,r):"array-contains-any"===t?new Zh(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new Gh(e,n):new Yh(e,n)}}]),n}(function(){return ne((function e(){ee(this,e)}))}()),Kh=function(e){ae(n,e);var t=ce(n);function n(e,r,i){var a;return ee(this,n),(a=t.call(this,e,r,i)).key=mh.fromName(i.referenceValue),a}return ne(n,[{key:"matches",value:function(e){var t=mh.comparator(e.key,this.key);return this.v(t)}}]),n}(Wh),Gh=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return ee(this,n),(i=t.call(this,e,"in",r)).keys=$h("in",r),i}return ne(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Wh),Yh=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return ee(this,n),(i=t.call(this,e,"not-in",r)).keys=$h("not-in",r),i}return ne(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Wh);function $h(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return mh.fromName(e.referenceValue)}))}var Qh=function(e){ae(n,e);var t=ce(n);function n(e,r){return ee(this,n),t.call(this,e,"array-contains",r)}return ne(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Th(t)&&kh(t.arrayValue,this.value)}}]),n}(Wh),Xh=function(e){ae(n,e);var t=ce(n);function n(e,r){return ee(this,n),t.call(this,e,"in",r)}return ne(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&kh(this.value.arrayValue,t)}}]),n}(Wh),Jh=function(e){ae(n,e);var t=ce(n);function n(e,r){return ee(this,n),t.call(this,e,"not-in",r)}return ne(n,[{key:"matches",value:function(e){if(kh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!kh(this.value.arrayValue,t)}}]),n}(Wh),Zh=function(e){ae(n,e);var t=ce(n);function n(e,r){return ee(this,n),t.call(this,e,"array-contains-any",r)}return ne(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Th(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return kh(t.value.arrayValue,e)}))}}]),n}(Wh),ef=ne((function e(t,n){ee(this,e),this.position=t,this.inclusive=n})),tf=ne((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";ee(this,e),this.field=t,this.dir=n}));function nf(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function rf(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?mh.comparator(mh.fromName(o.referenceValue),n.key):_h(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function af(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!yh(e.position[n],t.position[n]))return!1;return!0}var of=ne((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;ee(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.D=null,this.C=null,this.startAt,this.endAt}));function sf(e,t,n,r,i,a,o,s){return new of(e,t,n,r,i,a,o,s)}function uf(e){return new of(e)}function lf(e){return!dh(e.limit)&&"F"===e.limitType}function cf(e){return!dh(e.limit)&&"L"===e.limitType}function hf(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ff(e){var t,n=J(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function df(e){return null!==e.collectionGroup}function pf(e){var t=Dc(e);if(null===t.D){t.D=[];var n=ff(t),r=hf(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new tf(n)),t.D.push(new tf(th.keyField(),"asc"));else{var i,a=!1,o=J(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.D.push(s),s.field.isKeyField()&&(a=!0)}}catch(l){o.e(l)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new tf(th.keyField(),u))}}}return t.D}function vf(e){var t=Dc(e);if(!t.C)if("F"===t.limitType)t.C=Bh(t.path,t.collectionGroup,pf(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=J(pf(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new tf(a.field,o))}}catch(l){i.e(l)}finally{i.f()}var s=t.endAt?new ef(t.endAt.position,!t.endAt.inclusive):null,u=t.startAt?new ef(t.startAt.position,!t.startAt.inclusive):null;t.C=Bh(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.C}function mf(e,t,n){return new of(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function gf(e,t){return qh(vf(e),vf(t))&&e.limitType===t.limitType}function yf(e){return"".concat(zh(vf(e)),"|lt:").concat(e.limitType)}function kf(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(bh(t.value));var t})).join(", "),"]")),dh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return bh(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return bh(e)})).join(",")),"Target(".concat(t,")")}(vf(e)),"; limitType=").concat(e.limitType,")")}function _f(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):mh.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=J(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=J(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=rf(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,pf(e),t))&&!(e.endAt&&!function(e,t,n){var r=rf(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,pf(e),t))}(e,t)}function wf(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function bf(e){return function(t,n){var r,i=!1,a=J(pf(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=xf(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function xf(e,t,n){var r=e.field.isKeyField()?mh.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?_h(r,i):Nc()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Nc()}}function Ef(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ph(t)?"-0":t}}function Cf(e){return{integerValue:""+e}}function Tf(e,t){return vh(t)?Cf(t):Ef(e,t)}var Sf=ne((function e(){ee(this,e),this._=void 0}));function If(e,t,n){return e instanceof Df?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Pf?Af(e,t):e instanceof Of?Mf(e,t):function(e,t){var n=Rf(e,t),r=jf(n)+jf(e.k);return Ch(n)&&Ch(e.k)?Cf(r):Ef(e.M,r)}(e,t)}function Nf(e,t,n){return e instanceof Pf?Af(e,t):e instanceof Of?Mf(e,t):n}function Rf(e,t){return e instanceof Lf?Ch(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Df=function(e){ae(n,e);var t=ce(n);function n(){return ee(this,n),t.apply(this,arguments)}return ne(n)}(Sf),Pf=function(e){ae(n,e);var t=ce(n);function n(e){var r;return ee(this,n),(r=t.call(this)).elements=e,r}return ne(n)}(Sf);function Af(e,t){var n,r=Ff(t),i=J(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return yh(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Of=function(e){ae(n,e);var t=ce(n);function n(e){var r;return ee(this,n),(r=t.call(this)).elements=e,r}return ne(n)}(Sf);function Mf(e,t){var n,r=Ff(t),i=J(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!yh(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Lf=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return ee(this,n),(i=t.call(this)).M=e,i.k=r,i}return ne(n)}(Sf);function jf(e){return oh(e.integerValue||e.doubleValue)}function Ff(e){return Th(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Uf=ne((function e(t,n){ee(this,e),this.version=t,this.transformResults=n})),Vf=function(){function e(t,n){ee(this,e),this.updateTime=t,this.exists=n}return ne(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Bf(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var zf=ne((function e(){ee(this,e)}));function qf(e,t,n){e instanceof Yf?function(e,t,n){var r=e.value.clone(),i=Xf(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof $f?function(e,t,n){if(Bf(e.precondition,t)){var r=Xf(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Qf(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Hf(e,t,n){e instanceof Yf?function(e,t,n){if(Bf(e.precondition,t)){var r=e.value.clone(),i=Jf(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Gf(t),r).setHasLocalMutations()}}(e,t,n):e instanceof $f?function(e,t,n){if(Bf(e.precondition,t)){var r=Jf(e.fieldTransforms,n,t),i=t.data;i.setAll(Qf(e)),i.setAll(r),t.convertToFoundDocument(Gf(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Bf(e.precondition,t)&&t.convertToNoDocument(Yc.min())}(e,t)}function Wf(e,t){var n,r=null,i=J(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=Rf(a.transform,o||null);null!=s&&(null==r&&(r=Ph.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function Kf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Kc(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Pf&&t instanceof Pf||e instanceof Of&&t instanceof Of?Kc(e.elements,t.elements,yh):e instanceof Lf&&t instanceof Lf?yh(e.k,t.k):e instanceof Df&&t instanceof Df}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Gf(e){return e.isFoundDocument()?e.version:Yc.min()}var Yf=function(e){ae(n,e);var t=ce(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return ee(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return ne(n)}(zf),$f=function(e){ae(n,e);var t=ce(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return ee(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return ne(n)}(zf);function Qf(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Xf(e,t,n){var r=new Map;Rc(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Nf(o,s,n[i]))}return r}function Jf(e,t,n){var r,i=new Map,a=J(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,If(s,u,t))}}catch(l){a.e(l)}finally{a.f()}return i}var Zf,ed,td=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return ee(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return ne(n)}(zf),nd=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return ee(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return ne(n)}(zf),rd=ne((function e(t){ee(this,e),this.count=t}));function id(e){switch(e){default:return Nc();case Pc.CANCELLED:case Pc.UNKNOWN:case Pc.DEADLINE_EXCEEDED:case Pc.RESOURCE_EXHAUSTED:case Pc.INTERNAL:case Pc.UNAVAILABLE:case Pc.UNAUTHENTICATED:return!1;case Pc.INVALID_ARGUMENT:case Pc.NOT_FOUND:case Pc.ALREADY_EXISTS:case Pc.PERMISSION_DENIED:case Pc.FAILED_PRECONDITION:case Pc.ABORTED:case Pc.OUT_OF_RANGE:case Pc.UNIMPLEMENTED:case Pc.DATA_LOSS:return!0}}function ad(e){if(void 0===e)return Tc("GRPC error has no .code"),Pc.UNKNOWN;switch(e){case Zf.OK:return Pc.OK;case Zf.CANCELLED:return Pc.CANCELLED;case Zf.UNKNOWN:return Pc.UNKNOWN;case Zf.DEADLINE_EXCEEDED:return Pc.DEADLINE_EXCEEDED;case Zf.RESOURCE_EXHAUSTED:return Pc.RESOURCE_EXHAUSTED;case Zf.INTERNAL:return Pc.INTERNAL;case Zf.UNAVAILABLE:return Pc.UNAVAILABLE;case Zf.UNAUTHENTICATED:return Pc.UNAUTHENTICATED;case Zf.INVALID_ARGUMENT:return Pc.INVALID_ARGUMENT;case Zf.NOT_FOUND:return Pc.NOT_FOUND;case Zf.ALREADY_EXISTS:return Pc.ALREADY_EXISTS;case Zf.PERMISSION_DENIED:return Pc.PERMISSION_DENIED;case Zf.FAILED_PRECONDITION:return Pc.FAILED_PRECONDITION;case Zf.ABORTED:return Pc.ABORTED;case Zf.OUT_OF_RANGE:return Pc.OUT_OF_RANGE;case Zf.UNIMPLEMENTED:return Pc.UNIMPLEMENTED;case Zf.DATA_LOSS:return Pc.DATA_LOSS;default:return Nc()}}(ed=Zf||(Zf={}))[ed.OK=0]="OK",ed[ed.CANCELLED=1]="CANCELLED",ed[ed.UNKNOWN=2]="UNKNOWN",ed[ed.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ed[ed.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ed[ed.NOT_FOUND=5]="NOT_FOUND",ed[ed.ALREADY_EXISTS=6]="ALREADY_EXISTS",ed[ed.PERMISSION_DENIED=7]="PERMISSION_DENIED",ed[ed.UNAUTHENTICATED=16]="UNAUTHENTICATED",ed[ed.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ed[ed.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ed[ed.ABORTED=10]="ABORTED",ed[ed.OUT_OF_RANGE=11]="OUT_OF_RANGE",ed[ed.UNIMPLEMENTED=12]="UNIMPLEMENTED",ed[ed.INTERNAL=13]="INTERNAL",ed[ed.UNAVAILABLE=14]="UNAVAILABLE",ed[ed.DATA_LOSS=15]="DATA_LOSS";var od=function(){function e(t,n){ee(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return ne(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=J(n);try{for(i.s();!(r=i.n()).done;){var a=o(r.value,2),s=a[0],u=a[1];if(this.equalsFn(s,e))return u}}catch(l){i.e(l)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Qc(this.inner,(function(t,n){var r,i=J(n);try{for(i.s();!(r=i.n()).done;){var a=o(r.value,2),s=a[0],u=a[1];e(s,u)}}catch(l){i.e(l)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Xc(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),sd=function(){function e(t,n){ee(this,e),this.comparator=t,this.root=n||ld.EMPTY}return ne(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ld.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ld.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new ud(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new ud(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new ud(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new ud(this.root,e,this.comparator,!0)}}]),e}(),ud=function(){function e(t,n,r,i){ee(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return ne(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),ld=function(){function e(t,n,r,i,a){ee(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return ne(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Nc();if(this.right.isRed())throw Nc();var e=this.left.check();if(e!==this.right.check())throw Nc();return e+(this.isRed()?0:1)}}]),e}();ld.EMPTY=null,ld.RED=!0,ld.BLACK=!1,ld.EMPTY=new(function(){function e(){ee(this,e),this.size=0}return ne(e,[{key:"key",get:function(){throw Nc()}},{key:"value",get:function(){throw Nc()}},{key:"color",get:function(){throw Nc()}},{key:"left",get:function(){throw Nc()}},{key:"right",get:function(){throw Nc()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new ld(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var cd=function(){function e(t){ee(this,e),this.comparator=t,this.data=new sd(this.comparator)}return ne(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new hd(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new hd(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),hd=function(){function e(t){ee(this,e),this.iter=t}return ne(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var fd=new sd(mh.comparator);function dd(){return fd}var pd=new sd(mh.comparator);function vd(){return pd}function md(){return new od((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var gd=new sd(mh.comparator),yd=new cd(mh.comparator);function kd(){for(var e=yd,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var _d=new cd(Wc);function wd(){return _d}var bd=function(){function e(t,n,r,i,a){ee(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return ne(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,xd.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Yc.min(),r,wd(),dd(),kd())}}]),e}(),xd=function(){function e(t,n,r,i,a){ee(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return ne(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(rh.EMPTY_BYTE_STRING,n,kd(),kd(),kd())}}]),e}(),Ed=ne((function e(t,n,r,i){ee(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),Cd=ne((function e(t,n){ee(this,e),this.targetId=t,this.$=n})),Td=ne((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rh.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;ee(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Sd=function(){function e(){ee(this,e),this.B=0,this.L=Rd(),this.U=rh.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}return ne(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"K",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.G}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}},{key:"H",value:function(){var e=kd(),t=kd(),n=kd();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Nc()}})),new xd(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.G=!1,this.L=Rd()}},{key:"Y",value:function(e,t){this.G=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.G=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.G=!0,this.q=!0}}]),e}(),Id=function(){function e(t){ee(this,e),this.nt=t,this.st=new Map,this.it=dd(),this.rt=Nd(),this.ot=new cd(Wc)}return ne(e,[{key:"ut",value:function(e){var t,n=J(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(s){n.e(s)}finally{n.f()}var i,a=J(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(s){a.e(s)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:Nc()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(Hh(i))if(0===n){var a=new mh(i.path);this.ct(t,a,Oh.newNoDocument(a,Yc.min()))}else Rc(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Hh(a.target)){var o=new mh(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,Oh.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=kd();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new bd(e,n,this.ot,this.it,r);return this.it=dd(),this.rt=Nd(),this.ot=new cd(Wc),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new Sd,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new cd(Wc),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||Cc("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new Sd),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Nd(){return new sd(mh.comparator)}function Rd(){return new sd(mh.comparator)}var Dd={asc:"ASCENDING",desc:"DESCENDING"},Pd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ad=ne((function e(t,n){ee(this,e),this.databaseId=t,this.N=n}));function Od(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Md(e,t){return e.N?t.toBase64():t.toUint8Array()}function Ld(e,t){return Od(e,t.toTimestamp())}function jd(e){return Rc(!!e),Yc.fromTimestamp(function(e){var t=ah(e);return new Gc(t.seconds,t.nanos)}(e))}function Fd(e,t){return function(e){return new Zc(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Ud(e){var t=Zc.fromString(e);return Rc(ap(t)),t}function Vd(e,t){return Fd(e.databaseId,t.path)}function Bd(e,t){var n=Ud(t);if(n.get(1)!==e.databaseId.projectId)throw new Ac(Pc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ac(Pc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new mh(Wd(n))}function zd(e,t){return Fd(e.databaseId,t)}function qd(e){var t=Ud(e);return 4===t.length?Zc.emptyPath():Wd(t)}function Hd(e){return new Zc(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Wd(e){return Rc(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Kd(e,t,n){return{name:Vd(e,t),fields:n.value.mapValue.fields}}function Gd(e,t){var n;if(t instanceof Yf)n={update:Kd(e,t.key,t.value)};else if(t instanceof td)n={delete:Vd(e,t.key)};else if(t instanceof $f)n={update:Kd(e,t.key,t.data),updateMask:ip(t.fieldMask)};else{if(!(t instanceof nd))return Nc();n={verify:Vd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Df)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Pf)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Of)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Lf)return{fieldPath:t.field.canonicalString(),increment:n.k};throw Nc()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ld(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Nc()}(e,t.precondition)),n}function Yd(e,t){return{documents:[zd(e,t.path)]}}function $d(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=zd(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=zd(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Ih(e.value))return{unaryFilter:{field:ep(e.field),op:"IS_NAN"}};if(Sh(e.value))return{unaryFilter:{field:ep(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ih(e.value))return{unaryFilter:{field:ep(e.field),op:"IS_NOT_NAN"}};if(Sh(e.value))return{unaryFilter:{field:ep(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ep(e.field),op:Zd(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:ep(e.field),direction:Jd(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.N||dh(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Qd(e){var t=qd(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Rc(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Xd(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new tf(tp(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return dh(t="object"==typeof e?e.value:e)?null:t}(n.limit));var l=null;n.startAt&&(l=function(e){var t=!!e.before,n=e.values||[];return new ef(n,t)}(n.startAt));var c=null;return n.endAt&&(c=function(e){var t=!e.before,n=e.values||[];return new ef(n,t)}(n.endAt)),sf(t,i,s,o,u,"F",l,c)}function Xd(e){return e?void 0!==e.unaryFilter?[rp(e)]:void 0!==e.fieldFilter?[np(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Xd(e)})).reduce((function(e,t){return e.concat(t)})):Nc():[]}function Jd(e){return Dd[e]}function Zd(e){return Pd[e]}function ep(e){return{fieldPath:e.canonicalString()}}function tp(e){return th.fromServerFormat(e.fieldPath)}function np(e){return Wh.create(tp(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Nc()}}(e.fieldFilter.op),e.fieldFilter.value)}function rp(e){switch(e.unaryFilter.op){case"IS_NAN":var t=tp(e.unaryFilter.field);return Wh.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=tp(e.unaryFilter.field);return Wh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=tp(e.unaryFilter.field);return Wh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=tp(e.unaryFilter.field);return Wh.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Nc()}}function ip(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function ap(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var op=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),sp=([].concat(X(op),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),up=([].concat(sp,["indexConfiguration","indexState","indexEntries"]),"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."),lp=function(){function e(){ee(this,e),this.onCommittedListeners=[]}return ne(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),cp=function(){function e(t){var n=this;ee(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return ne(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Nc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=J(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}();function hp(e){return"IndexedDbTransactionError"===e.name}var fp=function(){function e(t,n,r,i){ee(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return ne(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&qf(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=J(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Hf(r,e,this.localWriteTime)}}catch(s){n.e(s)}finally{n.f()}var i,a=J(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Hf(o,e,this.localWriteTime)}}catch(s){a.e(s)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Yc.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),kd())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Kc(this.mutations,e.mutations,(function(e,t){return Kf(e,t)}))&&Kc(this.baseMutations,e.baseMutations,(function(e,t){return Kf(e,t)}))}}]),e}(),dp=function(){function e(t,n,r,i){ee(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return ne(e,null,[{key:"from",value:function(t,n,r){Rc(t.mutations.length===r.length);for(var i=gd,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),pp=function(){function e(t,n){ee(this,e),this.largestBatchId=t,this.mutation=n}return ne(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),vp=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Yc.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Yc.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:rh.EMPTY_BYTE_STRING;ee(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return ne(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),mp=ne((function e(t){ee(this,e),this.Jt=t}));function gp(e){var t=Qd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?mf(t,t.limit,"L"):t}var yp=function(){function e(){ee(this,e)}return ne(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(oh(e.integerValue));else if("doubleValue"in e){var n=oh(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),ph(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(sh(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?Dh(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Nc()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=J(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),mh.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();yp.fe=new yp;var kp=function(){function e(){ee(this,e),this.qe=new _p}return ne(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),cp.resolve()}},{key:"getCollectionParents",value:function(e,t){return cp.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return cp.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return cp.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return cp.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return cp.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return cp.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return cp.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return cp.resolve()}},{key:"updateIndexEntries",value:function(e,t){return cp.resolve()}}]),e}(),_p=function(){function e(){ee(this,e),this.index={}}return ne(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new cd(Zc.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new cd(Zc.comparator)).toArray()}}]),e}();new Uint8Array(0);var wp=function(){function e(t,n,r){ee(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return ne(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();wp.DEFAULT_COLLECTION_PERCENTILE=10,wp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wp.DEFAULT=new wp(41943040,wp.DEFAULT_COLLECTION_PERCENTILE,wp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wp.DISABLED=new wp(-1,0,0);var bp=function(){function e(t){ee(this,e),this.wn=t}return ne(e,[{key:"next",value:function(){return this.wn+=2,this.wn}}],[{key:"mn",value:function(){return new e(0)}},{key:"gn",value:function(){return new e(-1)}}]),e}();function xp(e){return Ep.apply(this,arguments)}function Ep(){return Ep=Y(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Pc.FAILED_PRECONDITION&&t.message===up){e.next=2;break}throw t;case 2:Cc("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Ep.apply(this,arguments)}var Cp=function(){function e(){ee(this,e),this.changes=new od((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return ne(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Oh.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?cp.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var Tp=function(){function e(t,n,r){ee(this,e),this.fs=t,this.$s=n,this.indexManager=r}return ne(e,[{key:"Bs",value:function(e,t){var n=this;return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Ls(e,t,r)}))}},{key:"Ls",value:function(e,t,n){return this.fs.getEntry(e,t).next((function(e){var t,r=J(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"Us",value:function(e,t){e.forEach((function(e,n){var r,i=J(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"qs",value:function(e,t){var n=this;return this.fs.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.Us(t,e)}))}},{key:"Ks",value:function(e,t,n){return function(e){return mh.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Qs(e,t.path):df(t)?this.js(e,t,n):this.Ws(e,t,n)}},{key:"Qs",value:function(e,t){return this.Bs(e,new mh(t)).next((function(e){var t=vd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"js",value:function(e,t,n){var r=this,i=t.collectionGroup,a=vd();return this.indexManager.getCollectionParents(e,i).next((function(o){return cp.forEach(o,(function(o){var s=function(e,t){return new of(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Ws(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Ws",value:function(e,t,n){var r,i=this;return this.fs.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.$s.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=J(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=J(a.mutations);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.key,l=r.get(u);null==l&&(l=Oh.newInvalidDocument(u),r=r.insert(u,l)),Hf(s,l,a.localWriteTime),l.isFoundDocument()||(r=r.remove(u))}}catch(c){o.e(c)}finally{o.f()}}}catch(c){n.e(c)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){_f(t,n)||(r=r.remove(e))})),r}))}}]),e}(),Sp=function(){function e(t,n,r,i){ee(this,e),this.targetId=t,this.fromCache=n,this.zs=r,this.Hs=i}return ne(e,null,[{key:"Js",value:function(t,n){var r,i=kd(),a=kd(),o=J(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Ip=function(){function e(){ee(this,e)}return ne(e,[{key:"Ys",value:function(e){this.Xs=e}},{key:"Ks",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Yc.min())?this.Zs(e,t):this.Xs.qs(e,r).next((function(a){var o=i.ti(t,a);return(lf(t)||cf(t))&&i.ei(t.limitType,o,r,n)?i.Zs(e,t):(Ec()<=lt.DEBUG&&Cc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),kf(t)),i.Xs.Ks(e,t,Lh(n,-1)).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"ti",value:function(e,t){var n=new cd(bf(e));return t.forEach((function(t,r){_f(e,r)&&(n=n.add(r))})),n}},{key:"ei",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Zs",value:function(e,t){return Ec()<=lt.DEBUG&&Cc("QueryEngine","Using full collection scan to execute query:",kf(t)),this.Xs.Ks(e,t,Fh.min())}}]),e}(),Np=function(){function e(t,n,r,i){ee(this,e),this.persistence=t,this.ni=n,this.M=i,this.si=new sd(Wc),this.ii=new od((function(e){return zh(e)}),qh),this.ri=new Map,this.oi=t.getRemoteDocumentCache(),this.ls=t.getTargetCache(),this.ds=t.getBundleCache(),this.ui(r)}return ne(e,[{key:"ui",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new Tp(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.si)}))}}]),e}();function Rp(e,t,n,r){return new Np(e,t,n,r)}function Dp(e,t){return Pp.apply(this,arguments)}function Pp(){return Pp=Y(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Dc(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.$s.getAllMutationBatches(e).next((function(i){return t=i,r.ui(n),r.$s.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=kd(),u=J(t);try{for(u.s();!(i=u.n()).done;){var l=i.value;a.push(l.batchId);var c,h=J(l.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value;s=s.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=J(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,g=J(v.mutations);try{for(g.s();!(m=g.n()).done;){var y=m.value;s=s.add(y.key)}}catch(k){g.e(k)}finally{g.f()}}}catch(k){p.e(k)}finally{p.f()}return r.ai.qs(e,s).next((function(e){return{ci:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Pp.apply(this,arguments)}function Ap(e,t){var n=Dc(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.oi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=cp.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Rc(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.$s.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.$s.performConsistencyCheck(e)})).next((function(){return n.ai.qs(e,r)}))}))}function Op(e){var t=Dc(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.ls.getLastRemoteSnapshotVersion(e)}))}function Mp(e,t){var n=Dc(e),r=t.snapshotVersion,i=n.si;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.oi.newChangeBuffer({trackRemovals:!0});i=n.si;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.ls.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.ls.addMatchingKeys(e,a.addedDocuments,s)})));var l=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?l=l.withResumeToken(rh.EMPTY_BYTE_STRING,Yc.min()).withLastLimboFreeSnapshotVersion(Yc.min()):a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)),i=i.insert(s,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,l,a)&&o.push(n.ls.updateTargetData(e,l))}}));var s=dd();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Lp(e,a,t.documentUpdates).next((function(e){s=e}))),!r.isEqual(Yc.min())){var u=n.ls.getLastRemoteSnapshotVersion(e).next((function(t){return n.ls.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(u)}return cp.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.ai.Gs(e,s)})).next((function(){return s}))})).then((function(e){return n.si=i,e}))}function Lp(e,t,n){var r=kd();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=dd();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Yc.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Cc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function jp(e,t){var n=Dc(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.$s.getNextMutationBatchAfterBatchId(e,t)}))}function Fp(e,t){var n=Dc(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.ls.getTargetData(e,t).next((function(i){return i?(r=i,cp.resolve(r)):n.ls.allocateTargetId(e).next((function(i){return r=new vp(t,i,0,e.currentSequenceNumber),n.ls.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.si.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.si=n.si.insert(e.targetId,e),n.ii.set(t,e.targetId)),e}))}function Up(e,t,n){return Vp.apply(this,arguments)}function Vp(){return Vp=Y(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Dc(t),a=i.si.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),hp(e.t1)){e.next=12;break}throw e.t1;case 12:Cc("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.si=i.si.remove(n),i.ii.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Vp.apply(this,arguments)}function Bp(e,t,n){var r=Dc(e),i=Yc.min(),a=kd();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Dc(e),i=r.ii.get(n);return void 0!==i?cp.resolve(r.si.get(i)):r.ls.getTargetData(t,n)}(r,e,vf(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.ni.Ks(e,t,n?i:Yc.min(),n?a:kd())})).next((function(e){return zp(r,wf(t),e),{documents:e,hi:a}}))}))}function zp(e,t,n){var r=Yc.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ri.set(t,r)}var qp=function(){function e(t){ee(this,e),this.M=t,this._i=new Map,this.wi=new Map}return ne(e,[{key:"getBundleMetadata",value:function(e,t){return cp.resolve(this._i.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this._i.set(t.id,{id:(n=t).id,version:n.version,createTime:jd(n.createTime)}),cp.resolve()}},{key:"getNamedQuery",value:function(e,t){return cp.resolve(this.wi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.wi.set(t.name,function(e){return{name:e.name,query:gp(e.bundledQuery),readTime:jd(e.readTime)}}(t)),cp.resolve()}}]),e}(),Hp=function(){function e(){ee(this,e),this.overlays=new sd(mh.comparator),this.mi=new Map}return ne(e,[{key:"getOverlay",value:function(e,t){return cp.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),cp.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.mi.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.mi.delete(n)),cp.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=md(),i=t.length+1,a=new mh(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return cp.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new sd((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=md(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=md(),l=i.getIterator();l.hasNext()&&(l.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return cp.resolve(u)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.mi.get(r.largestBatchId).delete(n.key);this.mi.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new pp(t,n));var a=this.mi.get(t);void 0===a&&(a=kd(),this.mi.set(t,a)),this.mi.set(t,a.add(n.key))}}}]),e}(),Wp=function(){function e(){ee(this,e),this.gi=new cd(Kp.yi),this.pi=new cd(Kp.Ii)}return ne(e,[{key:"isEmpty",value:function(){return this.gi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Kp(e,t);this.gi=this.gi.add(n),this.pi=this.pi.add(n)}},{key:"Ti",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ei(new Kp(e,t))}},{key:"Ai",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Ri",value:function(e){var t=this,n=new mh(new Zc([])),r=new Kp(n,e),i=new Kp(n,e+1),a=[];return this.pi.forEachInRange([r,i],(function(e){t.Ei(e),a.push(e.key)})),a}},{key:"bi",value:function(){var e=this;this.gi.forEach((function(t){return e.Ei(t)}))}},{key:"Ei",value:function(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}},{key:"Pi",value:function(e){var t=new mh(new Zc([])),n=new Kp(t,e),r=new Kp(t,e+1),i=kd();return this.pi.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Kp(e,0),n=this.gi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Kp=function(){function e(t,n){ee(this,e),this.key=t,this.Vi=n}return ne(e,null,[{key:"yi",value:function(e,t){return mh.comparator(e.key,t.key)||Wc(e.Vi,t.Vi)}},{key:"Ii",value:function(e,t){return Wc(e.Vi,t.Vi)||mh.comparator(e.key,t.key)}}]),e}(),Gp=function(){function e(t,n){ee(this,e),this.indexManager=t,this.referenceDelegate=n,this.$s=[],this.vi=1,this.Si=new cd(Kp.yi)}return ne(e,[{key:"checkEmpty",value:function(e){return cp.resolve(0===this.$s.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vi;this.vi++,this.$s.length>0&&this.$s[this.$s.length-1];var a=new fp(i,t,n,r);this.$s.push(a);var o,s=J(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Si=this.Si.add(new Kp(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(l){s.e(l)}finally{s.f()}return cp.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return cp.resolve(this.Di(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ci(n),i=r<0?0:r;return cp.resolve(this.$s.length>i?this.$s[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return cp.resolve(0===this.$s.length?-1:this.vi-1)}},{key:"getAllMutationBatches",value:function(e){return cp.resolve(this.$s.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Kp(t,0),i=new Kp(t,Number.POSITIVE_INFINITY),a=[];return this.Si.forEachInRange([r,i],(function(e){var t=n.Di(e.Vi);a.push(t)})),cp.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new cd(Wc);return t.forEach((function(e){var t=new Kp(e,0),i=new Kp(e,Number.POSITIVE_INFINITY);n.Si.forEachInRange([t,i],(function(e){r=r.add(e.Vi)}))})),cp.resolve(this.xi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;mh.isDocumentKey(i)||(i=i.child(""));var a=new Kp(new mh(i),0),o=new cd(Wc);return this.Si.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Vi)),!0)}),a),cp.resolve(this.xi(o))}},{key:"xi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Di(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Rc(0===this.Ni(t.batchId,"removed")),this.$s.shift();var r=this.Si;return cp.forEach(t.mutations,(function(i){var a=new Kp(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Si=r}))}},{key:"dn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Kp(t,0),r=this.Si.firstAfterOrEqual(n);return cp.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.$s.length,cp.resolve()}},{key:"Ni",value:function(e,t){return this.Ci(e)}},{key:"Ci",value:function(e){return 0===this.$s.length?0:e-this.$s[0].batchId}},{key:"Di",value:function(e){var t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}]),e}(),Yp=function(){function e(t){ee(this,e),this.ki=t,this.docs=new sd(mh.comparator),this.size=0}return ne(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ki(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return cp.resolve(n?n.document.mutableCopy():Oh.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=dd();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Oh.newInvalidDocument(e))})),cp.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=dd(),i=new mh(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||Uh(jh(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return cp.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Nc()}},{key:"Mi",value:function(e,t){return cp.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new $p(this)}},{key:"getSize",value:function(e){return cp.resolve(this.size)}}]),e}(),$p=function(e){ae(n,e);var t=ce(n);function n(e){var r;return ee(this,n),(r=t.call(this)).qn=e,r}return ne(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.qn.addEntry(e,i)):t.qn.removeEntry(r)})),cp.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.qn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.qn.getEntries(e,t)}}]),n}(Cp),Qp=function(){function e(t){ee(this,e),this.persistence=t,this.Oi=new od((function(e){return zh(e)}),qh),this.lastRemoteSnapshotVersion=Yc.min(),this.highestTargetId=0,this.Fi=0,this.$i=new Wp,this.targetCount=0,this.Bi=bp.mn()}return ne(e,[{key:"forEachTarget",value:function(e,t){return this.Oi.forEach((function(e,n){return t(n)})),cp.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return cp.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return cp.resolve(this.Fi)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Bi.next(),cp.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fi&&(this.Fi=t),cp.resolve()}},{key:"In",value:function(e){this.Oi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Bi=new bp(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.In(t),this.targetCount+=1,cp.resolve()}},{key:"updateTargetData",value:function(e,t){return this.In(t),cp.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,cp.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Oi.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Oi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),cp.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return cp.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Oi.get(t)||null;return cp.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.$i.Ti(t,n),cp.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.$i.Ai(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),cp.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.$i.Ri(t),cp.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.$i.Pi(t);return cp.resolve(n)}},{key:"containsKey",value:function(e,t){return cp.resolve(this.$i.containsKey(t))}}]),e}(),Xp=function(){function e(t,n){var r=this;ee(this,e),this.Li={},this.overlays={},this.ts=new zc(0),this.es=!1,this.es=!0,this.referenceDelegate=t(this),this.ls=new Qp(this),this.indexManager=new kp,this.fs=new Yp((function(e){return r.referenceDelegate.Ui(e)})),this.M=new mp(n),this.ds=new qp(this.M)}return ne(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.es=!1,Promise.resolve()}},{key:"started",get:function(){return this.es}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Hp,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Li[e.toKey()];return n||(n=new Gp(t,this.referenceDelegate),this.Li[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.ls}},{key:"getRemoteDocumentCache",value:function(){return this.fs}},{key:"getBundleCache",value:function(){return this.ds}},{key:"runTransaction",value:function(e,t,n){var r=this;Cc("MemoryPersistence","Starting transaction:",e);var i=new Jp(this.ts.next());return this.referenceDelegate.qi(),n(i).next((function(e){return r.referenceDelegate.Gi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ki",value:function(e,t){return cp.or(Object.values(this.Li).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Jp=function(e){ae(n,e);var t=ce(n);function n(e){var r;return ee(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return ne(n)}(lp),Zp=function(){function e(t){ee(this,e),this.persistence=t,this.Qi=new Wp,this.ji=null}return ne(e,[{key:"zi",get:function(){if(this.ji)return this.ji;throw Nc()}},{key:"addReference",value:function(e,t,n){return this.Qi.addReference(n,t),this.zi.delete(n.toString()),cp.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qi.removeReference(n,t),this.zi.add(n.toString()),cp.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.zi.add(t.toString()),cp.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qi.Ri(t.targetId).forEach((function(e){return n.zi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.zi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"qi",value:function(){this.ji=new Set}},{key:"Gi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return cp.forEach(this.zi,(function(r){var i=mh.fromPath(r);return t.Hi(e,i).next((function(e){e||n.removeEntry(i,Yc.min())}))})).next((function(){return t.ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hi(e,t).next((function(e){e?n.zi.delete(t.toString()):n.zi.add(t.toString())}))}},{key:"Ui",value:function(e){return 0}},{key:"Hi",value:function(e,t){var n=this;return cp.or([function(){return cp.resolve(n.Qi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ki(e,t)}])}}],[{key:"Wi",value:function(t){return new e(t)}}]),e}();var ev=function(){function e(){ee(this,e),this.activeTargetIds=wd()}return ne(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),tv=function(){function e(){ee(this,e),this.Fr=new ev,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return ne(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new ev,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),nv=function(){function e(){ee(this,e)}return ne(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),rv=function(){function e(){var t=this;ee(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Gr()},this.Kr=[],this.Qr()}return ne(e,[{key:"Br",value:function(e){this.Kr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){Cc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=J(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Gr",value:function(){Cc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=J(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),iv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},av=function(){function e(t){ee(this,e),this.jr=t.jr,this.Wr=t.Wr}return ne(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),ov=function(e){ae(n,e);var t=ce(n);function n(e){var r;return ee(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return ne(n,[{key:"ao",value:function(e,t,n,r){return new Promise((function(i,a){var o=new kc;o.listenOnce(pc.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case dc.NO_ERROR:var t=o.getResponseJson();Cc("Connection","XHR received:",JSON.stringify(t)),i(t);break;case dc.TIMEOUT:Cc("Connection",'RPC "'+e+'" timed out'),a(new Ac(Pc.DEADLINE_EXCEEDED,"Request time out"));break;case dc.HTTP_ERROR:var n=o.getStatus();if(Cc("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Pc).indexOf(t)>=0?t:Pc.UNKNOWN}(r.status);a(new Ac(s,r.message))}else a(new Ac(Pc.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Ac(Pc.UNAVAILABLE,"Connection failed."));break;default:Nc()}}finally{Cc("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=hc(),a=fc(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new gc({})),this.uo(o.initMessageHeaders,t,n),Se()||Ne()||Te().indexOf("Electron/")>=0||Re()||Te().indexOf("MSAppHost/")>=0||Ie()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");Cc("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),l=!1,c=!1,h=new av({jr:function(e){c?Cc("Connection","Not sending because WebChannel is closed:",e):(l||(Cc("Connection","Opening WebChannel transport."),u.open(),l=!0),Cc("Connection","WebChannel sending:",e),u.send(e))},Wr:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,yc.EventType.OPEN,(function(){c||Cc("Connection","WebChannel transport opened.")})),f(u,yc.EventType.CLOSE,(function(){c||(c=!0,Cc("Connection","WebChannel transport closed"),h.eo())})),f(u,yc.EventType.ERROR,(function(e){c||(c=!0,Sc("Connection","WebChannel transport errored:",e),h.eo(new Ac(Pc.UNAVAILABLE,"The operation could not be completed")))})),f(u,yc.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];Rc(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Cc("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Zf[e];if(void 0!==t)return ad(t)}(a),s=i.message;void 0===o&&(o=Pc.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),c=!0,h.eo(new Ac(o,s)),u.close()}else Cc("Connection","WebChannel received:",n),h.no(n)}})),f(a,vc.STAT_EVENT,(function(e){e.stat===mc.PROXY?Cc("Connection","Detected buffering proxy"):e.stat===mc.NOPROXY&&Cc("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Zr()}),0),h}}]),n}(function(){function e(t){ee(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return ne(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);Cc("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.ao(e,a,o,n).then((function(e){return Cc("RestConnection","Received: ",e),e}),(function(t){throw Sc("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"co",value:function(e,t,n,r,i){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+bc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=iv[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function sv(){return"undefined"!=typeof document?document:null}function uv(e){return new Ad(e,!0)}var lv=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;ee(this,e),this.Jn=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return ne(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&Cc("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),cv=function(){function e(t,n,r,i,a,o,s,u){ee(this,e),this.Jn=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new lv(t,n)}return ne(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=Y(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Mo()})))}},{key:"Oo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=Y(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"$o",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"close",value:function(){var e=Y(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===Pc.RESOURCE_EXHAUSTED?(Tc(n.toString()),Tc("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===Pc.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=o(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new Ac(Pc.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.vo=n.Jn.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(Y(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return Cc("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.Jn.enqueueAndForget((function(){return t.Po===e?n():(Cc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),hv=function(e){ae(n,e);var t=ce(n);function n(e,r,i,a,o,s){var u;return ee(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).M=o,u}return ne(n,[{key:"Go",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Nc()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(Rc(void 0===t||"string"==typeof t),rh.fromBase64String(t||"")):(Rc(void 0===t||t instanceof Uint8Array),rh.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?Pc.UNKNOWN:ad(e.code);return new Ac(t,e.message||"")}(o);n=new Td(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var l=Bd(e,u.document.name),c=jd(u.document.updateTime),h=new Ph({mapValue:{fields:u.document.fields}}),f=Oh.newFoundDocument(l,c,h),d=u.targetIds||[],p=u.removedTargetIds||[];n=new Ed(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=Bd(e,v.document),g=v.readTime?jd(v.readTime):Yc.min(),y=Oh.newNoDocument(m,g),k=v.removedTargetIds||[];n=new Ed([],k,y.key,y)}else if("documentRemove"in t){t.documentRemove;var _=t.documentRemove;_.document;var w=Bd(e,_.document),b=_.removedTargetIds||[];n=new Ed([],b,w,null)}else{if(!("filter"in t))return Nc();t.filter;var x=t.filter;x.targetId;var E=x.count||0,C=new rd(E),T=x.targetId;n=new Cd(T,C)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Yc.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Yc.min():t.readTime?jd(t.readTime):Yc.min()}(e);return this.listener.Ko(t,n)}},{key:"Qo",value:function(e){var t={};t.database=Hd(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=Hh(r)?{documents:Yd(e,r)}:{query:$d(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Md(e,t.resumeToken):t.snapshotVersion.compareTo(Yc.min())>0&&(n.readTime=Od(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Nc()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Oo(t)}},{key:"jo",value:function(e){var t={};t.database=Hd(this.M),t.removeTarget=e,this.Oo(t)}}]),n}(cv),fv=function(e){ae(n,e);var t=ce(n);function n(e,r,i,a,o,s){var u;return ee(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).M=o,u.Wo=!1,u}return ne(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,Xt(oe(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Go",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(Rc(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(Rc(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?jd(e.updateTime):jd(t);return n.isEqual(Yc.min())&&(n=jd(t)),new Uf(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=jd(e.commitTime);return this.listener.Jo(n,t)}return Rc(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=Hd(this.M),this.Oo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Gd(t.M,e)}))};this.Oo(n)}}]),n}(cv),dv=function(e){ae(n,e);var t=ce(n);function n(e,r,i,a){var o;return ee(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.M=a,o.Zo=!1,o}return ne(n,[{key:"tu",value:function(){if(this.Zo)throw new Ac(Pc.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=o(i,2),s=a[0],u=a[1];return r.bo.ro(e,t,n,s,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Pc.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Ac(Pc.UNKNOWN,e.toString())}))}},{key:"co",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=o(i,2),s=a[0],u=a[1];return r.bo.co(e,t,n,s,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Pc.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Ac(Pc.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return ne((function e(){ee(this,e)}))}()),pv=function(){function e(t,n){ee(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return ne(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(Tc(t),this.su=!1):Cc("OnlineStateTracker",t)}},{key:"au",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),vv=ne((function e(t,n,r,i,a){var o=this;ee(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(Y(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Tv(o),!e.t0){e.next=5;break}return Cc("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Y(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Dc(t)).lu.add(4),e.next=4,yv(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,mv(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new pv(r,i)}));function mv(e){return gv.apply(this,arguments)}function gv(){return gv=Y(Q().mark((function e(t){var n,r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Tv(t)){e.next=18;break}n=J(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),gv.apply(this,arguments)}function yv(e){return kv.apply(this,arguments)}function kv(){return kv=Y(Q().mark((function e(t){var n,r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=J(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),kv.apply(this,arguments)}function _v(e,t){var n=Dc(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),Cv(n)?Ev(n):tm(n).Co()&&bv(n,t))}function wv(e,t){var n=Dc(e),r=tm(n);n.hu.delete(t),r.Co()&&xv(n,t),0===n.hu.size&&(r.Co()?r.ko():Tv(n)&&n._u.set("Unknown"))}function bv(e,t){e.wu.Z(t.targetId),tm(e).Qo(t)}function xv(e,t){e.wu.Z(t),tm(e).jo(t)}function Ev(e){e.wu=new Id({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.hu.get(t)||null}}),tm(e).start(),e._u.iu()}function Cv(e){return Tv(e)&&!tm(e).Do()&&e.hu.size>0}function Tv(e){return 0===Dc(e).lu.size}function Sv(e){e.wu=void 0}function Iv(e){return Nv.apply(this,arguments)}function Nv(){return Nv=Y(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){bv(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Nv.apply(this,arguments)}function Rv(e,t){return Dv.apply(this,arguments)}function Dv(){return Dv=Y(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Sv(t),Cv(t)?(t._u.uu(n),Ev(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Dv.apply(this,arguments)}function Pv(e,t,n){return Av.apply(this,arguments)}function Av(){return Av=Y(Q().mark((function e(t,n,r){var i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof Td&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Y(Q().mark((function e(t,n){var r,i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=J(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Cc("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Ov(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Ed?t.wu.ut(n):n instanceof Cd?t.wu._t(n):t.wu.ht(n),r.isEqual(Yc.min())){e.next=29;break}return e.prev=14,e.next=17,Op(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(rh.EMPTY_BYTE_STRING,n.snapshotVersion)),xv(e,t);var r=new vp(n.target,t,1,n.sequenceNumber);bv(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Cc("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Ov(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Av.apply(this,arguments)}function Ov(e,t,n){return Mv.apply(this,arguments)}function Mv(){return Mv=Y(Q().mark((function e(t,n,r){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hp(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,yv(t);case 5:t._u.set("Offline"),r||(r=function(){return Op(t.localStore)}),t.asyncQueue.enqueueRetryable(Y(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cc("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,mv(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Mv.apply(this,arguments)}function Lv(e,t){return t().catch((function(n){return Ov(e,n,t)}))}function jv(e){return Fv.apply(this,arguments)}function Fv(){return Fv=Y(Q().mark((function e(t){var n,r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Dc(t),r=nm(n),i=n.cu.length>0?n.cu[n.cu.length-1].batchId:-1;case 2:if(!Uv(n)){e.next=19;break}return e.prev=3,e.next=6,jp(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.cu.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,Vv(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Ov(n,e.t0);case 17:e.next=2;break;case 19:Bv(n)&&zv(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Fv.apply(this,arguments)}function Uv(e){return Tv(e)&&e.cu.length<10}function Vv(e,t){e.cu.push(t);var n=nm(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function Bv(e){return Tv(e)&&!nm(e).Do()&&e.cu.length>0}function zv(e){nm(e).start()}function qv(e){return Hv.apply(this,arguments)}function Hv(){return Hv=Y(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:nm(t).Xo();case 1:case"end":return e.stop()}}),e)}))),Hv.apply(this,arguments)}function Wv(e){return Kv.apply(this,arguments)}function Kv(){return Kv=Y(Q().mark((function e(t){var n,r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=nm(t),r=J(t.cu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Kv.apply(this,arguments)}function Gv(e,t,n){return Yv.apply(this,arguments)}function Yv(){return Yv=Y(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.cu.shift(),a=dp.from(i,n,r),e.next=3,Lv(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,jv(t);case 5:case"end":return e.stop()}}),e)}))),Yv.apply(this,arguments)}function $v(e,t){return Qv.apply(this,arguments)}function Qv(){return Qv=Y(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&nm(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Y(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!id(i=n.code)||i===Pc.ABORTED){e.next=7;break}return r=t.cu.shift(),nm(t).No(),e.next=5,Lv(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,jv(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Bv(t)&&zv(t);case 5:case"end":return e.stop()}}),e)}))),Qv.apply(this,arguments)}function Xv(e,t){return Jv.apply(this,arguments)}function Jv(){return Jv=Y(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Dc(t)).asyncQueue.verifyOperationInProgress(),Cc("RemoteStore","RemoteStore received new credentials"),i=Tv(r),r.lu.add(3),e.next=6,yv(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,mv(r);case 12:case"end":return e.stop()}}),e)}))),Jv.apply(this,arguments)}function Zv(e,t){return em.apply(this,arguments)}function em(){return em=Y(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Dc(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,mv(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,yv(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),em.apply(this,arguments)}function tm(e){return e.mu||(e.mu=function(e,t,n){var r=Dc(e);return r.tu(),new hv(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{zr:Iv.bind(null,e),Jr:Rv.bind(null,e),Ko:Pv.bind(null,e)}),e.fu.push(function(){var t=Y(Q().mark((function t(n){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),Cv(e)?Ev(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:Sv(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function nm(e){return e.gu||(e.gu=function(e,t,n){var r=Dc(e);return r.tu(),new fv(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{zr:qv.bind(null,e),Jr:$v.bind(null,e),Yo:Wv.bind(null,e),Jo:Gv.bind(null,e)}),e.fu.push(function(){var t=Y(Q().mark((function t(n){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,jv(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.cu.length>0&&(Cc("RemoteStore","Stopping write stream with ".concat(e.cu.length," pending writes")),e.cu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var rm=function(){function e(t,n,r,i,a){ee(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Oc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return ne(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ac(Pc.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function im(e,t){if(Tc("AsyncQueue","".concat(t,": ").concat(e)),hp(e))return new Ac(Pc.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var am=function(){function e(t){ee(this,e),this.comparator=t?function(e,n){return t(e,n)||mh.comparator(e.key,n.key)}:function(e,t){return mh.comparator(e.key,t.key)},this.keyedMap=vd(),this.sortedSet=new sd(this.comparator)}return ne(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),om=function(){function e(){ee(this,e),this.yu=new sd(mh.comparator)}return ne(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Nc():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),sm=function(){function e(t,n,r,i,a,o,s,u){ee(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return ne(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,am.emptySet(n),a,r,i,!0,!1)}}]),e}(),um=ne((function e(){ee(this,e),this.Iu=void 0,this.listeners=[]})),lm=ne((function e(){ee(this,e),this.queries=new od((function(e){return yf(e)}),gf),this.onlineState="Unknown",this.Tu=new Set}));function cm(e,t){return hm.apply(this,arguments)}function hm(){return hm=Y(Q().mark((function e(t,n){var r,i,a,o,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Dc(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new um),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=im(e.t0,"Initialization of query '".concat(kf(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&mm(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),hm.apply(this,arguments)}function fm(e,t){return dm.apply(this,arguments)}function dm(){return dm=Y(Q().mark((function e(t,n){var r,i,a,o,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Dc(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),dm.apply(this,arguments)}function pm(e,t){var n,r=Dc(e),i=!1,a=J(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var l,c=J(u.listeners);try{for(c.s();!(l=c.n()).done;){l.value.Au(o)&&(i=!0)}}catch(h){c.e(h)}finally{c.f()}u.Iu=o}}}catch(h){a.e(h)}finally{a.f()}i&&mm(r)}function vm(e,t,n){var r=Dc(e),i=r.queries.get(t);if(i){var a,o=J(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function mm(e){e.Tu.forEach((function(e){e.next()}))}var gm=function(){function e(t,n,r){ee(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return ne(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=J(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new sm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),a=!0):this.vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=sm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}();var ym=ne((function e(t){ee(this,e),this.key=t})),km=ne((function e(t){ee(this,e),this.key=t})),_m=function(){function e(t,n){ee(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=kd(),this.mutatedKeys=kd(),this.Lu=bf(t),this.Uu=new am(this.Lu)}return ne(e,[{key:"qu",get:function(){return this.Fu}},{key:"Gu",value:function(e,t){var n=this,r=t?t.Ku:new om,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u=lf(this.query)&&i.size===this.query.limit?i.last():null,l=cf(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var c=i.get(e),h=_f(n.query,t)?t:null,f=!!c&&n.mutatedKeys.has(c.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;c&&h?c.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Qu(c,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.Lu(h,u)>0||l&&n.Lu(h,l)<0)&&(s=!0)):!c&&h?(r.track({type:0,doc:h}),p=!0):c&&!h&&(r.track({type:1,doc:c}),p=!0,(u||l)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),lf(this.query)||cf(this.query))for(;o.size>this.query.limit;){var c=lf(this.query)?o.last():o.first();o=o.delete(c.key),a=a.delete(c.key),r.track({type:1,doc:c})}return{Uu:o,Ku:r,ei:s,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Ku.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nc()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],s=0===this.Bu.size&&this.current?1:0,u=s!==this.$u;return this.$u=s,0!==a.length||u?{snapshot:new sm(this.query,e.Uu,i,a,e.mutatedKeys,0===s,u,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new om,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=kd(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new km(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new ym(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.hi,this.Bu=kd();var t=this.Gu(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return sm.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),wm=ne((function e(t,n,r){ee(this,e),this.query=t,this.targetId=n,this.view=r})),bm=ne((function e(t){ee(this,e),this.key=t,this.Xu=!1})),xm=function(){function e(t,n,r,i,a,o){ee(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.ta=new od((function(e){return yf(e)}),gf),this.ea=new Map,this.na=new Set,this.sa=new sd(mh.comparator),this.ia=new Map,this.ra=new Wp,this.oa={},this.ua=new Map,this.aa=bp.gn(),this.onlineState="Unknown",this.ca=void 0}return ne(e,[{key:"isPrimaryClient",get:function(){return!0===this.ca}}]),e}();function Em(e,t){return Cm.apply(this,arguments)}function Cm(){return Cm=Y(Q().mark((function e(t,n){var r,i,a,o,s,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Zm(t),!(o=r.ta.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,Fp(r.localStore,vf(n));case 8:return s=e.sent,r.isPrimaryClient&&_v(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,Tm(r,n,i,"current"===u);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Cm.apply(this,arguments)}function Tm(e,t,n,r){return Sm.apply(this,arguments)}function Sm(){return Sm=Y(Q().mark((function e(t,n,r,i){var a,o,s,u,l,c;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.ha=function(e,n,r){return function(){var e=Y(Q().mark((function e(t,n,r,i){var a,o,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Gu(r),e.t0=a.ei,!e.t0){e.next=6;break}return e.next=5,Bp(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Gu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Wm(t,n.targetId,s.zu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Bp(t.localStore,n,!0);case 3:return a=e.sent,o=new _m(n,a.hi),s=o.Gu(a.documents),u=xd.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),l=o.applyChanges(s,t.isPrimaryClient,u),Wm(t,r,l.zu),c=new wm(n,r,o),e.abrupt("return",(t.ta.set(n,c),t.ea.has(r)?t.ea.get(r).push(n):t.ea.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),Sm.apply(this,arguments)}function Im(e,t){return Nm.apply(this,arguments)}function Nm(){return Nm=Y(Q().mark((function e(t,n){var r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Dc(t),i=r.ta.get(n),!((a=r.ea.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ea.set(i.targetId,a.filter((function(e){return!gf(e,n)}))),void r.ta.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Up(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),wv(r.remoteStore,i.targetId),qm(r,i.targetId)})).catch(xp);case 9:e.next=14;break;case 11:return qm(r,i.targetId),e.next=14,Up(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Nm.apply(this,arguments)}function Rm(e,t,n){return Dm.apply(this,arguments)}function Dm(){return Dm=Y(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=eg(t),e.prev=1,e.next=4,function(e,t){var n,r=Dc(e),i=Gc.now(),a=t.reduce((function(e,t){return e.add(t.key)}),kd());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.ai.qs(e,a).next((function(a){n=a;var o,s=[],u=J(t);try{for(u.s();!(o=u.n()).done;){var l=o.value,c=Wf(l,n.get(l.key));null!=c&&s.push(new $f(l.key,c,Ah(c.value.mapValue),Vf.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return r.$s.addMutationBatch(e,i,s,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oa[e.currentUser.toKey()];r||(r=new sd(Wc)),r=r.insert(t,n),e.oa[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Ym(i,a.changes);case 9:return e.next=11,jv(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=im(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Dm.apply(this,arguments)}function Pm(e,t){return Am.apply(this,arguments)}function Am(){return Am=Y(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Dc(t),e.prev=1,e.next=4,Mp(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ia.get(t);n&&(Rc(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?Rc(n.Xu):e.removedDocuments.size>0&&(Rc(n.Xu),n.Xu=!1))})),e.next=8,Ym(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,xp(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Am.apply(this,arguments)}function Om(e,t,n){var r=Dc(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ta.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Dc(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=J(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&mm(n)}(r.eventManager,t),i.length&&r.Zu.Ko(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Mm(e,t,n){return Lm.apply(this,arguments)}function Lm(){return Lm=Y(Q().mark((function e(t,n,r){var i,a,o,s,u,l;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Dc(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ia.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new sd(mh.comparator)).insert(o,Oh.newNoDocument(o,Yc.min())),u=kd().add(o),l=new bd(Yc.min(),new Map,new cd(Wc),s,u),e.next=9,Pm(i,l);case 9:i.sa=i.sa.remove(o),i.ia.delete(n),Gm(i),e.next=16;break;case 14:return e.next=16,Up(i.localStore,n,!1).then((function(){return qm(i,n,r)})).catch(xp);case 16:case"end":return e.stop()}}),e)}))),Lm.apply(this,arguments)}function jm(e,t){return Fm.apply(this,arguments)}function Fm(){return Fm=Y(Q().mark((function e(t,n){var r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Dc(t),i=n.batch.batchId,e.prev=1,e.next=4,Ap(r.localStore,n);case 4:return a=e.sent,zm(r,i,null),Bm(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Ym(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,xp(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Fm.apply(this,arguments)}function Um(e,t,n){return Vm.apply(this,arguments)}function Vm(){return Vm=Y(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Dc(t),e.prev=1,e.next=4,function(e,t){var n=Dc(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.$s.lookupMutationBatch(e,t).next((function(t){return Rc(null!==t),r=t.keys(),n.$s.removeMutationBatch(e,t)})).next((function(){return n.$s.performConsistencyCheck(e)})).next((function(){return n.ai.qs(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,zm(i,n,r),Bm(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Ym(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,xp(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Vm.apply(this,arguments)}function Bm(e,t){(e.ua.get(t)||[]).forEach((function(e){e.resolve()})),e.ua.delete(t)}function zm(e,t,n){var r=Dc(e),i=r.oa[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oa[r.currentUser.toKey()]=i}}function qm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=J(e.ea.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ta.delete(a),n&&e.Zu.la(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ea.delete(t),e.isPrimaryClient&&e.ra.Ri(t).forEach((function(t){e.ra.containsKey(t)||Hm(e,t)}))}function Hm(e,t){e.na.delete(t.path.canonicalString());var n=e.sa.get(t);null!==n&&(wv(e.remoteStore,n),e.sa=e.sa.remove(t),e.ia.delete(n),Gm(e))}function Wm(e,t,n){var r,i=J(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof ym?(e.ra.addReference(a.key,t),Km(e,a)):a instanceof km?(Cc("SyncEngine","Document no longer in limbo: "+a.key),e.ra.removeReference(a.key,t),e.ra.containsKey(a.key)||Hm(e,a.key)):Nc()}}catch(o){i.e(o)}finally{i.f()}}function Km(e,t){var n=t.key,r=n.path.canonicalString();e.sa.get(n)||e.na.has(r)||(Cc("SyncEngine","New document in limbo: "+n),e.na.add(r),Gm(e))}function Gm(e){for(;e.na.size>0&&e.sa.size<e.maxConcurrentLimboResolutions;){var t=e.na.values().next().value;e.na.delete(t);var n=new mh(Zc.fromString(t)),r=e.aa.next();e.ia.set(r,new bm(n)),e.sa=e.sa.insert(n,r),_v(e.remoteStore,new vp(vf(uf(n.path)),r,2,zc.A))}}function Ym(e,t,n){return $m.apply(this,arguments)}function $m(){return $m=Y(Q().mark((function e(t,n,r){var i,a,o,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Dc(t),a=[],o=[],s=[],e.t0=i.ta.isEmpty(),e.t0){e.next=9;break}return i.ta.forEach((function(e,t){s.push(i.ha(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Sp.Js(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.Zu.Ko(a),e.next=9,function(){var e=Y(Q().mark((function e(t,n){var r,i,a,o,s,u,l,c;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Dc(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return cp.forEach(n,(function(t){return cp.forEach(t.zs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return cp.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),hp(e.t0)){e.next=10;break}throw e.t0;case 10:Cc("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=J(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.si.get(s),l=u.snapshotVersion,c=u.withLastLimboFreeSnapshotVersion(l),r.si=r.si.insert(s,c))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),$m.apply(this,arguments)}function Qm(e,t){return Xm.apply(this,arguments)}function Xm(){return Xm=Y(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Dc(t)).currentUser.isEqual(n)){e.next=11;break}return Cc("SyncEngine","User change. New user:",n.toKey()),e.next=5,Dp(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.ua.forEach((function(e){e.forEach((function(e){e.reject(new Ac(Pc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.ua.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Ym(r,i.ci);case 11:case"end":return e.stop()}}),e)}))),Xm.apply(this,arguments)}function Jm(e,t){var n=Dc(e),r=n.ia.get(t);if(r&&r.Xu)return kd().add(r.key);var i=kd(),a=n.ea.get(t);if(!a)return i;var o,s=J(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=n.ta.get(u);i=i.unionWith(l.view.qu)}}catch(c){s.e(c)}finally{s.f()}return i}function Zm(e){var t=Dc(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Pm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Mm.bind(null,t),t.Zu.Ko=pm.bind(null,t.eventManager),t.Zu.la=vm.bind(null,t.eventManager),t}function eg(e){var t=Dc(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=jm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Um.bind(null,t),t}var tg=function(){function e(){ee(this,e),this.synchronizeTabs=!1}return ne(e,[{key:"initialize",value:function(){var e=Y(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=uv(t.databaseInfo.databaseId),this.sharedClientState=this.da(t),this.persistence=this._a(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.wa(t),this.localStore=this.ma(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wa",value:function(e){return null}},{key:"ma",value:function(e){return Rp(this.persistence,new Ip,e.initialUser,this.M)}},{key:"_a",value:function(e){return new Xp(Zp.Wi,this.M)}},{key:"da",value:function(e){return new tv}},{key:"terminate",value:function(){var e=Y(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ng=function(){function e(){ee(this,e)}return ne(e,[{key:"initialize",value:function(){var e=Y(Q().mark((function e(t,n){var r=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Om(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Qm.bind(null,this.syncEngine),e.next=12,Zv(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new lm}},{key:"createDatastore",value:function(e){var t,n=uv(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new ov(t));return function(e,t,n,r){return new dv(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Om(o.syncEngine,e,0)},a=rv.vt()?new rv:new nv,new vv(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new xm(e,t,n,r,i,a);return o&&(s.ca=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Y(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Dc(t),Cc("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,yv(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();var rg=function(){function e(t){ee(this,e),this.observer=t,this.muted=!1}return ne(e,[{key:"next",value:function(e){this.observer.next&&this.ya(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"pa",value:function(){this.muted=!0}},{key:"ya",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),ig=function(){function e(t,n,r,i){var a=this;ee(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=wc.UNAUTHENTICATED,this.clientId=Hc.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Y(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cc("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Cc("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return ne(e,[{key:"getConfiguration",value:function(){var e=Y(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Ac(Pc.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Oc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Y(Q().mark((function n(){var r;return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=im(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function ag(e,t){return og.apply(this,arguments)}function og(){return og=Y(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Cc("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Y(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Dp(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),og.apply(this,arguments)}function sg(e,t){return ug.apply(this,arguments)}function ug(){return ug=Y(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,lg(t);case 3:return r=e.sent,Cc("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Xv(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Xv(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),ug.apply(this,arguments)}function lg(e){return cg.apply(this,arguments)}function cg(){return cg=Y(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Cc("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,ag(t,new tg);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),cg.apply(this,arguments)}function hg(e){return fg.apply(this,arguments)}function fg(){return fg=Y(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Cc("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,sg(t,new ng);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),fg.apply(this,arguments)}function dg(e){return hg(e).then((function(e){return e.syncEngine}))}function pg(e){return vg.apply(this,arguments)}function vg(){return vg=Y(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hg(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Em.bind(null,n.syncEngine),r.onUnlisten=Im.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),vg.apply(this,arguments)}function mg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Oc;return e.asyncQueue.enqueueAndForget(Y(Q().mark((function i(){return Q().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new rg({next:function(n){t.enqueueAndForget((function(){return fm(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Ac(Pc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new gm(n,a,{includeMetadataChanges:!0,Du:!0});return cm(e,o)},i.next=3,pg(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var gg=new Map;function yg(e,t,n){if(!n)throw new Ac(Pc.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function kg(e){if(!mh.isDocumentKey(e))throw new Ac(Pc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function _g(e){if(mh.isDocumentKey(e))throw new Ac(Pc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function wg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Nc()}function bg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ac(Pc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=wg(e);throw new Ac(Pc.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}var xg=function(){function e(t){var n;if(ee(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Ac(Pc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ac(Pc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new Ac(Pc.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return ne(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Eg=function(){function e(t,n,r){ee(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xg({}),this._settingsFrozen=!1,t instanceof fh?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ac(Pc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fh(e.options.projectId)}(t))}return ne(e,[{key:"app",get:function(){if(!this._app)throw new Ac(Pc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Ac(Pc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Lc;switch(e.type){case"gapi":var t=e.client;return Rc(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Uc(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Ac(Pc.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=gg.get(e);t&&(Cc("ComponentProvider","Removing Datastore"),gg.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();var Cg=function(){function e(t,n,r){ee(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return ne(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Sg(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Tg=function(){function e(t,n,r){ee(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return ne(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Sg=function(e){ae(n,e);var t=ce(n);function n(e,r,i){var a;return ee(this,n),(a=t.call(this,e,r,uf(i)))._path=i,a.type="collection",a}return ne(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Cg(this.firestore,null,new mh(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Tg);function Ig(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ze(e),yg("collection","path",t),e instanceof Eg){var a=Zc.fromString.apply(Zc,[t].concat(r));return _g(a),new Sg(e,null,a)}if(!(e instanceof Cg||e instanceof Sg))throw new Ac(Pc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Zc.fromString.apply(Zc,[t].concat(r)));return _g(o),new Sg(e.firestore,null,o)}function Ng(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ze(e),1===arguments.length&&(t=Hc.R()),yg("doc","path",t),e instanceof Eg){var a=Zc.fromString.apply(Zc,[t].concat(r));return kg(a),new Cg(e,null,new mh(a))}if(!(e instanceof Cg||e instanceof Sg))throw new Ac(Pc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Zc.fromString.apply(Zc,[t].concat(r)));return kg(o),new Cg(e.firestore,e instanceof Sg?e.converter:null,new mh(o))}var Rg=function(){function e(){var t=this;ee(this,e),this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new lv(this,"async_queue_retry"),this.Ua=function(){var e=sv();e&&Cc("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=sv();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ua)}return ne(e,[{key:"isShuttingDown",get:function(){return this.Ma}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.qa(),this.Ga(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;var t=sv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}},{key:"enqueue",value:function(e){var t=this;if(this.qa(),this.Ma)return new Promise((function(){}));var n=new Oc;return this.Ga((function(){return t.Ma&&t.Ba?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.ka.push(e),t.Ka()}))}},{key:"Ka",value:function(){var e=Y(Q().mark((function e(){var t=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.ka.length){e.next=14;break}return e.prev=1,e.next=4,this.ka[0]();case 4:this.ka.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),hp(e.t0)){e.next=12;break}throw e.t0;case 12:Cc("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.ka.length>0&&this.So.Io((function(){return t.Ka()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Ga",value:function(e){var t=this,n=this.Na.then((function(){return t.$a=!0,e().catch((function(e){t.Fa=e,t.$a=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Tc("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.$a=!1,e}))}));return this.Na=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.qa(),this.La.indexOf(e)>-1&&(t=0);var i=rm.createAndSchedule(this,e,t,n,(function(e){return r.Qa(e)}));return this.Oa.push(i),i}},{key:"qa",value:function(){this.Fa&&Nc()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ja",value:function(){var e=Y(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Na,e.next=3,t;case 3:if(t!==this.Na){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t,n=J(this.Oa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"za",value:function(e){var t=this;return this.ja().then((function(){t.Oa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=J(t.Oa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ja()}))}},{key:"Ha",value:function(e){this.La.push(e)}},{key:"Qa",value:function(e){var t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}]),e}();var Dg=function(e){ae(n,e);var t=ce(n);function n(e,r,i){var a;return ee(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new Rg,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return ne(n,[{key:"_terminate",value:function(){return this._firestoreClient||Ag(this),this._firestoreClient.terminate()}}]),n}(Eg);function Pg(e){return e._firestoreClient||Ag(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ag(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new hh(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new ig(e._authCredentials,e._appCheckCredentials,e._queue,r)}var Og=function(){function e(){ee(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Ac(Pc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new th(n)}return ne(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Mg=function(){function e(t){ee(this,e),this._byteString=t}return ne(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(rh.fromBase64String(t))}catch(t){throw new Ac(Pc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(rh.fromUint8Array(t))}}]),e}(),Lg=ne((function e(t){ee(this,e),this._methodName=t})),jg=function(){function e(t,n){if(ee(this,e),!isFinite(t)||t<-90||t>90)throw new Ac(Pc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ac(Pc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return ne(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Wc(this._lat,e._lat)||Wc(this._long,e._long)}}]),e}(),Fg=/^__.*__$/,Ug=function(){function e(t,n,r){ee(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ne(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new $f(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yf(e,this.data,t,this.fieldTransforms)}}]),e}(),Vg=function(){function e(t,n,r){ee(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ne(e,[{key:"toMutation",value:function(e,t){return new $f(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Bg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nc()}}var zg=function(){function e(t,n,r,i,a,o){ee(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ja(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return ne(e,[{key:"path",get:function(){return this.settings.path}},{key:"Ya",get:function(){return this.settings.Ya}},{key:"Xa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Za",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Xa({path:n,tc:!1});return r.ec(e),r}},{key:"nc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Xa({path:n,tc:!1});return r.Ja(),r}},{key:"sc",value:function(e){return this.Xa({path:void 0,tc:!0})}},{key:"ic",value:function(e){return ry(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Ja",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ec(this.path.get(e))}},{key:"ec",value:function(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(Bg(this.Ya)&&Fg.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}]),e}(),qg=function(){function e(t,n,r){ee(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||uv(t)}return ne(e,[{key:"uc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new zg({Ya:e,methodName:t,oc:n,path:th.emptyPath(),tc:!1,rc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function Hg(e){var t=e._freezeSettings(),n=uv(e._databaseId);return new qg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Wg(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.uc(a.merge||a.mergeFields?2:0,t,n,i);Zg("Data must be an object, but it was:",o,r);var s,u,l=Xg(r,o);if(a.merge)s=new nh(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var c,h=[],f=J(a.mergeFields);try{for(f.s();!(c=f.n()).done;){var d=c.value,p=ey(t,d,n);if(!o.contains(p))throw new Ac(Pc.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));iy(h,p)||h.push(p)}}catch(v){f.e(v)}finally{f.f()}s=new nh(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new Ug(new Ph(l),s,u)}var Kg=function(e){ae(n,e);var t=ce(n);function n(){return ee(this,n),t.apply(this,arguments)}return ne(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Ya)throw 1===e.Ya?e.ic("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ic("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Lg);function Gg(e,t,n,r){var i=e.uc(1,t,n);Zg("Data must be an object, but it was:",i,r);var a=[],o=Ph.empty();Qc(r,(function(e,r){var s=ny(t,e,n);r=Ze(r);var u=i.nc(s);if(r instanceof Kg)a.push(s);else{var l=Qg(r,u);null!=l&&(a.push(s),o.set(s,l))}}));var s=new nh(a);return new Vg(o,s,i.fieldTransforms)}function Yg(e,t,n,r,i,a){var o=e.uc(1,t,n),s=[ey(t,r,n)],u=[i];if(a.length%2!=0)throw new Ac(Pc.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var l=0;l<a.length;l+=2)s.push(ey(t,a[l])),u.push(a[l+1]);for(var c=[],h=Ph.empty(),f=s.length-1;f>=0;--f)if(!iy(c,s[f])){var d=s[f],p=u[f];p=Ze(p);var v=o.nc(d);if(p instanceof Kg)c.push(d);else{var m=Qg(p,v);null!=m&&(c.push(d),h.set(d,m))}}var g=new nh(c);return new Vg(h,g,o.fieldTransforms)}function $g(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Qg(n,e.uc(r?4:3,t))}function Qg(e,t){if(Jg(e=Ze(e)))return Zg("Unsupported field value:",t,e),Xg(e,t);if(e instanceof Lg)return function(e,t){if(!Bg(t.Ya))throw t.ic("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ic("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.tc&&4!==t.Ya)throw t.ic("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=J(e);try{for(a.s();!(n=a.n()).done;){var o=Qg(n.value,t.sc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Ze(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Tf(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Gc.fromDate(e);return{timestampValue:Od(t.M,n)}}if(e instanceof Gc){var r=new Gc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Od(t.M,r)}}if(e instanceof jg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Mg)return{bytesValue:Md(t.M,e._byteString)};if(e instanceof Cg){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ic("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Fd(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ic("Unsupported field value: ".concat(wg(e)))}(e,t)}function Xg(e,t){var n={};return Xc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qc(e,(function(e,r){var i=Qg(r,t.Za(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Jg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Gc||e instanceof jg||e instanceof Mg||e instanceof Cg||e instanceof Lg)}function Zg(e,t,n){if(!Jg(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=wg(n);throw"an object"===r?t.ic(e+" a custom object"):t.ic(e+" "+r)}}function ey(e,t,n){if((t=Ze(t))instanceof Og)return t._internalPath;if("string"==typeof t)return ny(e,t);throw ry("Field path arguments must be of type string or ",e,!1,void 0,n)}var ty=new RegExp("[~\\*/\\[\\]]");function ny(e,t,n){if(t.search(ty)>=0)throw ry("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return he(Og,X(t.split(".")))._internalPath}catch(Ux){throw ry("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function ry(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new Ac(Pc.INVALID_ARGUMENT,s+e+u)}function iy(e,t){return e.some((function(e){return e.isEqual(t)}))}var ay=function(){function e(t,n,r,i,a){ee(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return ne(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Cg(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new oy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(sy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),oy=function(e){ae(n,e);var t=ce(n);function n(){return ee(this,n),t.apply(this,arguments)}return ne(n,[{key:"data",value:function(){return Xt(oe(n.prototype),"data",this).call(this)}}]),n}(ay);function sy(e,t){return"string"==typeof t?ny(e,t):t instanceof Og?t._internalPath:t._delegate._internalPath}var uy=function(){function e(t,n){ee(this,e),this.hasPendingWrites=t,this.fromCache=n}return ne(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),ly=function(e){ae(n,e);var t=ce(n);function n(e,r,i,a,o,s){var u;return ee(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return ne(n,[{key:"exists",value:function(){return Xt(oe(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new cy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(sy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(ay),cy=function(e){ae(n,e);var t=ce(n);function n(){return ee(this,n),t.apply(this,arguments)}return ne(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Xt(oe(n.prototype),"data",this).call(this,e)}}]),n}(ly),hy=function(){function e(t,n,r,i){ee(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new uy(i.hasPendingWrites,i.fromCache),this.query=r}return ne(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new cy(n._firestore,n._userDataWriter,r.key,r,new uy(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ac(Pc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new cy(e._firestore,e._userDataWriter,t.doc.key,t.doc,new uy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new cy(e._firestore,e._userDataWriter,t.doc.key,t.doc,new uy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:fy(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function fy(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nc()}}function dy(e){if(cf(e)&&0===e.explicitOrderBy.length)throw new Ac(Pc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var py=ne((function e(){ee(this,e)}));function vy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var my=function(e){ae(n,e);var t=ce(n);function n(e,r,i){var a;return ee(this,n),(a=t.call(this)).hc=e,a.lc=r,a.fc=i,a.type="where",a}return ne(n,[{key:"_apply",value:function(e){var t=Hg(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Ac(Pc.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){ky(o,a);var u,l=[],c=J(o);try{for(c.s();!(u=c.n()).done;){var h=u.value;l.push(yy(r,e,h))}}catch(d){c.e(d)}finally{c.f()}s={arrayValue:{values:l}}}else s=yy(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||ky(o,a),s=$g(n,"where",o,"in"===a||"not-in"===a);var f=Wh.create(i,a,s);return function(e,t){if(t.S()){var n=ff(e);if(null!==n&&!n.isEqual(t.field))throw new Ac(Pc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=hf(e);null!==r&&_y(e,t.field,r)}var i=function(e,t){var n,r=J(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Ac(Pc.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Ac(Pc.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new Tg(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new of(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(py);function gy(e,t,n){var r=t,i=sy("where",e);return new my(i,r,n)}function yy(e,t,n){if("string"==typeof(n=Ze(n))){if(""===n)throw new Ac(Pc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!df(t)&&-1!==n.indexOf("/"))throw new Ac(Pc.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Zc.fromString(n));if(!mh.isDocumentKey(r))throw new Ac(Pc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Eh(e,new mh(r))}if(n instanceof Cg)return Eh(e,n._key);throw new Ac(Pc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(wg(n),"."))}function ky(e,t){if(!Array.isArray(e)||0===e.length)throw new Ac(Pc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Ac(Pc.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function _y(e,t,n){if(!n.isEqual(t))throw new Ac(Pc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var wy=function(){function e(){ee(this,e)}return ne(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(gh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return oh(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Nc()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Qc(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new jg(oh(e.latitude),oh(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=lh(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ch(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=ah(e);return new Gc(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Zc.fromString(e);Rc(ap(n));var r=new fh(n.get(1),n.get(3)),i=new mh(n.popFirst(5));return r.isEqual(t)||Tc("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function by(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var xy=function(e){ae(n,e);var t=ce(n);function n(e){var r;return ee(this,n),(r=t.call(this)).firestore=e,r}return ne(n,[{key:"convertBytes",value:function(e){return new Mg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cg(this.firestore,null,t)}}]),n}(wy);function Ey(e){e=bg(e,Tg);var t=bg(e.firestore,Dg),n=Pg(t),r=new xy(t);return dy(e._query),mg(n,e._query).then((function(n){return new hy(t,r,e,n)}))}function Cy(e,t,n){e=bg(e,Cg);var r=bg(e.firestore,Dg),i=by(e.converter,t,n);return Iy(r,[Wg(Hg(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Vf.none())])}function Ty(e,t,n){e=bg(e,Cg);for(var r=bg(e.firestore,Dg),i=Hg(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return Iy(r,[("string"==typeof(t=Ze(t))||t instanceof Og?Yg(i,"updateDoc",e._key,t,n,o):Gg(i,"updateDoc",e._key,t)).toMutation(e._key,Vf.exists(!0))])}function Sy(e,t){var n=bg(e.firestore,Dg),r=Ng(e),i=by(e.converter,t);return Iy(n,[Wg(Hg(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Vf.exists(!1))]).then((function(){return r}))}function Iy(e,t){return function(e,t){var n=new Oc;return e.asyncQueue.enqueueAndForget(Y(Q().mark((function r(){return Q().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Rm,r.next=3,dg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Pg(e),t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];bc="9.6.10",It(new at("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new Dg(i,new jc(e.getProvider("auth-internal")),new Bc(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Mt(_c,"3.4.7",e),Mt(_c,"3.4.7","esm2017")}();var Ny="@firebase/database",Ry="0.12.7",Dy="";var Py=function(){function e(t){ee(this,e),this.domStorage_=t,this.prefix_="firebase:"}return ne(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),je(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Le(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),Ay=function(){function e(){ee(this,e),this.cache_={},this.isInMemoryStorage=!0}return ne(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Ue(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),Oy=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Py(t)}}catch(n){}return new Ay},My=Oy("localStorage"),Ly=Oy("sessionStorage"),jy=new yt("@firebase/database"),Fy=function(){var e=1;return function(){return e++}}(),Uy=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,me(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Ye;n.update(t);var r=n.digest();return ke.encodeByteArray(r)},Vy=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?je(r):r,t+=" "}return t},By=null,zy=!0,qy=function(e,t){me(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(jy.logLevel=lt.VERBOSE,By=jy.log.bind(jy),t&&Ly.set("logging_enabled",!0)):"function"===typeof e?By=e:(By=null,Ly.remove("logging_enabled"))},Hy=function(){if(!0===zy&&(zy=!1,null===By&&!0===Ly.get("logging_enabled")&&qy(!0)),By){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Vy.apply(null,t);By(r)}},Wy=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Hy.apply(void 0,[e].concat(n))}},Ky=function(){var e="FIREBASE INTERNAL ERROR: "+Vy.apply(void 0,arguments);jy.error(e)},Gy=function(){var e="FIREBASE FATAL ERROR: ".concat(Vy.apply(void 0,arguments));throw jy.error(e),new Error(e)},Yy=function(){var e="FIREBASE WARNING: "+Vy.apply(void 0,arguments);jy.warn(e)},$y=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Qy="[MIN_NAME]",Xy="[MAX_NAME]",Jy=function(e,t){if(e===t)return 0;if(e===Qy||t===Xy)return-1;if(t===Qy||e===Xy)return 1;var n=uk(e),r=uk(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Zy=function(e,t){return e===t?0:e<t?-1:1},ek=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+je(t))},tk=function e(t){if("object"!==typeof t||null===t)return je(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=je(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},nk=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function rk(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var ik=function(e){me(!$y(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),l="";for(a=0;a<64;a+=8){var c=parseInt(u.substr(a,8),2).toString(16);1===c.length&&(c="0"+c),l+=c}return l.toLowerCase()};var ak=new RegExp("^-?(0*)\\d{1,10}$"),ok=-2147483648,sk=2147483647,uk=function(e){if(ak.test(e)){var t=Number(e);if(t>=ok&&t<=sk)return t}return null},lk=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw Yy("Exception was thrown by user callback.",e),t}),Math.floor(0))}},ck=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},hk=function(){function e(t,n){var r=this;ee(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return ne(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){Yy('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),fk=function(){function e(t,n,r){var i=this;ee(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return ne(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Hy("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Yy(e)}}]),e}(),dk=function(){function e(t){ee(this,e),this.accessToken=t}return ne(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();dk.OWNER="owner";var pk="5",vk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,mk="websocket",gk="long_polling",yk=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];ee(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=My.get("host:"+t)||this._host}return ne(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&My.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function kk(e,t,n){var r;if(me("string"===typeof t,"typeof type must == string"),me("object"===typeof n,"typeof params must == object"),t===mk)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==gk)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return rk(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var _k=function(){function e(){ee(this,e),this.counters_={}}return ne(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Ue(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return xe(this.counters_)}}]),e}(),wk={},bk={};function xk(e){var t=e.toString();return wk[t]||(wk[t]=new _k),wk[t]}var Ek=function(){function e(t){ee(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return ne(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&lk((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),Ck="start",Tk="close",Sk=function(){function e(t,n,r,i,a,o,s){var u=this;ee(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Wy(t),this.stats_=xk(n),this.urlFn=function(e){return u.appCheckToken&&(e.ac=u.appCheckToken),kk(n,gk,e)}}return ne(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Ek(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(De()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Ik((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Ck)n.id=a,n.password=o;else{if(i!==Tk)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=pk,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&vk.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=je(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=_e(t),r=nk(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!De()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=je(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!De()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),Ik=function(){function e(t,n,r,i){if(ee(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,De())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Fy(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){Hy("frame writing exception"),s.stack&&Hy(s.stack),Hy(s)}}}return ne(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;De()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Hy("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Hy("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),Nk=null;"undefined"!==typeof MozWebSocket?Nk=MozWebSocket:"undefined"!==typeof WebSocket&&(Nk=WebSocket);var Rk=function(){function e(t,n,r,i,a,o,s){ee(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Wy(this.connId),this.stats_=xk(n),this.connURL=e.connectionURL_(n,o,s,i),this.nodeAdmin=n.nodeAdmin}return ne(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,My.set("previous_websocket_failure",!0);try{if(De()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/".concat(pk,"/").concat(Dy,"/").concat(process.platform,"/").concat(r),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(i.proxy={origin:o}),this.mySock=new Nk(this.connURL,[],i)}else{var s={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Nk(this.connURL,[],s)}}catch(l){this.log_("Error instantiating WebSocket.");var u=l.message||l.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){My.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Le(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(me(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=je(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=nk(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r){var i={};return i.v=pk,!De()&&"undefined"!==typeof location&&location.hostname&&vk.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),kk(e,mk,i)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Nk&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return My.isInMemoryStorage||!0===My.get("previous_websocket_failure")}}]),e}();Rk.responsesRequiredToBeHealthy=2,Rk.healthyTimeout=3e4;var Dk=function(){function e(t){ee(this,e),this.initTransports_(t)}return ne(e,[{key:"initTransports_",value:function(t){var n=Rk&&Rk.isAvailable(),r=n&&!Rk.previouslyFailed();if(t.webSocketOnly&&(n||Yy("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Rk];else{var i,a=this.transports_=[],o=J(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[Sk,Rk]}}]),e}(),Pk=function(){function e(t,n,r,i,a,o,s,u,l,c){ee(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Wy("c:"+this.id+":"),this.transportManager_=new Dk(n),this.log_("Connection created"),this.start_()}return ne(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=ck((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=ek("t",e),n=ek("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=ek("t",e),n=ek("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=ek("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Ky("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ky("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),pk!==n&&Yy("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ck((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ck((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(My.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),Ak=function(){function e(){ee(this,e)}return ne(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Ok=function(){function e(t){ee(this,e),this.allowedEvents_=t,this.listeners_={},me(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return ne(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=X(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){me(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Mk=function(e){ae(n,e);var t=ce(n);function n(){var e;return ee(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Se()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return ne(n,[{key:"getInitialEvent",value:function(e){return me("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Ok),Lk=function(){function e(t,n){if(ee(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return ne(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function jk(){return new Lk("")}function Fk(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Uk(e){return e.pieces_.length-e.pieceNum_}function Vk(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Lk(e.pieces_,t)}function Bk(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function zk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function qk(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Lk(t,0)}function Hk(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Lk)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Lk(n,0)}function Wk(e){return e.pieceNum_>=e.pieces_.length}function Kk(e,t){var n=Fk(e),r=Fk(t);if(null===n)return t;if(n===r)return Kk(Vk(e),Vk(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Gk(e,t){if(Uk(e)!==Uk(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Yk(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Uk(e)>Uk(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var $k=ne((function e(t,n){ee(this,e),this.errorPrefix_=n,this.parts_=zk(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Je(this.parts_[r]);Qk(this)}));function Qk(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Xk(e))}function Xk(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Jk=function(e){ae(n,e);var t=ce(n);function n(){var e,r,i;return ee(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return ne(n,[{key:"getInitialEvent",value:function(e){return me("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Ok),Zk=1e3,e_=function(e){ae(n,e);var t=ce(n);function n(e,r,i,a,o,s,u,l){var c;if(ee(this,n),(c=t.call(this)).repoInfo_=e,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=a,c.onServerInfoUpdate_=o,c.authTokenProvider_=s,c.appCheckTokenProvider_=u,c.authOverride_=l,c.id=n.nextPersistentConnectionId_++,c.log_=Wy("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingGets_=[],c.outstandingPutCount_=0,c.outstandingGetCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=Zk,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.appCheckToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.invalidAppCheckTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,l&&!De())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Jk.getInstance().on("visible",c.onVisible_,re(c)),-1===e.host.indexOf("fblocal")&&Mk.getInstance().on("online",c.onOnline_,re(c)),c}return ne(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(je(i)),me(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){var t=this;this.initConnection_();var n=new Ce,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),me(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),me(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Fe(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Fe(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),me(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+je(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Ky("Unrecognized action received from server: "+je(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;me(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Zk,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Zk,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Zk),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Y(Q().mark((function e(){var t,r,i,a,s,u,l,c,h,f,d,p,v,m,g=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,s=this.lastSessionId,u=!1,l=null,c=function(){l?l.close():(u=!0,i())},h=function(e){me(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(e)},this.realtime_={close:c,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=o(d,2),v=p[0],m=p[1],u?Hy("getToken() completed but was canceled"):(Hy("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=m&&m.token,l=new Pk(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){Yy(e+" ("+g.repoInfo_.toString()+")"),g.interrupt("server_kill")}),s)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&Yy(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Hy("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Hy("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Be(this.interruptReasons_)&&(this.reconnectDelay_=Zk,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return tk(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Lk(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Hy("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Hy("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=J(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=J(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";De()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Dy.replace(/\./g,"-")]=1,Se()?e["framework.cordova"]=1:Ne()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Mk.getInstance().currentlyOnline();return Be(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Ue(e,"w")){var n=Ve(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();Yy("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(Ak);e_.nextPersistentConnectionId_=0,e_.nextConnectionId_=0;var t_,n_=function(){function e(t,n){ee(this,e),this.name=t,this.node=n}return ne(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),r_=function(){function e(){ee(this,e)}return ne(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new n_(Qy,e),r=new n_(Qy,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return n_.MIN}}]),e}(),i_=function(e){ae(n,e);var t=ce(n);function n(){return ee(this,n),t.apply(this,arguments)}return ne(n,[{key:"compare",value:function(e,t){return Jy(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw ge("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return n_.MIN}},{key:"maxPost",value:function(){return new n_(Xy,t_)}},{key:"makePost",value:function(e,t){return me("string"===typeof e,"KeyIndex indexValue must always be a string."),new n_(e,t_)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return t_},set:function(e){t_=e}}]),n}(r_),a_=new i_,o_=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;ee(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return ne(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),s_=function(){function e(t,n,r,i,a){ee(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:c_.EMPTY_NODE,this.right=null!=a?a:c_.EMPTY_NODE}return ne(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return c_.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return c_.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();s_.RED=!0,s_.BLACK=!1;var u_,l_=function(){function e(){ee(this,e)}return ne(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new s_(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),c_=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;ee(this,e),this.comparator_=t,this.root_=n}return ne(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,s_.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,s_.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new o_(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new o_(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new o_(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new o_(this.root_,null,this.comparator_,!0,e)}}]),e}();function h_(e,t){return Jy(e.name,t.name)}function f_(e,t){return Jy(e,t)}c_.EMPTY_NODE=new l_;var d_,p_,v_,m_=function(e){return"number"===typeof e?"number:"+ik(e):"string:"+e},g_=function(e){if(e.isLeafNode()){var t=e.val();me("string"===typeof t||"number"===typeof t||"object"===typeof t&&Ue(t,".sv"),"Priority must be a string or number.")}else me(e===u_||e.isEmpty(),"priority of unexpected type.");me(e===u_||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},y_=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;ee(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,me(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),g_(this.priorityNode_)}return ne(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Wk(t)?this:".priority"===Fk(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Fk(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(me(".priority"!==r||1===Uk(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Vk(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+m_(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?ik(this.value_):this.value_,this.lazyHash_=Uy(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(me(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return me(i>=0,"Unknown leaf type: "+n),me(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return d_},set:function(e){d_=e}}]),e}();y_.VALUE_TYPE_ORDER=["object","boolean","number","string"];var k_,__,w_=function(e){ae(n,e);var t=ce(n);function n(){return ee(this,n),t.apply(this,arguments)}return ne(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Jy(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return n_.MIN}},{key:"maxPost",value:function(){return new n_(Xy,new y_("[PRIORITY-POST]",v_))}},{key:"makePost",value:function(e,t){var n=p_(e);return new n_(t,new y_("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(r_),b_=new w_,x_=Math.log(2),E_=function(){function e(t){ee(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/x_,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return ne(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),C_=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new s_(o,a.node,s_.BLACK,null,null);var u=parseInt(s/2,10)+r,l=t(r,u),c=t(u+1,i);return a=e[u],o=n?n(a):a,new s_(o,a.node,s_.BLACK,l,c)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var l=i(a+1,s),c=e[a],h=n?n(c):c;u(new s_(h,c.node,r,null,l))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},l=0;l<t.count;++l){var c=t.nextBitIsOne(),h=Math.pow(2,t.count-(l+1));c?s(h,s_.BLACK):(s(h,s_.BLACK),s(h,s_.RED))}return a}(new E_(e.length));return new c_(r||t,a)},T_={},S_=function(){function e(t,n){ee(this,e),this.indexes_=t,this.indexSet_=n}return ne(e,[{key:"get",value:function(e){var t=Ve(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof c_?t:null}},{key:"hasIndex",value:function(e){return Ue(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){me(t!==a_,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(n_.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?C_(i,t.getCompare()):T_;var u=t.toString(),l=Object.assign({},this.indexSet_);l[u]=t;var c=Object.assign({},this.indexes_);return c[u]=r,new e(c,l)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(ze(this.indexes_,(function(e,i){var a=Ve(r.indexSet_,i);if(me(a,"Missing index implementation for "+i),e===T_){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(n_.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),C_(o,a.getCompare())}return T_}var l=n.get(t.name),c=e;return l&&(c=c.remove(new n_(t.name,l))),c.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(ze(this.indexes_,(function(e){if(e===T_)return e;var r=n.get(t.name);return r?e.remove(new n_(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return me(T_&&b_,"ChildrenNode.ts has not been loaded"),k_=k_||new e({".priority":T_},{".priority":b_})}}]),e}(),I_=function(){function e(t,n,r){ee(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&g_(this.priorityNode_),this.children_.isEmpty()&&me(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return ne(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||__}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?__:t}},{key:"getChild",value:function(e){var t=Fk(e);return null===t?this:this.getImmediateChild(t).getChild(Vk(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(me(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new n_(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?__:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=Fk(e);if(null===n)return t;me(".priority"!==Fk(e)||1===Uk(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Vk(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(b_,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+m_(this.getPriority().val())+":"),this.forEachChild(b_,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Uy(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new n_(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new n_(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new n_(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,n_.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,n_.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===N_?-1:0}},{key:"withIndex",value:function(t){if(t===a_||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===a_||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(b_),r=t.getIterator(b_),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===a_?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return __||(__=new e(new c_(f_),null,S_.Default))}}]),e}();I_.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var N_=new(function(e){ae(n,e);var t=ce(n);function n(){return ee(this,n),t.call(this,new c_(f_),I_.EMPTY_NODE,S_.Default)}return ne(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return I_.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(I_));Object.defineProperties(n_,{MIN:{value:new n_(Qy,I_.EMPTY_NODE)},MAX:{value:new n_(Xy,N_)}}),i_.__EMPTY_NODE=I_.EMPTY_NODE,y_.__childrenNodeConstructor=I_,u_=N_,function(e){v_=e}(N_);function R_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return I_.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),me(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new y_(n,R_(t))}if(e instanceof Array){var r=I_.EMPTY_NODE;return rk(e,(function(t,n){if(Ue(e,t)&&"."!==t.substring(0,1)){var i=R_(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(R_(t))}var i=[],a=!1,o=e;if(rk(o,(function(e,t){if("."!==e.substring(0,1)){var n=R_(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new n_(e,n)))}})),0===i.length)return I_.EMPTY_NODE;var s=C_(i,h_,(function(e){return e.name}),f_);if(a){var u=C_(i,b_.getCompare());return new I_(s,R_(t),new S_({".priority":u},{".priority":b_}))}return new I_(s,R_(t),S_.Default)}!function(e){p_=e}(R_);var D_=function(e){ae(n,e);var t=ce(n);function n(e){var r;return ee(this,n),(r=t.call(this)).indexPath_=e,me(!Wk(e)&&".priority"!==Fk(e),"Can't create PathIndex with empty path or .priority key"),r}return ne(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Jy(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=R_(e),r=I_.EMPTY_NODE.updateChild(this.indexPath_,n);return new n_(t,r)}},{key:"maxPost",value:function(){var e=I_.EMPTY_NODE.updateChild(this.indexPath_,N_);return new n_(Xy,e)}},{key:"toString",value:function(){return zk(this.indexPath_,0).join("/")}}]),n}(r_),P_=function(e){ae(n,e);var t=ce(n);function n(){return ee(this,n),t.apply(this,arguments)}return ne(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?Jy(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return n_.MIN}},{key:"maxPost",value:function(){return n_.MAX}},{key:"makePost",value:function(e,t){var n=R_(e);return new n_(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(r_),A_=new P_,O_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){var e=0,t=[]}();function M_(e){return{type:"value",snapshotNode:e}}function L_(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function j_(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function F_(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var U_=function(){function e(){ee(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=b_}return ne(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return me(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return me(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Qy}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return me(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return me(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xy}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return me(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===b_}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function V_(e){var t,n={};return e.isDefault()||(e.index_===b_?t="$priority":e.index_===A_?t="$value":e.index_===a_?t="$key":(me(e.index_ instanceof D_,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=je(t),e.startSet_&&(n.startAt=je(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+je(e.indexStartName_))),e.endSet_&&(n.endAt=je(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+je(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function B_(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==b_&&(t.i=e.index_.toString()),t}var z_=function(e){ae(n,e);var t=ce(n);function n(e,r,i,a){var o;return ee(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=Wy("p:rest:"),o.listens_={},o}return ne(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var l=V_(e._queryParams);this.restRequest_(o+".json",l,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Ve(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=V_(e._queryParams),r=e._path.toString(),i=new Ce;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=o(i,2),s=a[0],u=a[1];s&&s.accessToken&&(n.auth=s.accessToken),u&&u.token&&(n.ac=u.token);var l=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+We(n);t.log_("Sending REST request for "+l);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=Le(c.responseText)}catch(n){Yy("Failed to parse JSON response for "+l+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&Yy("Got unsuccessful REST response for "+l+" Status: "+c.status),r(c.status);r=null}},c.open("GET",l,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(me(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(Ak),q_=function(){function e(){ee(this,e),this.rootNode_=I_.EMPTY_NODE}return ne(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function H_(){return{value:null,children:new Map}}function W_(e,t,n){if(Wk(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Fk(t);e.children.has(r)||e.children.set(r,H_()),W_(e.children.get(r),t=Vk(t),n)}}function K_(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){K_(r,new Lk(t.toString()+"/"+e),n)}))}var G_,Y_=function(){function e(t){ee(this,e),this.collection_=t,this.last_=null}return ne(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&rk(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),$_=function(){function e(t,n){ee(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Y_(t);var r=1e4+2e4*Math.random();ck(this.reportStats_.bind(this),Math.floor(r))}return ne(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;rk(t,(function(t,i){i>0&&Ue(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),ck(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Q_(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(G_||(G_={}));var X_,J_=function(){function e(t,n,r){ee(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=G_.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return ne(e,[{key:"operationForChild",value:function(t){if(Wk(this.path)){if(null!=this.affectedTree.value)return me(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Lk(t));return new e(jk(),n,this.revert)}return me(Fk(this.path)===t,"operationForChild called for unrelated child."),new e(Vk(this.path),this.affectedTree,this.revert)}}]),e}(),Z_=function(){function e(t,n,r){ee(this,e),this.source=t,this.path=n,this.snap=r,this.type=G_.OVERWRITE}return ne(e,[{key:"operationForChild",value:function(t){return Wk(this.path)?new e(this.source,jk(),this.snap.getImmediateChild(t)):new e(this.source,Vk(this.path),this.snap)}}]),e}(),ew=function(){function e(t,n,r){ee(this,e),this.source=t,this.path=n,this.children=r,this.type=G_.MERGE}return ne(e,[{key:"operationForChild",value:function(t){if(Wk(this.path)){var n=this.children.subtree(new Lk(t));return n.isEmpty()?null:n.value?new Z_(this.source,jk(),n.value):new e(this.source,jk(),n)}return me(Fk(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Vk(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),tw=function(){function e(t,n,r){ee(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return ne(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Wk(e))return this.isFullyInitialized()&&!this.filtered_;var t=Fk(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}();function nw(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw ge("Should only compare child_ events.");var r=new n_(t.childName,t.snapshotNode),i=new n_(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function rw(e,t){return{eventCache:e,serverCache:t}}function iw(e,t,n,r){return rw(new tw(t,n,r),e.serverCache)}function aw(e,t,n,r){return rw(e.eventCache,new tw(t,n,r))}function ow(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function sw(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var uw=function(){return X_||(X_=new c_(Zy)),X_},lw=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uw();ee(this,e),this.value=t,this.children=n}return ne(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:jk(),value:this.value};if(Wk(e))return null;var n=Fk(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Vk(e),t);return null!=i?{path:Hk(new Lk(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Wk(t))return this;var n=Fk(t),r=this.children.get(n);return null!==r?r.subtree(Vk(t)):new e(null)}},{key:"set",value:function(t,n){if(Wk(t))return new e(n,this.children);var r=Fk(t),i=(this.children.get(r)||new e(null)).set(Vk(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Wk(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Fk(t),r=this.children.get(n);if(r){var i,a=r.remove(Vk(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Wk(e))return this.value;var t=Fk(e),n=this.children.get(t);return n?n.get(Vk(e)):null}},{key:"setTree",value:function(t,n){if(Wk(t))return n;var r,i=Fk(t),a=(this.children.get(i)||new e(null)).setTree(Vk(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(jk(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Hk(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,jk(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Wk(e))return null;var i=Fk(e),a=this.children.get(i);return a?a.findOnPath_(Vk(e),Hk(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,jk(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Wk(t))return this;this.value&&r(n,this.value);var i=Fk(t),a=this.children.get(i);return a?a.foreachOnPath_(Vk(t),Hk(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(jk(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Hk(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return rk(t,(function(e,t){n=n.set(new Lk(e),t)})),n}}]),e}(),cw=function(){function e(t){ee(this,e),this.writeTree_=t}return ne(e,null,[{key:"empty",value:function(){return new e(new lw(null))}}]),e}();function hw(e,t,n){if(Wk(t))return new cw(new lw(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=Kk(i,t);return a=a.updateChild(o,n),new cw(e.writeTree_.set(i,a))}var s=new lw(n),u=e.writeTree_.setTree(t,s);return new cw(u)}function fw(e,t,n){var r=e;return rk(n,(function(e,n){r=hw(r,Hk(t,e),n)})),r}function dw(e,t){if(Wk(t))return cw.empty();var n=e.writeTree_.setTree(t,new lw(null));return new cw(n)}function pw(e,t){return null!=vw(e,t)}function vw(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Kk(n.path,t)):null}function mw(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(b_,(function(e,n){t.push(new n_(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new n_(e,n.value))})),t}function gw(e,t){if(Wk(t))return e;var n=vw(e,t);return new cw(null!=n?new lw(n):e.writeTree_.subtree(t))}function yw(e){return e.writeTree_.isEmpty()}function kw(e,t){return _w(jk(),e.writeTree_,t)}function _w(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(me(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=_w(Hk(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Hk(e,".priority"),r)),n}function ww(e,t){return Mw(t,e)}function bw(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function xw(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));me(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&Ew(s,r.path)?i=!1:Yk(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=Tw(e.allWrites,Cw,jk()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=dw(e.visibleWrites,r.path):rk(r.children,(function(t){e.visibleWrites=dw(e.visibleWrites,Hk(r.path,t))}));return!0}return!1}function Ew(e,t){if(e.snap)return Yk(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Yk(Hk(e.path,n),t))return!0;return!1}function Cw(e){return e.visible}function Tw(e,t,n){for(var r=cw.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)Yk(n,o)?r=hw(r,s=Kk(n,o),a.snap):Yk(o,n)&&(s=Kk(o,n),r=hw(r,jk(),a.snap.getChild(s)));else{if(!a.children)throw ge("WriteRecord should have .snap or .children");if(Yk(n,o))r=fw(r,s=Kk(n,o),a.children);else if(Yk(o,n))if(Wk(s=Kk(o,n)))r=fw(r,jk(),a.children);else{var u=Ve(a.children,Fk(s));if(u){var l=u.getChild(Vk(s));r=hw(r,jk(),l)}}}}}return r}function Sw(e,t,n,r,i){if(r||i){var a=gw(e.visibleWrites,t);if(!i&&yw(a))return n;if(i||null!=n||pw(a,jk())){return kw(Tw(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Yk(e.path,t)||Yk(t,e.path))}),t),n||I_.EMPTY_NODE)}return null}var o=vw(e.visibleWrites,t);if(null!=o)return o;var s=gw(e.visibleWrites,t);return yw(s)?n:null!=n||pw(s,jk())?kw(s,n||I_.EMPTY_NODE):null}function Iw(e,t,n,r){return Sw(e.writeTree,e.treePath,t,n,r)}function Nw(e,t){return function(e,t,n){var r=I_.EMPTY_NODE,i=vw(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(b_,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=gw(e.visibleWrites,t);return n.forEachChild(b_,(function(e,t){var n=kw(gw(a,new Lk(e)),t);r=r.updateImmediateChild(e,n)})),mw(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return mw(gw(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Rw(e,t,n,r){return function(e,t,n,r,i){me(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Hk(t,n);if(pw(e.visibleWrites,a))return null;var o=gw(e.visibleWrites,a);return yw(o)?i.getChild(n):kw(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Dw(e,t){return function(e,t){return vw(e.visibleWrites,t)}(e.writeTree,Hk(e.treePath,t))}function Pw(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=gw(e.visibleWrites,t),l=vw(u,jk());if(null!=l)s=l;else{if(null==n)return[];s=kw(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),f=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=f.getNext();d&&c.length<i;)0!==h(d,r)&&c.push(d),d=f.getNext();return c}(e.writeTree,e.treePath,t,n,r,i,a)}function Aw(e,t,n){return function(e,t,n,r){var i=Hk(t,n),a=vw(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?kw(gw(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Ow(e,t){return Mw(Hk(e.treePath,t),e.writeTree)}function Mw(e,t){return{treePath:e,writeTree:t}}var Lw=function(){function e(){ee(this,e),this.changeMap=new Map}return ne(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;me("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),me(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,F_(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,j_(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,L_(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw ge("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,F_(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),jw=new(function(){function e(){ee(this,e)}return ne(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),Fw=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;ee(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return ne(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new tw(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Aw(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:sw(this.viewCache_),i=Pw(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function Uw(e,t,n,r,i){var a,o,s=new Lw;if(n.type===G_.OVERWRITE){var u=n;u.source.fromUser?a=zw(e,t,u.path,u.snap,r,i,s):(me(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!Wk(u.path),a=Bw(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===G_.MERGE){var l=n;l.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var l=Hk(n,r);qw(t,Fk(l))&&(s=zw(e,s,l,u,i,a,o))})),r.foreach((function(r,u){var l=Hk(n,r);qw(t,Fk(l))||(s=zw(e,s,l,u,i,a,o))})),s}(e,t,l.path,l.children,r,i,s):(me(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),a=Ww(e,t,l.path,l.children,r,i,o,s))}else if(n.type===G_.ACK_USER_WRITE){var c=n;a=c.revert?function(e,t,n,r,i,a){var o;if(null!=Dw(r,n))return t;var s,u=new Fw(r,t,i),l=t.eventCache.getNode();if(Wk(n)||".priority"===Fk(n)){var c;if(t.serverCache.isFullyInitialized())c=Iw(r,sw(t));else{var h=t.serverCache.getNode();me(h instanceof I_,"serverChildren would be complete if leaf node"),c=Nw(r,h)}c=c,s=e.filter.updateFullNode(l,c,a)}else{var f=Fk(n),d=Aw(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=l.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(l,f,d,Vk(n),u,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(l,f,I_.EMPTY_NODE,Vk(n),u,a):l).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Iw(r,sw(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=Dw(r,jk()),iw(t,s,o,e.filter.filtersNodes())}(e,t,c.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=Dw(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(Wk(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Bw(e,t,n,u.getNode().getChild(n),i,a,s,o);if(Wk(n)){var l=new lw(null);return u.getNode().forEachChild(a_,(function(e,t){l=l.set(new Lk(e),t)})),Ww(e,t,n,l,i,a,s,o)}return t}var c=new lw(null);return r.foreach((function(e,t){var r=Hk(n,e);u.isCompleteForPath(r)&&(c=c.set(e,u.getNode().getChild(r)))})),Ww(e,t,n,c,i,a,s,o)}(e,t,c.path,c.affectedTree,r,i,s)}else{if(n.type!==G_.LISTEN_COMPLETE)throw ge("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=aw(t,a.getNode(),a.isFullyInitialized()||Wk(n),a.isFiltered());return Vw(e,o,n,r,jw,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=ow(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(M_(ow(t)))}}(t,a,h),{viewCache:a,changes:h}}function Vw(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=Dw(r,n))return t;if(Wk(n))if(me(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var l=sw(t),c=Nw(r,l instanceof I_?l:I_.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),c,a)}else{var h=Iw(r,sw(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=Fk(n);if(".priority"===f){me(1===Uk(n),"Can't have a priority with additional path components");var d=u.getNode(),p=Rw(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,m=Vk(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var g=Rw(r,n,u.getNode(),s);v=null!=g?u.getNode().getImmediateChild(f).updateChild(m,g):u.getNode().getImmediateChild(f)}else v=Aw(r,f,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),f,v,m,i,a):u.getNode()}}return iw(t,o,u.isFullyInitialized()||Wk(n),e.filter.filtersNodes())}function Bw(e,t,n,r,i,a,o,s){var u,l=t.serverCache,c=o?e.filter:e.filter.getIndexedFilter();if(Wk(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){var h=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),h,null)}else{var f=Fk(n);if(!l.isCompleteForPath(n)&&Uk(n)>1)return t;var d=Vk(n),p=l.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?c.updatePriority(l.getNode(),p):c.updateChild(l.getNode(),f,p,d,jw,null)}var v=aw(t,u,l.isFullyInitialized()||Wk(n),c.filtersNodes());return Vw(e,v,n,i,new Fw(i,v,a),s)}function zw(e,t,n,r,i,a,o){var s,u,l=t.eventCache,c=new Fw(i,t,a);if(Wk(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=iw(t,u,!0,e.filter.filtersNodes());else{var h=Fk(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=iw(t,u,l.isFullyInitialized(),l.isFiltered());else{var f,d=Vk(n),p=l.getNode().getImmediateChild(h);if(Wk(d))f=r;else{var v=c.getCompleteChild(h);f=null!=v?".priority"===Bk(d)&&v.getChild(qk(d)).isEmpty()?v:v.updateChild(d,r):I_.EMPTY_NODE}if(p.equals(f))s=t;else s=iw(t,e.filter.updateChild(l.getNode(),h,f,d,c,o),l.isFullyInitialized(),e.filter.filtersNodes())}}return s}function qw(e,t){return e.eventCache.isCompleteForChild(t)}function Hw(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Ww(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,l=t;u=Wk(n)?r:new lw(null).setTree(n,r);var c=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(c.hasChild(n)){var u=Hw(0,t.serverCache.getNode().getImmediateChild(n),r);l=Bw(e,l,new Lk(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!c.hasChild(n)&&!u){var h=Hw(0,t.serverCache.getNode().getImmediateChild(n),r);l=Bw(e,l,new Lk(n),h,i,a,o,s)}})),l}var Kw;function Gw(e,t){var n=sw(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Wk(t)&&!n.getImmediateChild(Fk(t)).isEmpty())?n.getChild(t):null}function Yw(e,t,n,r){t.type===G_.MERGE&&null!==t.source.queryId&&(me(sw(e.viewCache_),"We should always have a full cache before handling merges"),me(ow(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=Uw(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,me(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),me(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),me(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,$w(e,s.changes,s.viewCache.eventCache.getNode(),null)}function $w(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),nw(e,i,"child_removed",t,r,n),nw(e,i,"child_added",t,r,n),nw(e,i,"child_moved",a,r,n),nw(e,i,"child_changed",t,r,n),nw(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var Qw;function Xw(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return me(null!=a,"SyncTree gave us an op for an invalid query."),Yw(a,t,n,r)}var o,s=[],u=J(e.views.values());try{for(u.s();!(o=u.n()).done;){var l=o.value;s=s.concat(Yw(l,t,n,r))}}catch(c){u.e(c)}finally{u.f()}return s}function Jw(e,t){var n,r=null,i=J(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||Gw(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}var Zw=ne((function e(t){ee(this,e),this.listenProvider_=t,this.syncPointTree_=new lw(null),this.pendingWriteTree_={visibleWrites:cw.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function eb(e,t,n,r,i){return function(e,t,n,r,i){me(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=hw(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?ib(e,new Z_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function tb(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=bw(e.pendingWriteTree_,t),i=xw(e.pendingWriteTree_,t);if(i){var a=new lw(null);return null!=r.snap?a=a.set(jk(),!0):rk(r.children,(function(e){a=a.set(new Lk(e),!0)})),ib(e,new J_(r.path,a,n))}return[]}function nb(e,t,n){return ib(e,new Z_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function rb(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Jw(n,Kk(e,t));if(r)return r}));return Sw(r,t,i,n,!0)}function ib(e,t){return ab(t,e.syncPointTree_,null,ww(e.pendingWriteTree_,jk()))}function ab(e,t,n,r){if(Wk(e.path))return ob(e,t,n,r);var i=t.get(jk());null==n&&null!=i&&(n=Jw(i,jk()));var a=[],o=Fk(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var l=n?n.getImmediateChild(o):null,c=Ow(r,o);a=a.concat(ab(s,u,l,c))}return i&&(a=a.concat(Xw(i,e,r,n))),a}function ob(e,t,n,r){var i=t.get(jk());null==n&&null!=i&&(n=Jw(i,jk()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=Ow(r,t),u=e.operationForChild(t);u&&(a=a.concat(ob(u,i,o,s)))})),i&&(a=a.concat(Xw(i,e,r,n))),a}function sb(e,t){return e.tagToQueryMap.get(t)}function ub(e){var t=e.indexOf("$");return me(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Lk(e.substr(0,t))}}function lb(e,t,n){var r=e.syncPointTree_.get(t);return me(r,"Missing sync point for query tag that we're tracking"),Xw(r,n,ww(e.pendingWriteTree_,t),null)}var cb=function(){function e(t){ee(this,e),this.node_=t}return ne(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),hb=function(){function e(t,n){ee(this,e),this.syncTree_=t,this.path_=n}return ne(e,[{key:"getImmediateChild",value:function(t){var n=Hk(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return rb(this.syncTree_,this.path_)}}]),e}(),fb=function(e,t,n){return e&&"object"===typeof e?(me(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?db(e[".sv"],t,n):"object"===typeof e[".sv"]?pb(e[".sv"],t):void me(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},db=function(e,t,n){if("timestamp"===e)return n.timestamp;me(!1,"Unexpected server value: "+e)},pb=function(e,t,n){e.hasOwnProperty("increment")||me(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&me(!1,"Unexpected increment value: "+r);var i=t.node();if(me(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},vb=function(e,t,n,r){return gb(t,new hb(n,e),r)},mb=function(e,t,n){return gb(e,new cb(t),n)};function gb(e,t,n){var r,i=e.getPriority().val(),a=fb(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=fb(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new y_(s,R_(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new y_(a))),u.forEachChild(b_,(function(e,i){var a=gb(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var yb=ne((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};ee(this,e),this.name=t,this.parent=n,this.node=r}));function kb(e,t){for(var n=t instanceof Lk?t:new Lk(t),r=e,i=Fk(n);null!==i;){var a=Ve(r.node.children,i)||{children:{},childCount:0};r=new yb(i,r,a),i=Fk(n=Vk(n))}return r}function _b(e){return e.node.value}function wb(e,t){e.node.value=t,Tb(e)}function bb(e){return e.node.childCount>0}function xb(e,t){rk(e.node.children,(function(n,r){t(new yb(n,e,r))}))}function Eb(e,t,n,r){n&&!r&&t(e),xb(e,(function(e){Eb(e,t,!0,r)})),n&&r&&t(e)}function Cb(e){return new Lk(null===e.parent?e.name:Cb(e.parent)+"/"+e.name)}function Tb(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===_b(e)&&!bb(e)}(n),i=Ue(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Tb(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Tb(e))}(e.parent,e.name,e)}var Sb=/[\[\].#$\/\u0000-\u001F\u007F]/,Ib=/[\[\].#$\u0000-\u001F\u007F]/,Nb=10485760,Rb=function(e){return"string"===typeof e&&0!==e.length&&!Sb.test(e)},Db=function(e){return"string"===typeof e&&0!==e.length&&!Ib.test(e)},Pb=function e(t,n,r){var i=r instanceof Lk?new $k(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Xk(i));if("function"===typeof n)throw new Error(t+"contains a function "+Xk(i)+" with contents = "+n.toString());if($y(n))throw new Error(t+"contains "+n.toString()+" "+Xk(i));if("string"===typeof n&&n.length>Nb/3&&Je(n)>Nb)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+Xk(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(rk(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!Rb(n)))throw new Error(t+" contains an invalid key ("+n+") "+Xk(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,u;u=n,(s=i).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(u),s.byteLength_+=Je(u),Qk(s),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Je(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Xk(i)+" in addition to actual children.")}},Ab=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Rb(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Db(e)}(n))throw new Error(Xe(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Ob=ne((function e(){ee(this,e),this.eventLists_=[],this.recursionDepth_=0}));function Mb(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Gk(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function Lb(e,t,n){Mb(e,n),jb(e,(function(e){return Yk(e,t)||Yk(t,e)}))}function jb(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Fb(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Fb(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();By&&Hy("event: "+n.toString()),lk(r)}}}var Ub="repo_interrupt",Vb=function(){function e(t,n,r,i){ee(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ob,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=H_(),this.transactionQueueTree_=new yb,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return ne(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function Bb(e,t,n){if(e.stats_=xk(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new z_(e.repoInfo_,(function(t,n,r,i){Hb(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return Wb(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{je(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new e_(e.repoInfo_,t,(function(t,n,r,i){Hb(e,t,n,r,i)}),(function(t){Wb(e,t)}),(function(t){!function(e,t){rk(t,(function(t,n){Kb(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return bk[n]||(bk[n]=t()),bk[n]}(e.repoInfo_,(function(){return new $_(e.stats_,e.server_)})),e.infoData_=new q_,e.infoSyncTree_=new Zw({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=nb(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),Kb(e,"connected",!1),e.serverSyncTree_=new Zw({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);Lb(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function zb(e){var t=e.infoData_.getNode(new Lk(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function qb(e){return(t=(t={timestamp:zb(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Hb(e,t,n,r,i){e.dataUpdateCount++;var a=new Lk(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=ze(n,(function(e){return R_(e)}));o=function(e,t,n,r){var i=sb(e,r);if(i){var a=ub(i),o=a.path,s=a.queryId,u=Kk(o,t),l=lw.fromObject(n);return lb(e,o,new ew(Q_(s),u,l))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=R_(n);o=function(e,t,n,r){var i=sb(e,r);if(null!=i){var a=ub(i),o=a.path,s=a.queryId,u=Kk(o,t);return lb(e,o,new Z_(Q_(s),u,n))}return[]}(e.serverSyncTree_,a,u,i)}else if(r){var l=ze(n,(function(e){return R_(e)}));o=function(e,t,n){var r=lw.fromObject(n);return ib(e,new ew({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,l)}else{var c=R_(n);o=nb(e.serverSyncTree_,a,c)}var h=a;o.length>0&&(h=Zb(e,a)),Lb(e.eventQueue_,h,o)}function Wb(e,t){Kb(e,"connected",t),!1===t&&function(e){$b(e,"onDisconnectEvents");var t=qb(e),n=H_();K_(e.onDisconnect_,jk(),(function(r,i){var a=vb(r,i,e.serverSyncTree_,t);W_(n,r,a)}));var r=[];K_(n,jk(),(function(t,n){r=r.concat(nb(e.serverSyncTree_,t,n));var i=ix(e,t);Zb(e,i)})),e.onDisconnect_=H_(),Lb(e.eventQueue_,jk(),r)}(e)}function Kb(e,t,n){var r=new Lk("/.info/"+t),i=R_(n);e.infoData_.updateSnapshot(r,i);var a=nb(e.infoSyncTree_,r,i);Lb(e.eventQueue_,r,a)}function Gb(e){return e.nextWriteId_++}function Yb(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Ub)}function $b(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Hy.apply(void 0,[t].concat(r))}function Qb(e,t,n){return rb(e.serverSyncTree_,t,n)||I_.EMPTY_NODE}function Xb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||rx(e,t),_b(t)){var n=tx(e,t);me(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&Jb(e,Cb(t),n)}else bb(t)&&xb(t,(function(t){Xb(e,t)}))}function Jb(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=Qb(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];me(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var l=Kk(t,u.path);a=a.updateChild(l,u.currentOutputSnapshotRaw)}var c=a.val(!0),h=t;e.server_.put(h.toString(),c,(function(r){$b(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(tb(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);rx(e,kb(e.transactionQueueTree_,t)),Xb(e,e.transactionQueueTree_),Lb(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)lk(a[u])}else{if("datastale"===r)for(var l=0;l<n.length;l++)3===n[l].status?n[l].status=4:n[l].status=0;else{Yy("transaction at "+h.toString()+" failed: "+r);for(var c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=r}Zb(e,t)}}),o)}function Zb(e,t){var n=ex(e,t),r=Cb(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u=t[a],l=Kk(n,u.path),c=!1,h=void 0;if(me(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)c=!0,h=u.abortReason,i=i.concat(tb(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)c=!0,h="maxretry",i=i.concat(tb(e.serverSyncTree_,u.currentWriteId,!0));else{var f=Qb(e,u.path,o);u.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){Pb("transaction failed: Data returned ",d,u.path);var p=R_(d);"object"===typeof d&&null!=d&&Ue(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=u.currentWriteId,m=qb(e),g=mb(p,f,m);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=g,u.currentWriteId=Gb(e),o.splice(o.indexOf(v),1),i=(i=i.concat(eb(e.serverSyncTree_,u.path,g,u.currentWriteId,u.applyLocally))).concat(tb(e.serverSyncTree_,v,!0))}else c=!0,h="nodata",i=i.concat(tb(e.serverSyncTree_,u.currentWriteId,!0))}Lb(e.eventQueue_,n,i),i=[],c&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},u=0;u<t.length;u++)s(u);rx(e,e.transactionQueueTree_);for(var l=0;l<r.length;l++)lk(r[l]);Xb(e,e.transactionQueueTree_)}(e,tx(e,n),r),r}function ex(e,t){var n,r=e.transactionQueueTree_;for(n=Fk(t);null!==n&&void 0===_b(r);)r=kb(r,n),n=Fk(t=Vk(t));return r}function tx(e,t){var n=[];return nx(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function nx(e,t,n){var r=_b(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);xb(t,(function(t){nx(e,t,n)}))}function rx(e,t){var n=_b(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,wb(t,n.length>0?n:void 0)}xb(t,(function(t){rx(e,t)}))}function ix(e,t){var n=Cb(ex(e,t)),r=kb(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){ax(e,t)})),ax(e,r),Eb(r,(function(t){ax(e,t)})),n}function ax(e,t){var n=_b(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(me(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(me(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(tb(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?wb(t,void 0):n.length=a+1,Lb(e.eventQueue_,Cb(t),i);for(var s=0;s<r.length;s++)lk(r[s])}}var ox=function(e,t){var n=sx(e),r=n.namespace;"firebase.com"===n.domain&&Gy(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Gy("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Yy("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new yk(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new Lk(n.pathString)}},sx=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var l=e.indexOf("//");l>=0&&(s=e.substring(0,l-1),e=e.substring(l+2));var c=e.indexOf("/");-1===c&&(c=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(c,h)),c<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(c,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=J(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Yy("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(l=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(l+1),10)):l=t.length;var d=t.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},ux=function(){function e(t,n,r,i){ee(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return ne(e,[{key:"key",get:function(){return Wk(this._path)?null:Bk(this._path)}},{key:"ref",get:function(){return new lx(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=B_(this._queryParams),t=tk(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return B_(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=Ze(t))instanceof e))return!1;var n=this._repo===t._repo,r=Gk(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var lx=function(e){ae(n,e);var t=ce(n);function n(e,r){return ee(this,n),t.call(this,e,r,new U_,!1)}return ne(n,[{key:"parent",get:function(){var e=qk(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(ux);!function(e){me(!Kw,"__referenceConstructor has already been defined"),Kw=e}(lx),function(e){me(!Qw,"__referenceConstructor has already been defined"),Qw=e}(lx);var cx={},hx=!1;function fx(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Gy("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hy("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=ox(a,i),u=s.repoInfo,l=void 0;"undefined"!==typeof process&&(l={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),l?(o=!0,a="http://".concat(l,"?ns=").concat(u.namespace),u=(s=ox(a,i)).repoInfo):o=!s.repoInfo.secure;var c=i&&o?new dk(dk.OWNER):new fk(e.name,e.options,t);Ab("Invalid Firebase Database URL",s),Wk(s.path)||Gy("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=cx[t.name];i||(i={},cx[t.name]=i);var a=i[e.toURLString()];a&&Gy("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new Vb(e,hx,n,r),i[e.toURLString()]=a,a}(u,e,c,new hk(e.name,n));return new dx(h,e)}var dx=function(){function e(t,n){ee(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return ne(e,[{key:"_repo",get:function(){return this._instanceStarted||(Bb(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new lx(this._repo,jk())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=cx[t];n&&n[e.key]===e||Gy("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Yb(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Gy("Cannot call "+e+" on a deleted database.")}}]),e}();e_.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},e_.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){Dy=e}(At),It(new at("database",(function(e,t){var n=t.instanceIdentifier;return fx(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Mt(Ny,Ry,e),Mt(Ny,Ry,"esm2017")}();var px=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:xt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Dt.create("bad-app-name",{appName:String(i)});var a=Ct.get(i);if(a){if(qe(e,a.options)&&qe(r,a.config))return a;throw Dt.create("duplicate-app",{appName:i})}var o,s=new ct(i),u=J(Tt.values());try{for(u.s();!(o=u.n()).done;){var l=o.value;s.addComponent(l)}}catch(h){u.e(h)}finally{u.f()}var c=new Pt(e,r,s);return Ct.set(i,c),c}({apiKey:"AIzaSyBDkp08kxPn4IZ74PeyH5S3iUZo6R7dEWY",authDomain:"reactbase-f9ce5.firebaseapp.com",projectId:"reactbase-f9ce5",storageBucket:"reactbase-f9ce5.appspot.com",messagingSenderId:"928559675325",appId:"1:928559675325:web:aba5bbbdae1b00579984d4"}),vx=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot(),t=Nt(e,"auth");return t.isInitialized()?t.getImmediate():mn(e,{popupRedirectResolver:eo,persistence:[Xi,Ti,Ii]})}(px),mx=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot();return Nt(e,"firestore").getImmediate()}(px),gx={},yx=new Zr,kx=function(){var e=Y(Q().mark((function e(){var t,n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,da(vx,yx);case 3:return t=e.sent,n=t.user,r=vy(Ig(mx,"users"),gy("uid","==",n.uid)),e.next=8,Ey(r);case 8:if(0!==e.sent.docs.length){e.next=12;break}return e.next=12,Sy(Ig(mx,"users"),{uid:n.uid,name:n.displayName,authProvider:"google",email:n.email});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),_x=function(){var e=Y(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wi(vx,t,n);case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0),console.log(e.t0.message),alert("Probl\xe8me de connexion");case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),wx=function(){var e=Y(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=Ig(mx,"users"),e.next=4,ki(vx,n,r);case 4:return a=e.sent,o=a.user,e.next=8,Cy(Ng(i,t),{uid:o.uid,name:t,authProvider:"local",email:n,projects:gx});case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),bx=function(){var e=Y(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gi(vx,t);case 3:alert("Password reset link sent!"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),xx=function(){!function(e){Ze(e).signOut()}(vx)};function Ex(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(t){a(t)}}function s(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function Cx(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var Tx=function(){return Tx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Tx.apply(this,arguments)},Sx=function(e){return{loading:void 0===e||null===e,value:e}},Ix=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return Tx(Tx({},e),{error:t.error,loading:!1,value:void 0});case"reset":return Sx(t.defaultValue);case"value":return Tx(Tx({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),Sx(n)),i=r[0],a=r[1],o=function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})},s=function(e){a({type:"error",error:e})},u=function(e){a({type:"value",value:e})};return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:s,setValue:u,value:i.value}}),[i.error,i.loading,o,s,u,i.value])},Nx=function(e,n){var r=Ix((function(){return e.currentUser})),i=r.error,a=r.loading,o=r.setError,s=r.setValue,u=r.value;(0,t.useEffect)((function(){var t=function(e,t,n,r){return Ze(e).onAuthStateChanged(t,n,r)}(e,(function(e){return Ex(void 0,void 0,void 0,(function(){var t;return Cx(this,(function(r){switch(r.label){case 0:if(!(null===n||void 0===n?void 0:n.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),o(t),[3,4];case 4:return s(e),[2]}}))}))}),o);return function(){t()}}),[e]);var l=[u,a,i];return(0,t.useMemo)((function(){return l}),l)},Rx=n(872);var Dx=function(){var e=o((0,t.useState)(""),2),n=e[0],r=e[1],i=o((0,t.useState)(""),2),a=i[0],s=i[1],u=o(Nx(vx),3),l=u[0],c=u[1],h=(u[2],T());return(0,t.useEffect)((function(){c||l&&h("/dashboard")}),[l,c]),(0,Rx.jsx)("div",{className:"login",children:(0,Rx.jsxs)("div",{className:"form",children:[(0,Rx.jsx)("h1",{children:"CONNEXION"}),(0,Rx.jsxs)("div",{className:"inputs",children:[(0,Rx.jsx)("br",{}),(0,Rx.jsx)("label",{children:"Email"}),(0,Rx.jsx)("input",{value:n,onChange:function(e){return r(e.target.value)},placeholder:"Entrez votre email"}),(0,Rx.jsx)("label",{children:"Mot de Pass"}),(0,Rx.jsx)("input",{value:a,onChange:function(e){return s(e.target.value)},type:"password",placeholder:"Entrez votre mot de pass"})]}),(0,Rx.jsxs)("div",{className:"btn",children:[(0,Rx.jsx)("div",{className:"con",children:(0,Rx.jsx)("button",{onClick:function(){return _x(n,a)},type:"submit",children:"Se connecter"})}),(0,Rx.jsx)("div",{className:"con-google",children:(0,Rx.jsx)("button",{onClick:kx,type:"submit",children:"Se connecter avec Google"})})]}),(0,Rx.jsxs)("div",{className:"forget",children:[(0,Rx.jsx)("div",{className:"forget-pass",children:(0,Rx.jsx)(K,{to:"/reset",children:"Mot de pass oublier"})}),(0,Rx.jsxs)("p",{children:["Je n'ai pas de compte ",(0,Rx.jsx)(K,{to:"/register",children:" Cr\xe9er un compte"})]})]})]})})};var Px=function(){var e=o((0,t.useState)(""),2),n=e[0],r=e[1],i=o((0,t.useState)(""),2),a=i[0],s=i[1],u=o((0,t.useState)(""),2),l=u[0],c=u[1],h=o(Nx(vx),3),f=h[0],d=h[1],p=(h[2],T());return(0,t.useEffect)((function(){d||f&&p("/dashboard")}),[f,d]),(0,Rx.jsx)("div",{className:"register",children:(0,Rx.jsxs)("div",{className:"form",children:[(0,Rx.jsx)("h1",{children:"INSCRIPTION"}),(0,Rx.jsxs)("div",{className:"inputs",children:[(0,Rx.jsx)("br",{}),(0,Rx.jsx)("label",{children:"Nom"}),(0,Rx.jsx)("input",{value:l,onChange:function(e){return c(e.target.value)},placeholder:"Entrez votre nom"}),(0,Rx.jsx)("label",{children:"Prenom"}),(0,Rx.jsx)("input",{placeholder:"Entrez votre prenom"}),(0,Rx.jsx)("label",{children:"Sexe"}),(0,Rx.jsxs)("select",{children:[(0,Rx.jsx)("option",{children:"Femme"}),(0,Rx.jsx)("option",{children:"Homme"})]}),(0,Rx.jsx)("label",{children:"Email"}),(0,Rx.jsx)("input",{value:n,onChange:function(e){return r(e.target.value)},placeholder:"Entrez votre email"}),(0,Rx.jsx)("label",{children:"Mot de Passe"}),(0,Rx.jsx)("input",{value:a,onChange:function(e){return s(e.target.value)},type:"password",placeholder:"Entrez un mot de pass"})]}),(0,Rx.jsxs)("div",{className:"btn",children:[(0,Rx.jsx)("div",{className:"con",children:(0,Rx.jsx)("button",{onClick:function(){l||alert("Please enter name"),wx(l,n,a)},children:"S'inscrire"})}),(0,Rx.jsx)("div",{className:"con-google",children:(0,Rx.jsx)("button",{onClick:kx,children:"S'inscrire avec Google"})})]}),(0,Rx.jsxs)("div",{className:"already",children:["J'ai deja un compte",(0,Rx.jsx)(K,{to:"/Login",children:"Me connecter"})," now."]})]})})};var Ax=function(){var e=o((0,t.useState)(""),2),n=e[0],r=e[1],i=o(Nx(vx),3),a=i[0],s=i[1],u=(i[2],T());return(0,t.useEffect)((function(){s||a&&u("/dashboard")}),[a,s]),(0,Rx.jsx)("div",{className:"reset",children:(0,Rx.jsxs)("div",{className:"reset__container",children:[(0,Rx.jsx)("input",{type:"text",className:"reset__textBox",value:n,onChange:function(e){return r(e.target.value)},placeholder:"E-mail Address"}),(0,Rx.jsx)("button",{className:"reset__btn",onClick:function(){return bx(n)},children:"Send password reset email"}),(0,Rx.jsxs)("div",{children:["Don't have an account? ",(0,Rx.jsx)(K,{to:"/register",children:"Register"})," now."]})]})})};var Ox=function(){var e=o(Nx(vx),3),n=e[0],r=e[1],i=(e[2],o((0,t.useState)(""),2)),a=(i[0],i[1]),s=o((0,t.useState)(""),2),u=(s[0],s[1]),l=o((0,t.useState)(""),2),c=l[0],h=l[1],f=o((0,t.useState)(""),2),d=(f[0],f[1],T()),p=function(){var e=Y(Q().mark((function e(){var t,r,i,a,s,l,c,f,d,p,v;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=vy(Ig(mx,"users"),gy("uid","==",null===n||void 0===n?void 0:n.uid)),e.next=4,Ey(t);case 4:for(r=e.sent,i=r.docs[0].data(),u(i.projects),console.log(i.projects),a=[],s=0,l=Object.entries(i.projects);s<l.length;s++)c=o(l[s],2),f=c[0],d=c[1],p="".concat(f,": ").concat(d.name),a.push(p),console.log(a),console.log(a),v=a.map((function(e){return(0,Rx.jsx)("div",{children:(0,Rx.jsx)("div",{class:"blocitem",children:(0,Rx.jsx)("div",{class:"item1",children:(0,Rx.jsx)("button",{children:(0,Rx.jsx)("a",{className:"recent-a",href:"/project?".concat(e),children:e.split(":")[1]})})})})})})),h(v);e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),alert("An error occured while fetching user data");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Y(Q().mark((function e(){var t,r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=vy(Ig(mx,"users"),gy("uid","==",null===n||void 0===n?void 0:n.uid)),e.next=4,Ey(t);case 4:r=e.sent,i=r.docs[0].data(),a(i.name),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),alert("An error occured while fetching user data");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,t.useEffect)((function(){if(!r){if(!n)return d("/");p(),v()}}),[n,r]),(0,Rx.jsx)(Rx.Fragment,{children:(0,Rx.jsxs)("div",{className:"main-dash",children:[(0,Rx.jsxs)("header",{className:"header-dash",children:[(0,Rx.jsx)("div",{className:"header-logo",children:(0,Rx.jsx)("a",{href:"/",className:"logo",children:(0,Rx.jsx)("img",{alt:"",src:"images/icone/logo.svg"})})}),(0,Rx.jsx)("div",{className:"nav",children:(0,Rx.jsxs)("ul",{className:"navigation",children:[(0,Rx.jsx)("li",{children:(0,Rx.jsx)("button",{children:"Acceuil"})}),(0,Rx.jsx)("li",{children:(0,Rx.jsx)("button",{children:"A Propos"})}),(0,Rx.jsx)("li",{children:(0,Rx.jsx)("button",{children:"Langue"})}),(0,Rx.jsx)("li",{children:(0,Rx.jsx)("button",{onClick:xx,children:"Se deconnecter"})})]})}),(0,Rx.jsxs)("div",{className:"toggle",children:[(0,Rx.jsx)("i",{class:"ouvrir",children:(0,Rx.jsx)("img",{alt:"",src:"icone/menu.png"})}),(0,Rx.jsx)("i",{class:"fermer",children:(0,Rx.jsx)("img",{alt:"",src:"icone/fermer-la-croix.png"})})]})]}),(0,Rx.jsxs)("section",{className:"home-dash",children:[(0,Rx.jsx)("div",{class:"container",children:(0,Rx.jsx)("div",{class:"item-dash",children:(0,Rx.jsx)("button",{children:(0,Rx.jsx)(K,{to:"/create_project",children:"CREER UN PROJET"})})})}),(0,Rx.jsxs)("div",{class:"container2",children:[(0,Rx.jsx)("div",{class:"title",children:"Projet recent"}),(0,Rx.jsx)("div",{children:c})]})]})]})})},Mx=function(){var e=function(){var e=Y(Q().mark((function e(){var t,n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=vy(Ig(mx,"users"),gy("uid","==",null===u||void 0===u?void 0:u.uid)),e.next=4,Ey(t);case 4:n=e.sent,r=n.docs[0].data(),a(r.projects),console.log(r.projects),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),alert("An error occured while fetching user data");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Y(Q().mark((function e(){var t,n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=vy(Ig(mx,"users"),gy("uid","==",null===u||void 0===u?void 0:u.uid)),e.next=4,Ey(t);case 4:n=e.sent,r=n.docs[0].data(),f(r.name),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),alert("An error occured while fetching user data");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),r=o((0,t.useState)(""),2),i=r[0],a=r[1],s=o(Nx(vx),3),u=s[0],l=s[1],c=(s[2],o((0,t.useState)(""),2)),h=c[0],f=c[1],d=o((0,t.useState)(""),2),p=d[0],v=d[1],m=o((0,t.useState)(""),2),g=(m[0],m[1],o((0,t.useState)(""),2)),y=g[0],k=g[1],_=o((0,t.useState)(""),2),w=_[0],b=_[1],x=o((0,t.useState)(""),2),E=x[0],C=x[1],S=o((0,t.useState)(""),2),I=S[0],N=S[1],R=o((0,t.useState)(""),2),D=R[0],P=R[1],A=T();(0,t.useEffect)((function(){if(!l){if(!u)return A("/");e(),n()}}),[u,l]);var O=function(){var t=Y(Q().mark((function t(){var n,r,a,o,s;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n={name:y,responsable:w,date_start:E,date_end:I,description:D},r=Ng(mx,"users",h),0!=Object.entries(i).length){t.next=16;break}return 1,v(1),console.log(1),i[1]=n,console.log(i),t.next=12,Ty(r,{projects:i});case 12:console.log("ok new project set"),alert("Projet cr\xe9er avec succes"),t.next=27;break;case 16:return console.log(i),a=Object.entries(i),o=a.length,s=parseInt(parseInt(o)+1),v(parseInt(parseInt(o)+1)),i[s]=n,console.log(s),t.next=25,Ty(r,{projects:i});case 25:console.log("not new project but set"),alert("Projet cr\xe9er avec succes");case 27:e(),t.next=34;break;case 30:t.prev=30,t.t0=t.catch(0),console.error(t.t0),console.log(t.t0.message);case 34:case"end":return t.stop()}}),t,null,[[0,30]])})));return function(){return t.apply(this,arguments)}}();return(0,t.useEffect)((function(){if(!l)return u?void 0:A("/")}),[u,l]),(0,Rx.jsx)(Rx.Fragment,{children:(0,Rx.jsxs)("div",{className:"form",children:[(0,Rx.jsx)("h5",{children:"Nouveau projet"}),(0,Rx.jsxs)("div",{className:"inputs",children:[(0,Rx.jsx)("input",{onChange:function(e){return k(e.target.value)},type:"text",placeholder:"Nom du projet",title:"Donner un nom au projet"}),(0,Rx.jsx)("input",{onChange:function(e){return b(e.target.value)},type:"text",placeholder:"Responsable",title:"Donner le nom du responsable"}),(0,Rx.jsx)("input",{onChange:function(e){return C(e.target.value)},type:"date",placeholder:"Date de debut",title:"Choisisser la date de debut"}),(0,Rx.jsx)("input",{onChange:function(e){return N(e.target.value)},type:"date",placeholder:"Date de fin",title:"Choisisser la date de fin"}),(0,Rx.jsx)("input",{onChange:function(e){return P(e.target.value)},type:"text",placeholder:"Description",title:"Donner une description au projet"})]}),(0,Rx.jsxs)("div",{className:"valide",children:[(0,Rx.jsx)("button",{onClick:O,className:"ok",type:"submit",children:"Creer"}),(0,Rx.jsx)("a",{className:"help",href:"/project?".concat(p),children:"Ouvrir"}),(0,Rx.jsx)("a",{className:"annuler",type:"submit",href:"/dashboard",children:"Annuler"})]})]})})};n(766);function Lx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fx(e,t,n){return t&&jx(e.prototype,t),n&&jx(e,n),e}function Ux(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vx(Object(n),!0).forEach((function(t){Ux(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zx(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hx(e,t)}function qx(e){return(qx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hx(e,t){return(Hx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kx(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Wx(e):t}function Gx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qx(e);if(t){var i=qx(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Kx(this,n)}}function Yx(e,t,n){return(Yx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qx(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function $x(e,t){if(e){if("string"==typeof e)return Qx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qx(e,t):void 0}}function Qx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xx,Jx=(function(e){!function(){var t={}.hasOwnProperty;function n(){for(var e=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var a=typeof i;if("string"===a||"number"===a)e.push(i);else if(Array.isArray(i)&&i.length){var o=n.apply(null,i);o&&e.push(o)}else if("object"===a)for(var s in i)t.call(i,s)&&i[s]&&e.push(s)}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n}()}(Xx={exports:{}}),Xx.exports);function Zx(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}Zx(".Header-module_table__3u_KP {\n  position: relative;\n  width: 100%;\n  box-shadow: var(--wx-grid-header-shadow);\n  background-color: #fff;\n  z-index: 1;\n}\n\n.Header-module_row__3oqKd {\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  border-bottom: 1px solid var(--wx-border-color);\n}\n\n.Header-module_cell__1Jwvz {\n  box-sizing: border-box;\n  flex: 0 0 auto;\n  padding: 0 5px;\n  font: var(--wx-grid-header-font);\n  text-transform: var(--wx-grid-header-text-transform);\n  color: var(--wx-grid-header-font-color);\n}\n\n.Header-module_add__YoNyR {\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  background: var(--wx-add-btn-icon) center center no-repeat;\n  opacity: 0.54;\n  cursor: pointer;\n}\n\n.Header-module_add__YoNyR:hover {\n  opacity: 1;\n}\n\n.Header-module_menu__31GrD {\n  cursor: pointer;\n  font-size: 20px;\n  color: var(--wx-button-primary-color);\n}\n");var eE={__dates:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}};function tE(){return{_:function(e){return eE[e]||e},__:function(e,t){var n=eE[e];return n&&n[t]||t},extend:function(e){return eE=Bx(Bx({},eE),e),this}}}var nE=t.createContext(tE()),rE=function(e){zx(r,t.Component);var n=Gx(r);function r(){return Lx(this,r),n.apply(this,arguments)}return Fx(r,[{key:"cellStyle",value:function(e){var t={textAlign:e.align};return"100%"===e.width?t.flex=1:t.width=e.width,t}},{key:"render",value:function(){var e=this,n=this.props,r=n.compactMode,i=n.columns,a=n.height,o=n.action,s=this.context.__;return t.createElement("div",{className:"Header-module_table__3u_KP"},t.createElement("div",{className:"Header-module_row__3oqKd",style:{height:a}},i.map((function(n){return t.createElement("div",{key:n.name,className:"Header-module_cell__1Jwvz",style:e.cellStyle(n)},n.action?r?t.createElement("span",{className:Jx("Header-module_menu__31GrD","mdi","mdi-menu"),onClick:function(){return o({action:"toggle-grid"})}}):t.createElement("span",{className:"Header-module_add__YoNyR",onClick:function(){return o({action:"add-task",id:0})}}):s("gantt",n.label))}))))}}]),r}();function iE(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function aE(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function oE(e){aE(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function sE(e,t){aE(2,arguments);var n=oE(e),r=iE(t);return isNaN(r)?new Date(NaN):r?(n.setDate(n.getDate()+r),n):n}function uE(e,t){aE(2,arguments);var n=oE(e),r=iE(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var i=n.getDate(),a=new Date(n.getTime());a.setMonth(n.getMonth()+r+1,0);var o=a.getDate();return i>=o?a:(n.setFullYear(a.getFullYear(),a.getMonth(),i),n)}function lE(e,t){aE(2,arguments);var n=oE(e).getTime(),r=iE(t);return new Date(n+r)}function cE(e){return e.getTime()%6e4}function hE(e){var t=new Date(e.getTime()),n=Math.ceil(t.getTimezoneOffset());return t.setSeconds(0,0),6e4*n+(n>0?(6e4+cE(t))%6e4:cE(t))}function fE(e){aE(1,arguments);var t=oE(e);return t.setHours(0,0,0,0),t}function dE(e,t){aE(2,arguments);var n=fE(e),r=fE(t),i=n.getTime()-hE(n),a=r.getTime()-hE(r);return Math.round((i-a)/864e5)}function pE(e,t){aE(2,arguments);var n=oE(e),r=oE(t),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function vE(e){aE(1,arguments);var t=oE(e);return!isNaN(t)}function mE(e,t){aE(2,arguments);var n=oE(e),r=oE(t),i=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return 12*i+a}function gE(e,t){aE(2,arguments);var n=oE(e),r=oE(t);return n.getFullYear()-r.getFullYear()}function yE(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function kE(e,t){aE(2,arguments);var n=oE(e),r=oE(t),i=yE(n,r),a=Math.abs(dE(n,r));n.setDate(n.getDate()-i*a);var o=yE(n,r)===-i,s=i*(a-o);return 0===s?0:s}function _E(e,t){aE(2,arguments);var n=oE(e),r=oE(t);return n.getTime()-r.getTime()}function wE(e){aE(1,arguments);var t=oE(e);return t.setHours(23,59,59,999),t}function bE(e){aE(1,arguments);var t=oE(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function xE(e){aE(1,arguments);var t=oE(e);return wE(t).getTime()===bE(t).getTime()}function EE(e,t){aE(2,arguments);var n=oE(e),r=oE(t),i=pE(n,r),a=Math.abs(mE(n,r));1===n.getMonth()&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*a);var o=pE(n,r)===-i;xE(oE(e))&&1===a&&1===pE(e,r)&&(o=!1);var s=i*(a-o);return 0===s?0:s}rE.contextType=nE;var CE={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function TE(e){return function(t){var n=t||{},r=n.width?String(n.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var SE={date:TE({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:TE({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:TE({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},IE={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function NE(e){return function(t,n){var r,i=n||{};if("formatting"===(i.context?String(i.context):"standalone")&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,o=i.width?String(i.width):a;r=e.formattingValues[o]||e.formattingValues[a]}else{var s=e.defaultWidth,u=i.width?String(i.width):e.defaultWidth;r=e.values[u]||e.values[s]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function RE(e){return function(t,n){var r=String(t),i=n||{},a=i.width,o=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],s=r.match(o);if(!s)return null;var u,l=s[0],c=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth];return u="[object Array]"===Object.prototype.toString.call(c)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}(c,(function(e){return e.test(l)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}(c,(function(e){return e.test(l)})),u=e.valueCallback?e.valueCallback(u):u,{value:u=i.valueCallback?i.valueCallback(u):u,rest:r.slice(l.length)}}}var DE,PE={code:"en-US",formatDistance:function(e,t,n){var r;return n=n||{},r="string"==typeof CE[e]?CE[e]:1===t?CE[e].one:CE[e].other.replace("{{count}}",t),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r},formatLong:SE,formatRelative:function(e,t,n,r){return IE[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:NE({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:NE({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:NE({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:NE({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:NE({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(DE={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e,t){var n=String(e),r=t||{},i=n.match(DE.matchPattern);if(!i)return null;var a=i[0],o=n.match(DE.parsePattern);if(!o)return null;var s=DE.valueCallback?DE.valueCallback(o[0]):o[0];return{value:s=r.valueCallback?r.valueCallback(s):s,rest:n.slice(a.length)}}),era:RE({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:RE({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:RE({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:RE({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:RE({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function AE(e,t){aE(2,arguments);var n=iE(t);return lE(e,-n)}function OE(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}function ME(e){aE(1,arguments);var t=1,n=oE(e),r=n.getUTCDay(),i=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function LE(e){aE(1,arguments);var t=oE(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=ME(r),a=new Date(0);a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0);var o=ME(a);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function jE(e){aE(1,arguments);var t=LE(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=ME(n);return r}function FE(e,t){aE(1,arguments);var n=t||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,a=null==i?0:iE(i),o=null==n.weekStartsOn?a:iE(n.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=oE(e),u=s.getUTCDay(),l=(u<o?7:0)+u-o;return s.setUTCDate(s.getUTCDate()-l),s.setUTCHours(0,0,0,0),s}function UE(e,t){aE(1,arguments);var n=oE(e,t),r=n.getUTCFullYear(),i=t||{},a=i.locale,o=a&&a.options&&a.options.firstWeekContainsDate,s=null==o?1:iE(o),u=null==i.firstWeekContainsDate?s:iE(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var l=new Date(0);l.setUTCFullYear(r+1,0,u),l.setUTCHours(0,0,0,0);var c=FE(l,t),h=new Date(0);h.setUTCFullYear(r,0,u),h.setUTCHours(0,0,0,0);var f=FE(h,t);return n.getTime()>=c.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function VE(e,t){aE(1,arguments);var n=t||{},r=n.locale,i=r&&r.options&&r.options.firstWeekContainsDate,a=null==i?1:iE(i),o=null==n.firstWeekContainsDate?a:iE(n.firstWeekContainsDate),s=UE(e,t),u=new Date(0);u.setUTCFullYear(s,0,o),u.setUTCHours(0,0,0,0);var l=FE(u,t);return l}var BE={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return OE("yy"===t?r%100:r,t.length)}(e,t)},Y:function(e,t,n,r){var i=UE(e,r),a=i>0?i:1-i;return"YY"===t?OE(a%100,2):"Yo"===t?n.ordinalNumber(a,{unit:"year"}):OE(a,t.length)},R:function(e,t){return OE(LE(e),t.length)},u:function(e,t){return OE(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return OE(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return OE(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):OE(n+1,2)}(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return OE(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=function(e,t){aE(1,arguments);var n=oE(e),r=FE(n,t).getTime()-VE(n,t).getTime();return Math.round(r/6048e5)+1}(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):OE(i,t.length)},I:function(e,t,n){var r=function(e){aE(1,arguments);var t=oE(e),n=ME(t).getTime()-jE(t).getTime();return Math.round(n/6048e5)+1}(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):OE(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):function(e,t){return OE(e.getUTCDate(),t.length)}(e,t)},D:function(e,t,n){var r=function(e){aE(1,arguments);var t=oE(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),i=n-r;return Math.floor(i/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):OE(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return OE(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return OE(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return OE(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?"noon":0===i?"midnight":i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?"evening":i>=12?"afternoon":i>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return function(e,t){return OE(e.getUTCHours()%12||12,t.length)}(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):function(e,t){return OE(e.getUTCHours(),t.length)}(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):OE(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):OE(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):function(e,t){return OE(e.getUTCMinutes(),t.length)}(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):function(e,t){return OE(e.getUTCSeconds(),t.length)}(e,t)},S:function(e,t){return function(e,t){var n=t.length,r=e.getUTCMilliseconds();return OE(Math.floor(r*Math.pow(10,n-3)),t.length)}(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return qE(i);case"XXXX":case"XX":return HE(i);default:return HE(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return qE(i);case"xxxx":case"xx":return HE(i);default:return HE(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+zE(i,":");default:return"GMT"+HE(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+zE(i,":");default:return"GMT"+HE(i,":")}},t:function(e,t,n,r){var i=r._originalDate||e;return OE(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,r){return OE((r._originalDate||e).getTime(),t.length)}};function zE(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),a=r%60;if(0===a)return n+String(i);var o=t||"";return n+String(i)+o+OE(a,2)}function qE(e,t){return e%60==0?(e>0?"-":"+")+OE(Math.abs(e)/60,2):HE(e,t)}function HE(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+OE(Math.floor(i/60),2)+n+OE(i%60,2)}function WE(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}}function KE(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}}var GE={p:KE,P:function(e,t){var n,r=e.match(/(P+)(p+)?/),i=r[1],a=r[2];if(!a)return WE(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",WE(i,t)).replace("{{time}}",KE(a,t))}},YE=["D","DD"],$E=["YY","YYYY"];function QE(e){return-1!==YE.indexOf(e)}function XE(e){return-1!==$E.indexOf(e)}function JE(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var ZE=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,eC=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tC=/^'([^]*?)'?$/,nC=/''/g,rC=/[a-zA-Z]/;function iC(e,t,n){aE(2,arguments);var r=String(t),i=n||{},a=i.locale||PE,o=a.options&&a.options.firstWeekContainsDate,s=null==o?1:iE(o),u=null==i.firstWeekContainsDate?s:iE(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var l=a.options&&a.options.weekStartsOn,c=null==l?0:iE(l),h=null==i.weekStartsOn?c:iE(i.weekStartsOn);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!a.localize)throw new RangeError("locale must contain localize property");if(!a.formatLong)throw new RangeError("locale must contain formatLong property");var f=oE(e);if(!vE(f))throw new RangeError("Invalid time value");var d=hE(f),p=AE(f,d),v={firstWeekContainsDate:u,weekStartsOn:h,locale:a,_originalDate:f},m=r.match(eC).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,GE[t])(e,a.formatLong,v):e})).join("").match(ZE).map((function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return aC(n);var o=BE[r];if(o)return!i.useAdditionalWeekYearTokens&&XE(n)&&JE(n,t,e),!i.useAdditionalDayOfYearTokens&&QE(n)&&JE(n,t,e),o(p,n,a.localize,v);if(r.match(rC))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n})).join("");return m}function aC(e){return e.match(tC)[1].replace(nC,"'")}var oC={year:function(e,t){aE(2,arguments);var n=oE(e),r=oE(t),i=pE(n,r),a=Math.abs(gE(n,r));n.setFullYear("1584"),r.setFullYear("1584");var o=pE(n,r)===-i,s=i*(a-o);return 0===s?0:s},quarter:function(e,t){aE(2,arguments);var n=EE(e,t)/3;return n>0?Math.floor(n):Math.ceil(n)},month:EE,week:function(e,t){aE(2,arguments);var n=kE(e,t)/7;return n>0?Math.floor(n):Math.ceil(n)},day:dE,hour:function(e,t){aE(2,arguments);var n=_E(e,t)/36e5;return n>0?Math.floor(n):Math.ceil(n)}},sC={year:function(e,t){aE(2,arguments);var n=iE(t);return uE(e,12*n)},month:uE,week:function(e,t){aE(2,arguments);var n=iE(t),r=7*n;return sE(e,r)},day:sE,hour:function(e,t){aE(2,arguments);var n=iE(t);return lE(e,36e5*n)}};function uC(e){return oC[e]}function lC(e){return sC[e]}var cC=uC("day"),hC=lC("day");function fC(e,t,n,r,i){e.setAttribute("width",(t*r).toString()),e.setAttribute("height",(n*r).toString());var a=e.getContext("2d");return a.translate(-.5,-.5),a.strokeStyle=i,a}function dC(e,t,n,r,i,a){e.beginPath(),e.moveTo(r,i),e.lineTo(r,a),"full"===t&&e.lineTo(n,a),e.stroke()}function pC(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.$level=t,r.data&&pC(r.data,t+1)}}function vC(e){var t=[];return mC(e[0].data,t),t}function mC(e,t){e.forEach((function(e){t.push(e),!0===e.open&&mC(e.data,t)}))}function gC(e,t,n){var r=e[t],i=e[r.parent],a=i.data.indexOf(r);return r=Object.assign(Object.assign({},r),n),i.data[a]=e[t]=r,e}var yC=lC("day"),kC=uC("day"),_C=function(){function e(t,n){ee(this,e),this._dispatch=t,this._updater=n,this._cache=[]}return ne(e,[{key:"init",value:function(e){var t=e.tasks,n=e.links,r=e.start,i=e.end;this._data=this._data||{},this._cache.tasks!==t&&(this._data.tasks=t,this._data.tasksMap=function(e){var t={id:0,$level:0,data:[]},n={0:t};return e.forEach((function(e){n[e.id]=e,"string"==typeof e.start_date&&(e.start_date=new Date(e.start_date)),"string"==typeof e.end_date&&(e.end_date=new Date(e.end_date)),e.duration&&(e.duration=1*e.duration),e.parent=e.parent||0,e.open=e.open||!1,e.data=null})),e.forEach((function(e){var t=n[e.parent];t&&(t.data||(t.data=[]),t.data.push(e))})),pC(t.data,1),n}(t)),this._cache.links!==n&&(this._data.links=n),this._cache={links:n,tasks:t},r&&i||(this._autoScale=!0),this._base=Object.assign({},e),this._data.scales=null,this._data.scales=this.calckScales(r,i),this.initStore(),this.update({tasksMap:this._data.tasksMap,links:this._data.links,scales:this._data.scales})}},{key:"calckScales",value:function(e,t){var n=this._base,r=n.scales,i=n.cellWidth,a=n.scaleHeight,o=e,s=t;return this._autoScale&&function(e,t){for(var n in e)t(e[n])}(this._data.tasksMap,(function(e){(!o||e.start_date<=o)&&(o=e.start_date),(!s||e.end_date>=s)&&(s=e.end_date)})),o?e!==o&&(o=yC(o,-1)):o=new Date,s?t!==s&&(s=yC(s,1)):s=yC(o,30),this._data.scales&&e===o&&t===s?null:function(e,t,n,r,i){var a=uC(function(e){var t=new Date;return e.map((function(e){return{item:e,len:lC(e.unit)(t,1)}})).sort((function(e,t){return e.len<t.len?-1:1}))[0].item}(i).unit),o=a(t,e)*n,s=r*i.length;return{rows:i.map((function(i){for(var o=[],s=lC(i.unit),u=function(e,t){var n;switch(e){case"month":return new Date(t.getFullYear(),t.getMonth(),1);case"year":return new Date(t.getFullYear(),0,1);case"week":return function(e,t){aE(1,arguments);var n=t||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,a=null==i?0:iE(i),o=null==n.weekStartsOn?a:iE(n.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=oE(e),u=s.getDay(),l=(u<o?7:0)+u-o;return s.setDate(s.getDate()-l),s.setHours(0,0,0,0),s}(t,{weekStartsOn:1});case"day":case"hour":return(n=new Date(t.getFullYear(),t.getMonth(),t.getDate())).setHours(0,0,0,0),n;default:return new Date(t)}}(i.unit,e);u<t;){var l=s(u,i.step);u<e&&(u=e),l>t&&(l=t);var c=a(l,u)*n,h="function"==typeof i.format?i.format(u,l):iC(u,i.format,{firstWeekContainsDate:4,weekStartsOn:1}),f="";i.css&&(f+="function"==typeof i.css?i.css(u):i.css),o.push({width:c,value:h,css:f}),u=l}return{cells:o,add:s,height:r}})),width:o,height:s,diff:a,start:e,end:t}}(o,s,i,a,r)}},{key:"updateScales",value:function(){var e=this._data.scales;if(this._autoScale)return this.calckScales(e.start,e.end)}},{key:"getTask",value:function(e){return this._data.tasksMap[e]}},{key:"initStore",value:function(){var e=this._data,t=e.scales,n=e.tasksMap;this.state={tasksMap:n,tasks:[],links:[],scales:t}}},{key:"update",value:function(e){e.tasksMap&&(this._data.tasksMap=e.tasksMap,e.tasks=vC(this._data.tasksMap)),e.scales&&(this._data.scales=e.scales),e.tasks&&(this._data.tasks=this.calckTasks(e.tasks),e.links=e.links||this._data.links),e.links&&(this._data.links=this.calckLinks(e.links)),this.updateStore(e)}},{key:"updateTask",value:function(e,t,n){t.id&&delete(t=Object.assign({ID:t.id},t)).id,this.action(e,"update-task",t,n)}},{key:"updateLink",value:function(e,t,n){t.id&&delete(t=Object.assign({ID:t.id},t)).id,this.action(e,"update-link",t,n)}},{key:"updateStore",value:function(e){var t=this.state,n=this._data,r=e;for(var i in r)r[i]&&t[i]&&(t[i]=n[i])}},{key:"dispatch",value:function(e,t,n){n||this._dispatch(e,t)}},{key:"calckTasks",value:function(e){var t=this,n=this._base,r=n.cellHeight,i=n.cellWidth;return(e||vC(this._data.tasksMap)).map((function(e,n){return function(e,t,n,r,i){var a=i.start,o=i.end,s=i.diff;e.duration?e.end_date||(e.end_date=hC(e.start_date,e.duration)):e.end_date?e.duration=cC(e.end_date,e.start_date):e.end_date=e.start_date;var u=e.start_date<a?a:e.start_date,l=e.end_date>o?o:e.end_date;return e.$x=s(u,a)*n,e.$y=r*t+3,e.$w=s(l,u)*n,e.$h=r-7,"milestone"===e.type&&(e.$x=e.$x-e.$h/2,e.$w=e.$h),e}(e,n,i,r,t._data.scales)}))}},{key:"calckLinks",value:function(e){var t=this,n=this._data.tasksMap;return(e||this._data.links).map((function(e){return function(e,t,n,r){var i=Math.round(r/2)-3;if(!(t&&n&&t.$y&&n.$y))return e.$p="",e;var a=!1,o=!1;switch(e.type){case 0:o=!0;break;case 1:a=!0,o=!0;break;case 3:a=!0}var s,u,l=a?t.$x:t.$x+t.$w,c=t.$y,h=o?n.$x:n.$x+n.$w,f=n.$y;if(l!==h||c!==f){var d=function(e,t,n,r,i,a,o){var s=e+20*(i?-1:1),u=n+20*(a?-1:1),l=[e,t,s,t,0,0,0,0,u,r,n,r],c=u-s,h=r-t,f=a===i;return f||(u<=e&&a||u>e&&!a)&&(h-=o),f&&a&&s>u||f&&!a&&s<u?(l[4]=l[2]+c,l[5]=l[3],l[6]=l[4],l[7]=l[5]+h):(l[4]=l[2],l[5]=l[3]+h,l[6]=l[4]+c,l[7]=l[5]),l.join(",")}(l,c+i,h,f+i,a,o,r/2),p=(s=h,u=f+i,o?"".concat(s-5,",").concat(u-3,",").concat(s-5,",").concat(u+3,",").concat(s,",").concat(u):"".concat(s+5,",").concat(u+3,",").concat(s+5,",").concat(u-3,",").concat(s,",").concat(u));e.$p="".concat(d,",").concat(p)}return e}(e,n[e.source],n[e.target],t._base.cellHeight)})).filter((function(e){return null!==e}))}},{key:"action",value:function(e,t,n,r){var i,a,o,s,u=this,l=this._data,c=l.links,h=l.tasksMap;switch(t){case"delete-link":i=c.find((function(t){return t.id==e})),this.update({links:c.filter((function(t){return t.id!=e}))}),this.dispatch("save",{action:t,obj:i},r);break;case"update-link":var f=c.findIndex((function(t){return t.id==e}));c[f]=Object.assign(Object.assign({},c[f]),n),this.update({links:c}),this.dispatch("save",{action:t,obj:i},r);break;case"toggle-task":for(var d in h)h[d].$y=0;gC(h,e,{open:!h[e].open}),this.update({tasksMap:h});break;case"repaint-task":this.update({tasksMap:h});break;case"reorder-task":var p=n.mode,v=n.target;if("after"===p){var m=h[v];m.open&&m.data.length&&(n.mode=p="before",n.target=v=m.data[0].id)}var g=function(e,t,n,r){var i=e[t],a=e[r];if(i&&a){var o=e[i.parent],s=e[a.parent],u=o.data.indexOf(i);o.data.splice(u,1);var l=s.data.indexOf(a)+("after"===n?1:0);return s.data.splice(l,-1,i),o===s&&u===l?null:(i.parent=s.id,i.$level!==a.$level&&pC([i],a.$level),e)}}(h,e,p,v);this.update({tasksMap:h}),g&&this.dispatch("save",{action:t,obj:n},r);break;case"add-link":i=Object.assign(Object.assign({},n),{id:(new Date).valueOf()}),c.push(i),this.update({links:c}),this.dispatch("save",{action:t,obj:i},r);break;case"update-task":gC(h,e,n),s=this.updateScales(),this.update({tasksMap:h,scales:s}),this.dispatch("save",{action:t,obj:h[e]},r);break;case"move-task":var y=n.width,k=n.left,_=n.top;a=h[e];var w={};void 0!==y&&(a.$w=y),void 0!==k&&(a.$x=k),void 0!==_&&(a.$y=_+4,w.tasks=this._data.tasks),w.links=this._data.links=this.calckLinks(),this.updateStore(w);break;case"update-task-time":var b=n.mode,x=n.time;a=h[e],"start"===b&&(a.start_date=yC(a.start_date,x),a.duration=kC(a.end_date,a.start_date)),"end"===b&&(a.end_date=yC(a.end_date,x),a.duration=kC(a.end_date,a.start_date)),"move"===b&&(a.start_date=yC(a.start_date,x),a.end_date=yC(a.end_date,x)),gC(h,e,a),s=this.updateScales(),this.update({tasksMap:h,scales:s}),this.dispatch("save",{action:"update-task",obj:a},r);break;case"add-task":var E=h[e],C=E.$level?new Date(E.start_date.valueOf()):yC(this._data.scales.start,1),T=yC(C,1),S={id:(new Date).valueOf(),text:"New Task",details:"",start_date:C,end_date:T,progress:0,parent:e,$level:E.$level+1,data:null,open:!1};E.data||(E.data=[]),E.data.push(S),E.open=!0,h[S.id]=S,o=S.id,s=this.updateScales(),this.update({tasksMap:h,scales:s}),this.dispatch("save",{action:t,obj:S,get:function(){return u.getTask(S.id)},mode:"last"},r);break;case"delete-task":a=h[e],function(e,t){var n=e[t],r=e[n.parent];r.data=r.data.filter((function(e){return e!==n})),delete e[t]}(h,e),this.update({tasksMap:h,links:c.filter((function(t){return t.source!=e&&t.target!=e}))}),this.dispatch("save",{action:t,obj:a},r)}return o}}]),e}(),wC=function(){function e(t){var n=this;ee(this,e),this._state={scrollTop:t(0,"scrollTop"),scrollLeft:t(0,"scrollLeft"),dataStart:t(0,"dataStart"),dataEnd:t(0,"dataEnd"),from:t(0,"from"),details:t(null,"details"),selected:t(null,"selected")},this._state.selected.subscribe((function(e){return n._selected=e})),this._state.details.subscribe((function(e){return n._details=e}))}return ne(e,[{key:"getState",value:function(){return this._state}},{key:"actions",value:function(e,t,n){var r=this,i=this._state,a=i.details,o=i.selected,s=i.scrollTop,u=i.scrollLeft,l=i.dataStart,c=i.dataEnd,h=i.from,f=function(t){a.set(Object.assign({},e.getTask(t)))};return function(i){var d=i.id,p=i.action,v=i.obj,m=null;switch(p){case"show-details":f(d);break;case"hide-details":a.set(null),o.set(null);break;case"select-task":o.set(e.getTask(d)),r._details&&r._details.id!=d&&f(d);break;case"toggle-task":e.action(d,p,v),o.set(e.getTask(d));break;case"update-task-time":e.action(d,p,v),r._details&&r._details.id==d&&f(d);break;case"add-task":m=e.action(d,p,v),n().then((function(){o.set(e.getTask(m)),f(m)}));break;case"delete-task":e.action(d,p,v),r._selected.id==d&&o.set(null);break;case"scroll-chart":var g=i.left,y=i.top;isNaN(g)||u.set(g),isNaN(y)||s.set(y);break;case"data-request":l.set(i.start),c.set(i.end),h.set(i.from);break;default:e.action(d,p,v)}t("action",Object.assign(Object.assign({},i),{nId:m}))}}}]),e}(),bC=uC("day");function xC(e){for(var t=!e.tagName&&e.target?e.target:e;t;){if(t.getAttribute&&t.getAttribute("data-id"))return t;t=t.parentNode}return null}function EC(e){var t=xC(e);return t?t.getAttribute("data-id"):null}var CC={table:"Body-module_table__O3j9l",row:"Body-module_row__2eOgf",selected:"Body-module_selected__QOSKf",reorder:"Body-module_reorder__2uHE8",reorderCard:"Body-module_reorderCard__21P0m",cell:"Body-module_cell__sHaB8",content:"Body-module_content__3bnm1",icon:"Body-module_icon__3dAlc",close:"Body-module_close__3uO49",open:"Body-module_open__2xUnV",add:"Body-module_add__3BX3Q"};Zx(".Body-module_table__O3j9l {\n  position: relative;\n  width: 100%;\n  font: var(--wx-grid-body-font);\n  color: var(--wx-grid-body-font-color);\n  touch-action: none;\n}\n\n.Body-module_row__2eOgf {\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n  border-bottom: var(--wx-grid-body-row-border);\n}\n\n.Body-module_row__2eOgf.Body-module_selected__QOSKf {\n  background: var(--wx-gantt-select-color);\n}\n\n.Body-module_reorder__2uHE8 {\n  opacity: 50%;\n}\n\n.Body-module_reorderCard__21P0m {\n  width: 100%;\n  background: white;\n  border-top: var(--wx-grid-body-row-border);\n  opacity: 50%;\n}\n\n.Body-module_cell__sHaB8 {\n  box-sizing: border-box;\n  flex: 0 0 auto;\n  padding: 0 5px;\n  overflow: hidden;\n}\n\n.Body-module_content__3bnm1 {\n  width: 100%;\n  white-space: nowrap;\n  display: flex;\n  justify-content: start;\n  align-items: center;\n}\n\n.Body-module_icon__3dAlc {\n  width: 12px;\n  min-width: 12px;\n  height: 12px;\n  margin: 0 5px;\n  pointer-events: none;\n}\n\n.Body-module_close__3uO49,\n.Body-module_open__2xUnV {\n  cursor: pointer;\n  pointer-events: auto;\n}\n\n.Body-module_close__3uO49 {\n  background: var(--wx-close-btn-icon) center center no-repeat;\n}\n\n.Body-module_open__2xUnV {\n  background: var(--wx-open-btn-icon) center center no-repeat;\n}\n\n.Body-module_add__3BX3Q {\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  background: var(--wx-add-btn-icon) center center no-repeat;\n  opacity: 0.54;\n  cursor: pointer;\n}\n\n.Body-module_row__2eOgf.Body-module_selected__QOSKf .Body-module_add__3BX3Q,\n.Body-module_add__3BX3Q:hover {\n  opacity: 1;\n}\n");var TC=function(e){zx(r,t.Component);var n=Gx(r);function r(){var e;return Lx(this,r),(e=n.call(this)).delta=20,e.scroll=!0,e}return Fx(r,[{key:"componentDidMount",value:function(){var e=this;!function(e,t){var n,r,i,a,o,s,u,l;function c(t){i=t.clientX,a=t.clientY,o=function(e,t,n){var r=e.getBoundingClientRect(),i=t.getBoundingClientRect();return{top:r.top-i.top,left:r.left-i.left,dt:r.bottom-n.clientY,db:n.clientY-r.top}}(n,e,t),document.body.style.userSelect="none"}function h(r){(n=xC(r))&&(l=setTimeout((function(){u=!0,t&&t.touchStart&&t.touchStart(),t&&t.css&&n.classList.add(t.css.reorder),c(r.touches[0])}),500),e.addEventListener("touchmove",m),window.addEventListener("touchend",g),e.addEventListener("contextmenu",f))}function f(e){if(u||l)return e.preventDefault(),!1}function d(t){3!==t.which&&(n=xC(t))&&(e.addEventListener("mousemove",v),window.addEventListener("mouseup",y),c(t))}function p(e){var u=e.clientX-i,l=e.clientY-a;if(!r){if(t&&t.start&&!1===t.start({id:n.dataset.id,e:e}))return;if(Math.abs(u)<5&&Math.abs(l)<5)return;(r=n.cloneNode(!0)).style.pointerEvents="none",r.classList.add(t.css.reorderCard),r.style.position="absolute",r.style.left=o.left+"px",r.style.top=o.top+"px",n.style.visibility="hidden",n.parentNode.insertBefore(r,n)}if(r){var c=Math.max(0,o.top+l);r.style.top=c+"px";var h=xC(document.elementFromPoint(e.clientX,e.clientY));if(h&&h!==n){var f=h.getBoundingClientRect(),d=f.top+f.height/2,p=e.clientY+o.db>d&&h.nextElementSibling!==n,v=e.clientY-o.dt<d&&h.previousElementSibling!==n;if(t&&t.move&&!1===t.move({id:n.dataset.id,top:c,before:v,after:p}))return;return void(p?(h.parentNode.insertBefore(n,h.nextElementSibling),s={id:n.dataset.id,after:h.dataset.id}):v&&(h.parentNode.insertBefore(n,h),s={id:n.dataset.id,before:h.dataset.id}))}t&&t.move&&t.move({id:n.dataset.id,top:c})}}function v(e){p(e)}function m(e){u?(e.preventDefault(),p(e.touches[0])):l&&(clearTimeout(l),l=null)}function g(){u=null,l&&(clearTimeout(l),l=null),k()}function y(){k()}function k(){n&&(n.style.visibility="",n.classList.remove(t.css.reorder)),r&&(r.parentNode.removeChild(r),t&&t.end&&!1===t.end(s||{id:n.dataset.id})&&n.parentNode.removeChild(n)),n=r=o=s=null,function(t){e.removeEventListener("mousemove",v),e.removeEventListener("touchmove",m),window.removeEventListener("mouseup",y),window.removeEventListener("touchend",g),document.body.style.userSelect="",t&&(e.removeEventListener("mousedown",d),e.removeEventListener("touchstart",h))}()}"absolute"!==e.style.position&&(e.style.position="relative"),e.addEventListener("mousedown",d),e.addEventListener("touchstart",h)}(this.node,{start:function(t){return e.startReorder(t)},move:function(t){return e.moveReorder(t)},end:function(t){return e.endReorder(t)},touchStart:function(){return e.endScroll()},css:CC})}},{key:"startReorder",value:function(e){var t=e.id,n=this.props,r=n.tasks,i=n.action;t*=1;var a=r.find((function(e){return e.id===t}));a&&(a.open&&i({id:t,action:"toggle-task"}),i({action:"hide-details"}))}},{key:"moveReorder",value:function(e){var t=e.id,n=e.top,r=this.props,i=r.scrollDelta;(0,r.action)({action:"move-task",id:t,obj:{top:n+i}})}},{key:"endReorder",value:function(e){var t=this.props.action,n=1*e.id,r=e.before,i=e.after,a=1*(r||i);t(a?{id:n,action:"reorder-task",obj:{id:n,mode:r?"before":"after",target:a}}:{id:n,action:"repaint-task"})}},{key:"endScroll",value:function(){this.scroll=!1}},{key:"onClick",value:function(e){var t=EC(e);if(t){var n=e.target.dataset.action;n?(this.props.action({id:t,action:n}),e.preventDefault()):this.props.action({action:"select-task",id:t})}}},{key:"onDblClick",value:function(e){var t=EC(e);t&&this.props.action({action:"show-details",id:t})}},{key:"onWheel",value:function(e){var t=this.props,n=t.scrollTop,r=t.action,i=e.deltaMode?18*e.deltaY:e.deltaY;r({action:"scroll-chart",top:Math.max(0,n+i)})}},{key:"onTouchStart",value:function(e){e.preventDefault(),this.scroll=!0,this.touchY=e.touches[0].clientY+this.props.scrollTop}},{key:"onTouchMove",value:function(e){if(this.scroll){var t=this.touchY-e.touches[0].clientY;return this.props.action({action:"scroll-chart",top:t}),e.preventDefault(),!1}}},{key:"getIcon",value:function(e){return e.data?e.open?"close":"open":""}},{key:"getCellStyle",value:function(e){var t={textAlign:e.align};return"100%"===e.width?t.flex=1:t.width=e.width,t}},{key:"getCellTemplate",value:function(e,n){return"text"===e.name?t.createElement("div",{className:CC.content,style:{paddingLeft:(n.$level-1)*this.delta+"px"}},t.createElement("div",{className:Jx(CC.icon,CC[this.getIcon(n)]),"data-action":"toggle-task"}),e.template(n)):e.action?t.createElement("span",{className:CC.add,"data-action":e.action}):e.template(n)}},{key:"render",value:function(){var e=this,n=this.props,r=n.tasks,i=n.columns,a=n.cellHeight,o=n.scrollTop,s=n.scrollDelta,u=n.selected;return t.createElement("div",{className:CC.table,ref:function(t){return e.node=t},style:{top:-(o-s)},onClick:function(t){return e.onClick(t)},onWheel:function(t){return e.onWheel(t)},onTouchStart:function(t){return e.onTouchStart(t)},onTouchMove:function(t){return e.onTouchMove(t)},onDoubleClick:function(t){return e.onDblClick(t)}},r.map((function(n){return t.createElement("div",{key:n.id,className:Jx(CC.row,Ux({},CC.selected,u&&u.id==n.id)),style:{height:a+"px"},"data-id":n.id},i.map((function(r){return t.createElement("div",{key:r.name,className:CC.cell,style:e.getCellStyle(r)},e.getCellTemplate(r,n))})))})))}}]),r}();Zx(".Grid-module_grid__2VUMH {\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  border-right: 1px solid var(--wx-border-color);\n  overflow: hidden;\n}\n");var SC=function(e){zx(r,t.Component);var n=Gx(r);function r(){var e;return Lx(this,r),(e=n.call(this)).state={showFull:!1},e}return Fx(r,[{key:"componentDidUpdate",value:function(e){this.props.compactMode==e.compactMode||this.props.compactMode||this.setState({showFull:!1})}},{key:"action",value:function(e){if("toggle-grid"===e.action)this.setState({showFull:!this.state.showFull});else this.props.action(e)}},{key:"render",value:function(){var e=this,n=this.props,r=n.compactMode,i=n.width,a=n.tasks,o=n.columns,s=n.scales,u=n.scrollTop,l=n.scrollDelta,c=n.cellHeight,h=n.selected,f=this.state.showFull,d=r?[o[o.length-1]].concat(function(e){return function(e){if(Array.isArray(e))return Qx(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||$x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(o.slice(0,o.length-1))):o,p=f?"100%":"".concat(i,"px");return t.createElement("div",{className:"Grid-module_grid__2VUMH",style:{flex:"0 0 ".concat(p)}},t.createElement(rE,{compactMode:r,columns:d,height:s.height,action:function(t){return e.action(t)}}),t.createElement(TC,{tasks:a,columns:d,cellHeight:c,scrollTop:u,scrollDelta:l,selected:h,action:function(t){return e.action(t)}}))}}]),r}();Zx(".TimeScale-module_scale__3dlEg {\n  position: relative;\n  box-shadow: var(--wx-top-shadow);\n}\n\n.TimeScale-module_row__1Lyi6 {\n  box-sizing: border-box;\n  display: flex;\n  border-bottom: 1px solid var(--wx-border-color);\n}\n\n.TimeScale-module_cell__2VPIM {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-right: var(--wx-timescale-border);\n  font: var(--wx-timescale-font);\n  text-transform: var(--wx-timescale-text-transform);\n  color: var(--wx-timescale-font-color);\n}\n");var IC=function(e){zx(r,t.Component);var n=Gx(r);function r(){return Lx(this,r),n.apply(this,arguments)}return Fx(r,[{key:"render",value:function(){var e=this.props,n=e.scrollLeft,r=e.scales,i=r.rows;return t.createElement("div",{className:"TimeScale-module_scale__3dlEg",style:{left:-n,width:r.width}},i.map((function(e,n){return t.createElement("div",{key:n,className:"TimeScale-module_row__1Lyi6",style:{height:e.height+"px"}},e.cells.map((function(e,n){return t.createElement("div",{key:n,className:Jx("TimeScale-module_cell__2VPIM",e.css),style:{width:e.width}},e.value)})))})))}}]),r}();Zx(".NewLink-module_new__1yN2p {\n  position: relative;\n  pointer-events: none;\n}\n\n.NewLink-module_line__3brVb {\n  stroke: var(--wx-gantt-link-color);\n  stroke-width: 2;\n  fill: none;\n}\n");var NC=function(e){zx(r,t.Component);var n=Gx(r);function r(){return Lx(this,r),n.apply(this,arguments)}return Fx(r,[{key:"render",value:function(){var e=this.props,n=e.layer,r=e.start,i=e.end,a=function(e,t,n){if(t&&n){var r=n.x-t.x,i=n.y-t.y,a=(r>0?t.x:n.x)-e.left,o=(i>0?t.y:n.y)-e.top,s="".concat(r>0?0:-r,",").concat(i>0?0:-i,",").concat(r>0?r:0,",").concat(i>0?i:0);return{width:Math.abs(r),height:Math.abs(i),left:a,top:o,p:s}}return null}(n.getBoundingClientRect(),r,i),o=a.left,s=a.top;return t.createElement(t.Fragment,null,a&&t.createElement("svg",{className:"NewLink-module_new__1yN2p",width:a.width,height:a.height,style:{left:o,top:s}},t.createElement("polyline",{className:"NewLink-module_line__3brVb",points:a.p})))}}]),r}(),RC={bars:"Bars-module_bars__PCKpA",bar:"Bars-module_bar__1_228",touch:"Bars-module_touch__1Yv4i",task:"Bars-module_task__Q4sZx",project:"Bars-module_project__2gAcM",content:"Bars-module_content__2Pqaf",text:"Bars-module_text__1dOoV",textRight:"Bars-module_textRight__257GD",textLeft:"Bars-module_textLeft__3F9CT",milestone:"Bars-module_milestone__3TzjR",progressWrapper:"Bars-module_progressWrapper__3E1_7",progressPercent:"Bars-module_progressPercent__3GpQF",link:"Bars-module_link__1elrT",left:"Bars-module_left__2Tf88",right:"Bars-module_right__1K3Xj"};Zx(".Bars-module_bars__PCKpA {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.Bars-module_bar__1_228 {\n  box-sizing: border-box;\n  position: absolute;\n  border-radius: var(--wx-gantt-bar-border-radius);\n  font: var(--wx-gantt-bar-font);\n  white-space: nowrap;\n  line-height: inherit;\n  text-align: center;\n  cursor: pointer;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\n.Bars-module_bar__1_228.Bars-module_touch__1Yv4i {\n  opacity: 0.5;\n}\n\n.Bars-module_task__Q4sZx {\n  border: 1px solid var(--wx-gantt-task-border-color);\n  border-color: var(--wx-gantt-task-border-color);\n  color: var(--wx-gantt-task-font-color);\n  background-color: var(--wx-gantt-task-color);\n}\n\n.Bars-module_project__2gAcM {\n  border: 1px solid var(--wx-gantt-project-border-color);\n  border-color: var(--wx-gantt-project-border-color);\n  color: var(--wx-gantt-project-font-color);\n  background-color: var(--wx-gantt-project-color);\n}\n\n.Bars-module_content__2Pqaf {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.Bars-module_text__1dOoV {\n  position: relative;\n  z-index: 2;\n  display: inline;\n}\n\n.Bars-module_textRight__257GD,\n.Bars-module_textLeft__3F9CT {\n  position: absolute;\n  line-height: normal;\n  display: block;\n  left: 100%;\n  color: var(--wx-font-color);\n  pointer-events: none;\n  padding: 0 10px;\n}\n\n.Bars-module_textLeft__3F9CT {\n  left: auto;\n  right: 100%;\n}\n\n.Bars-module_milestone__3TzjR .Bars-module_textRight__257GD {\n  padding: 0;\n}\n\n.Bars-module_milestone__3TzjR .Bars-module_content__2Pqaf {\n  height: 100%;\n  background-color: var(--wx-gantt-milestone-color);\n  transform: rotate(45deg) scale(0.75);\n}\n\n.Bars-module_progressWrapper__3E1_7 {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-color: transparent;\n  border-radius: var(--wx-gantt-bar-border-radius);\n  overflow: hidden;\n}\n\n.Bars-module_progressPercent__3GpQF {\n  height: 100%;\n}\n\n.Bars-module_task__Q4sZx .Bars-module_progressPercent__3GpQF {\n  background-color: var(--wx-gantt-task-fill-color);\n}\n\n.Bars-module_project__2gAcM .Bars-module_progressPercent__3GpQF {\n  background-color: var(--wx-gantt-project-fill-color);\n}\n\n.Bars-module_link__1elrT {\n  position: absolute;\n  z-index: 2;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  border: 1px solid #929292;\n  background-color: #f0f0f0;\n  cursor: pointer;\n  user-select: none;\n  opacity: 0;\n}\n\n.Bars-module_link__1elrT.Bars-module_left__2Tf88 {\n  left: -8px;\n}\n\n.Bars-module_link__1elrT.Bars-module_right__1K3Xj {\n  right: -8px;\n}\n\n.Bars-module_bar__1_228:hover .Bars-module_link__1elrT,\n.Bars-module_link__1elrT:hover {\n  opacity: 1;\n}\n\n.Bars-module_milestone__3TzjR .Bars-module_link__1elrT.Bars-module_left__2Tf88 {\n  left: -16px;\n}\n.Bars-module_milestone__3TzjR .Bars-module_link__1elrT.Bars-module_right__1K3Xj {\n  right: -16px;\n}\n");var DC=function(e){zx(r,t.Component);var n=Gx(r);function r(){var e;return Lx(this,r),(e=n.call(this)).taskMove=null,e.ignoreNextClick=!1,e.state={start:null,end:null,touched:!1},e}return Fx(r,[{key:"componentDidMount",value:function(){var e=this;this.layer.addEventListener("touchmove",(function(t){return e.onTouchMove(t)}),{passive:!1})}},{key:"componentWillUnmount",value:function(){this.layer.removeEventListener("touchmove",this.onTouchMove)}},{key:"down",value:function(e,t,n){var r=n.clientX,i=n.clientY,a=e.dataset.id,o=t.classList;if(o.contains("link"))this.setState({start:{id:a,start:o.contains("left"),x:r,y:i}}),this.startDrag();else{var s=this.getMoveMode(e,n)||"move";this.taskMove={id:a,mode:s,node:e,x:r,dx:0,l:parseInt(e.style.left),w:parseInt(e.style.width)},this.startDrag()}}},{key:"getMoveMode",value:function(e,t){if("milestone"===this.getTask(e.dataset.id).type)return"";var n=e.getBoundingClientRect(),r=(t.clientX-n.left)/n.width,i=.2/(n.width>200?n.width/200:1);return r<i?"start":r>1-i?"end":""}},{key:"move",value:function(e,t){var n=t.clientX,r=t.clientY;if(this.state.start)this.setState({end:{x:n,y:r}});else if(this.taskMove&&this.props.drag){var i=this.taskMove,a=i.node,o=i.mode,s=i.l,u=i.w,l=i.x,c=i.id,h=i.start,f=this.taskMove.dx=n-l;if(!h&&Math.abs(f)<20)return;"start"===o?(a.style.left="".concat(s+f,"px"),a.style.width="".concat(u-f,"px")):"end"===o?a.style.width="".concat(u+f,"px"):"move"===o&&(a.style.left="".concat(s+f,"px")),this.taskMove.start=!0,this.props.action({action:"move-task",id:c,obj:{width:parseInt(a.style.width),left:parseInt(a.style.left)}})}else{var d=xC(e);if(d){var p=this.getMoveMode(d,t);d.style.cursor=p?"col-resize":"pointer"}}}},{key:"up",value:function(e){var t=this.state.start;if(t){var n=e.clientX,r=e.clientY,i=t.id,a=t.start;this.setState({start:null,end:null});var o=xC(document.elementFromPoint(n,r));if(!o)return;var s=o.classList,u=o.dataset.id;if(!u||i==u)return;var l=!0;if(s.contains("link"))s.contains("right")&&(l=!1);else{var c=o.getBoundingClientRect();l=n-c.left<c.width/2}var h=(a?1:0)+(l?0:2);this.props.newLink&&this.props.action({action:"add-link",obj:{source:i,target:u,type:h}}),this.endDrag()}else if(this.taskMove){var f=this.taskMove,d=f.id,p=f.mode,v=f.dx,m=f.node,g=f.l,y=f.w,k=f.start;if(this.taskMove=null,!k)return;var _=Math.round(v/this.props.cellWidth);_||(m.style.left="".concat(g,"px"),m.style.width="".concat(y,"px")),this.props.action({action:"update-task-time",id:d,obj:{mode:p,time:_}}),this.ignoreNextClick=!1,this.endDrag()}}},{key:"onMouseDown",value:function(e){var t=xC(e);t&&this.down(t,e.target,e)}},{key:"onMouseMove",value:function(e){this.move(e,e)}},{key:"onMouseUp",value:function(e){this.up(e)}},{key:"onTouchStart",value:function(e){var t=this;e.persist();var n=xC(e);if(n){var r=e.target;this.touchTimer=setTimeout((function(){t.down(n,r,e.touches[0]),t.setState({touched:!0})}),300)}}},{key:"onTouchMove",value:function(e){this.state.touched?(e.preventDefault(),this.move(e,e.touches[0])):this.touchTimer&&(clearTimeout(this.touchTimer),this.touchTimer=null)}},{key:"onTouchEnd",value:function(e){this.setState({touched:null}),this.touchTimer&&(clearTimeout(this.touchTimer),this.touchTimer=null),this.up(e.changedTouches[0])}},{key:"onContextMenu",value:function(e){e.preventDefault()}},{key:"onClick",value:function(e){if(this.ignoreNextClick)this.ignoreNextClick=!0;else{var t=EC(e.target);t&&this.props.action({action:"select-task",id:t})}}},{key:"onDblClick",value:function(e){var t=EC(e.target);t&&this.props.action({action:"show-details",id:t})}},{key:"taskStyle",value:function(e){return{left:"".concat(e.$x,"px"),top:"".concat(e.$y,"px"),width:"".concat(e.$w,"px"),height:"".concat(e.$h,"px")}}},{key:"getTask",value:function(e){return this.props.tasks.find((function(t){return t.id==e}))}},{key:"lineHeight",value:function(){var e=this.props.tasks;return{lineHeight:"".concat(e.length?e[0].$h:0,"px")}}},{key:"startDrag",value:function(){document.body.style.userSelect="none"}},{key:"endDrag",value:function(){document.body.style.userSelect=""}},{key:"render",value:function(){var e=this,n=this.props,r=n.tasks,i=n.templates,a=this.state.touched;return t.createElement("div",{className:Jx(RC.bars,Ux({},RC.touch,a)),style:this.lineHeight(),ref:function(t){return e.layer=t},onContextMenu:function(t){return e.onContextMenu(t)},onMouseDown:function(t){return e.onMouseDown(t)},onMouseMove:function(t){return e.onMouseMove(t)},onMouseUp:function(t){return e.onMouseUp(t)},onTouchStart:function(t){return e.onTouchStart(t)},onTouchEnd:function(t){return e.onTouchEnd(t)},onClick:function(t){return e.onClick(t)},onDoubleClick:function(t){return e.onDblClick(t)},onDragStart:function(){return!1}},r.map((function(n){return t.createElement("div",{key:n.id,className:Jx(RC.bar,RC[n.type||"task"],Ux({},RC.touch,a&&e.taskMove&&e.taskMove.id==n.id)),style:e.taskStyle(n),"data-id":n.id,"data-type":n.type,"data-tooltip-id":n.id},t.createElement("div",{className:Jx(RC.link,RC.left,"link","left")}),"milestone"!==n.type?t.createElement(t.Fragment,null,void 0!==n.progress&&t.createElement("div",{className:RC.progressWrapper},t.createElement("div",{className:RC.progressPercent,style:{width:"".concat(n.progress,"%")}})),n.textLeft&&t.createElement("div",{className:RC.textLeft},n.textLeft),n.textRight&&t.createElement("div",{className:RC.textRight},n.textRight),i.taskText?t.createElement(i.taskText,{data:n}):t.createElement("div",{className:RC.text},n.text)):t.createElement(t.Fragment,null,t.createElement("div",{className:RC.content}),t.createElement("div",{className:RC.textRight},n.text||n.textRight)),t.createElement("div",{className:Jx(RC.link,RC.right,"link","right")}))})),this.state.start&&this.state.end&&this.props.newLink&&t.createElement(NC,{layer:this.layer,start:this.state.start,end:this.state.end}))}}]),r}(),PC=function(e){var n=e.width,r=e.height,i=e.borders,a=e.color,o=void 0===a?"#ebebeb":a,s=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(e,t)||$x(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,t.useState)(null),2),u=s[0],l=s[1];return(0,t.useEffect)((function(){return l(function(e,t,n,r){var i=document.createElement("canvas");if(!document.location.host.match(new RegExp(atob("KF58XC4pKGRodG1seFwuY29tfGdpdGh1YlwuY29tfGdpdGh1YlwuaW98c3RhY2tibGl6XC5jb218c3ZlbHRlXC5kZXYpJA==")))){for(var a=fC(i,e,t,3,n),o=0;o<3;o++)for(var s=0;s<3;s++)dC(a,r,e*o,e*(o+1),t*s,t*(s+1));var u=(new Date).valueOf()>1634909021996;return a.font="10px monospace",a.fillStyle=u?"#ff0000":"#CCCCCC",a.translate(1.5*e,1.5*t),a.rotate(Math.PI/6),a.fillText(u?atob("VFJJQUwgRVhQSVJFRA=="):atob("VFJJQUw="),-15,4),i.toDataURL()}return dC(fC(i,e,t,1,n),r,0,e,0,t),i.toDataURL()}(n,r,o,i))}),[n,r,o,i]),u?t.createElement("div",{style:{width:"100%",height:"100%",backgroundImage:"url(".concat(u,")")}}):null};Zx(".Links-module_links__3BM0d {\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n.Links-module_line__11Bzm {\n  user-select: auto;\n  pointer-events: stroke;\n  position: relative;\n  cursor: pointer;\n  stroke: var(--wx-gantt-link-color);\n  stroke-width: 2;\n  z-index: 0;\n  fill: transparent;\n}\n");var AC=function(e){zx(r,t.Component);var n=Gx(r);function r(){return Lx(this,r),n.apply(this,arguments)}return Fx(r,[{key:"render",value:function(){var e=this.props,n=e.links,r=e.width,i=e.height;return t.createElement("svg",{className:"Links-module_links__3BM0d",style:{width:r,height:i}},n.map((function(e){return t.createElement("polyline",{key:e.id,className:"Links-module_line__11Bzm",points:e.$p})})))}}]),r}();Zx(".Chart-module_chart__1T9rB {\n  flex: 1 1 auto;\n  overflow: auto;\n}\n\n.Chart-module_markers__f5lyr {\n  position: absolute;\n}\n\n.Chart-module_marker__-t3Ju {\n  position: absolute;\n  z-index: 5;\n  width: 2px;\n  height: 100%;\n  text-align: center;\n  user-select: none;\n  transform: scaleX(-1);\n}\n\n.Chart-module_default__3vD9R {\n  background: var(--wx-gantt-marker-color);\n}\n\n.Chart-module_content__2qSlu {\n  position: absolute;\n  min-width: 80px;\n  padding: 4px 8px;\n  border-top-left-radius: 4px;\n  border-bottom-left-radius: 4px;\n  font: var(--wx-gantt-marker-font);\n  color: var(--wx-gantt-marker-font-color);\n  background-color: inherit;\n  white-space: nowrap;\n  transform: scaleX(-1);\n}\n\n.Chart-module_area__3FglT {\n  position: relative;\n}\n\n.Chart-module_selection__3_-9N {\n  position: absolute;\n  box-sizing: border-box;\n  left: 0;\n  width: 100%;\n  background: var(--wx-gantt-select-color);\n}\n");var OC=function(e){zx(r,t.Component);var n=Gx(r);function r(){return Lx(this,r),n.apply(this,arguments)}return Fx(r,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",(function(){return e.dataRequest()})),this.dataRequest()}},{key:"componentDidUpdate",value:function(e){this.props.selected&&this.props.selected!=e.selected&&this.scrollToTask(this.props.selected),this.props.cellHeight!=e.cellHeight&&this.onScroll(),this.chart.scrollTop=this.props.scrollTop,this.chart.scrollLeft=this.props.scrollLeft,this.props.scrollTop!=this.chart.scrollTop&&this.props.action({action:"scroll-chart",top:this.chart.scrollTop})}},{key:"componentWillUnmount",value:function(){var e=this;window.removeEventListener("resize",(function(){return e.dataRequest}))}},{key:"onScroll",value:function(){this.props.action({action:"scroll-chart",top:this.chart.scrollTop,left:this.chart.scrollLeft}),this.dataRequest()}},{key:"dataRequest",value:function(){var e=this.props.cellHeight,t=this.chart?this.chart.clientHeight:0,n=this.chart?this.chart.scrollTop:0,r=Math.ceil(t/e)+1,i=Math.floor(n/e),a=Math.max(0,i),o=i+r,s=a*e;this.props.action({action:"data-request",start:a,end:o,from:s})}},{key:"scrollToTask",value:function(e){var t=this.props,n=t.cellWidth,r=t.cellHeight,i=this.chart,a=i.clientWidth,o=i.clientHeight,s=this.props.scrollLeft,u=this.props.scrollTop;e.$x<=s?s=e.$x-n:e.$x+e.$w>=a+s&&e.$w<a?s=e.$x+e.$w-a+n:e.$w>a&&(s=e.$x-n),e.$y<u?u=e.$y-r:e.$y+e.$h>=o+u&&(u=e.$y-o+r),this.props.action({action:"scroll-chart",top:u,left:s})}},{key:"render",value:function(){var e=this,n=this.props,r=n.drag,i=n.newLink,a=n.markers,o=n.tasks,s=n.links,u=n.selected,l=n.scrollLeft,c=n.cellWidth,h=n.cellHeight,f=n.fullWidth,d=n.fullHeight,p=n.action,v=n.templates,m=n.borders,g=this.chart?this.chart.clientHeight:0,y={width:f,height:d},k={height:d>g?g:d,left:-l},_={height:h-1,top:u?u.$y-3:0};return t.createElement("div",{className:"Chart-module_chart__1T9rB",ref:function(t){return e.chart=t},onScroll:function(){return e.onScroll()}},0!==a.length&&t.createElement("div",{className:"Chart-module_markers__f5lyr",style:k},a.map((function(e){return t.createElement("div",{key:e.id,className:Jx("Chart-module_marker__-t3Ju",e.css||"Chart-module_default__3vD9R"),style:{left:e.left}},t.createElement("div",{className:"Chart-module_content__2qSlu"},e.text))}))),t.createElement("div",{className:"Chart-module_area__3FglT",style:y},t.createElement(PC,{width:c,height:h,borders:m}),u&&t.createElement("div",{className:"Chart-module_selection__3_-9N",style:_}),t.createElement(AC,{links:s,width:f,height:d}),t.createElement(DC,{cellWidth:c,tasks:o,drag:r,newLink:i,templates:v,action:p})))}}]),r}(),MC={btn:"Button-module_btn__2dAs1",primary:"Button-module_primary__3gVZ7",danger:"Button-module_danger__3pd8X"};Zx(".Button-module_btn__2dAs1 {\n  min-width: 82px;\n  padding: 8px 16px;\n  border: none;\n  border-radius: var(--wx-button-radius);\n  font: var(--wx-button-font);\n  text-transform: uppercase;\n  cursor: pointer;\n}\n\n.Button-module_btn__2dAs1:active {\n  outline: none;\n  opacity: 0.7;\n}\n\n.Button-module_btn__2dAs1:focus {\n  outline: none;\n}\n\n.Button-module_primary__3gVZ7 {\n  margin-right: 20px;\n  color: var(--wx-button-primary-font-color);\n  background-color: var(--wx-button-primary-color);\n}\n\n.Button-module_primary__3gVZ7:hover {\n  margin-right: 20px;\n  color: var(--wx-button-primary-font-color);\n  background-color: var(--wx-button-primary-color-hover);\n}\n\n.Button-module_danger__3pd8X {\n  color: var(--wx-button-danger-font-color);\n  background-color: var(--wx-button-danger-color);\n}\n\n.Button-module_danger__3pd8X:hover {\n  background-color: var(--wx-button-danger-color-hover);\n}\n");var LC=function(e){zx(r,t.Component);var n=Gx(r);function r(){return Lx(this,r),n.apply(this,arguments)}return Fx(r,[{key:"render",value:function(){var e=this.props,n=e.appearance,r=void 0===n?"primary":n,i=e.click,a=e.children;return t.createElement("button",{className:Jx(MC.btn,MC[r]),onClick:function(e){return i?i(e):null}},a)}}]),r}();Zx(".Text-module_text__icYKl {\n  margin-bottom: 20px;\n}\n\n.Text-module_label__1_u7m {\n  display: block;\n  margin-bottom: 10px;\n  font: var(--wx-label-font);\n  color: var(--wx-label-font-color);\n}\n\n.Text-module_input__2cj4X {\n  box-sizing: border-box;\n  width: 100%;\n  padding: var(--wx-input-padding);\n  border: var(--wx-input-border);\n  border-radius: var(--wx-input-border-radius);\n  font: var(--wx-input-font);\n  color: var(--wx-input-font-color);\n  outline: none;\n}\n\n.Text-module_input__2cj4X:focus {\n  border: 1px solid var(--wx-input-focus-color);\n}\n");var jC=function(e){zx(r,t.Component);var n=Gx(r);function r(){return Lx(this,r),n.apply(this,arguments)}return Fx(r,[{key:"componentDidMount",value:function(){this.props.autofocus&&this.node.focus()}},{key:"render",value:function(){var e=this,n=this.props,r=n.value,i=void 0===r?"":r,a=n.label,o=void 0===a?"":a,s=n.placeholder,u=void 0===s?"":s,l=n.readonly,c=void 0!==l&&l,h=n.disabled,f=void 0!==h&&h,d=n.change;return t.createElement("div",{className:"Text-module_text__icYKl"},t.createElement("label",{className:"Text-module_label__1_u7m"},o),t.createElement("input",{className:"Text-module_input__2cj4X",ref:function(t){return e.node=t},type:"text",value:i,readOnly:c,disabled:f,placeholder:u,onChange:function(e){return d?d(e.target.value):null}}))}}]),r}();Zx(".Textarea-module_area__3wYRY {\n  margin-bottom: 20px;\n  font: var(--wx-font);\n}\n\n.Textarea-module_label__CatvZ {\n  display: block;\n  margin-bottom: 10px;\n  font: var(--wx-label-font);\n  color: var(--wx-label-font-color);\n}\n\n.Textarea-module_textarea__2RKAE {\n  box-sizing: border-box;\n  width: 100%;\n  height: 70px;\n  padding: var(--wx-input-padding);\n  border: var(--wx-input-border);\n  border-radius: var(--wx-input-border-radius);\n  font: var(--wx-input-font);\n  color: var(--wx-input-font-color);\n  resize: vertical;\n  outline: none;\n}\n\n.Textarea-module_textarea__2RKAE:focus {\n  border: 1px solid var(--wx-input-focus-color);\n}\n");var FC=function(e){zx(r,t.Component);var n=Gx(r);function r(){return Lx(this,r),n.apply(this,arguments)}return Fx(r,[{key:"render",value:function(){var e=this.props,n=e.value,r=void 0===n?"":n,i=e.label,a=void 0===i?"":i,o=e.placeholder,s=void 0===o?"":o,u=e.readonly,l=void 0!==u&&u,c=e.disabled,h=void 0!==c&&c,f=e.change;return t.createElement("div",{className:"Textarea-module_area__3wYRY"},t.createElement("label",{className:"Textarea-module_label__CatvZ"},a),t.createElement("textarea",{className:"Textarea-module_textarea__2RKAE",type:"text",value:r,readOnly:l,disabled:h,placeholder:s,onChange:function(e){return f?f(e.target.value):null}}))}}]),r}();Zx(".Select-module_container__3sKsV {\n  margin-bottom: 20px;\n}\n\n.Select-module_label__2FXmZ {\n  display: block;\n  margin-bottom: 10px;\n  font: var(--wx-label-font);\n  color: var(--wx-label-font-color);\n}\n\n.Select-module_wrapper__1ps1o {\n  position: relative;\n  display: flex;\n}\n\n.Select-module_select__GP3T1 {\n  width: 100%;\n  padding: var(--wx-input-padding);\n  border: var(--wx-input-border);\n  border-radius: var(--wx-input-border-radius);\n  font: var(--wx-input-font);\n  color: var(--wx-input-font-color);\n  text-transform: capitalize;\n  outline: none;\n  appearance: none;\n}\n\n.Select-module_select__GP3T1:focus {\n  border: 1px solid var(--wx-input-focus-color);\n}\n\n.Select-module_icon__jTCTN {\n  position: absolute;\n  top: 50%;\n  right: 11px;\n  transform: translateY(-50%);\n  width: 20px;\n  height: 20px;\n  background: var(--wx-show-more-icon) center center no-repeat;\n  pointer-events: none;\n}\n");var UC=function(e){zx(r,t.Component);var n=Gx(r);function r(){return Lx(this,r),n.apply(this,arguments)}return Fx(r,[{key:"render",value:function(){var e=this.props,n=e.label,r=void 0===n?"":n,i=e.value,a=void 0===i?"":i,o=e.options,s=void 0===o?[]:o,u=e.change;return t.createElement("div",{className:"Select-module_container__3sKsV"},t.createElement("label",{className:"Select-module_label__2FXmZ"},r),t.createElement("div",{className:"Select-module_wrapper__1ps1o"},t.createElement("select",{className:"Select-module_select__GP3T1",value:a,onChange:function(e){return u?u(e.target.value):null}},s.map((function(e){return t.createElement("option",{key:e,value:e},e)}))),t.createElement("div",{className:"Select-module_icon__jTCTN"})))}}]),r}();Zx(".Slider-module_slider__1OyMv {\n  margin-bottom: 20px;\n}\n\n.Slider-module_label__2IPxC {\n  display: block;\n  margin-bottom: 10px;\n  font: var(--wx-label-font);\n  color: var(--wx-label-font-color);\n}\n\n.Slider-module_range__3Dlaa {\n  width: 100%;\n  background-color: #dbdbdb;\n  -webkit-appearance: none;\n  border-radius: 4px;\n}\n\n.Slider-module_range__3Dlaa:focus {\n  outline: none;\n}\n\n.Slider-module_range__3Dlaa::-webkit-slider-runnable-track {\n  border-radius: 4px;\n  width: 100%;\n  height: 8px;\n  cursor: pointer;\n}\n\n.Slider-module_range__3Dlaa::-webkit-slider-thumb {\n  margin-top: -6px;\n  width: 20px;\n  height: 20px;\n  background: var(--wx-input-focus-color);\n  border: 2px solid #ffffff;\n  border-radius: 50%;\n  cursor: pointer;\n  -webkit-appearance: none;\n}\n\n.Slider-module_range__3Dlaa::-moz-range-track {\n  background-color: transparent;\n  border-top: 5px solid #fff;\n  border-bottom: 5px solid #fff;\n  width: 100%;\n  height: 8px;\n  cursor: pointer;\n}\n\n.Slider-module_range__3Dlaa::-moz-range-thumb {\n  width: 14px;\n  height: 14px;\n  background: var(--wx-input-focus-color);\n  border: 2px solid #ffffff;\n  border-radius: 50%;\n  cursor: pointer;\n}\n\n.Slider-module_range__3Dlaa::-moz-range-progress {\n  background-color: var(--wx-input-focus-color);\n  height: 8px;\n  border-top-left-radius: 6px;\n  border-bottom-left-radius: 6px;\n}\n\n.Slider-module_range__3Dlaa::-ms-track {\n  background: transparent;\n  border-color: transparent;\n  border-width: 5px 0;\n  color: transparent;\n  width: 100%;\n  height: 8px;\n  cursor: pointer;\n}\n\n.Slider-module_range__3Dlaa::-ms-fill-lower {\n  background: var(--wx-input-focus-color);\n  border: 0.2px solid var(--wx-input-focus-color);\n  border-radius: 8px;\n}\n\n.Slider-module_range__3Dlaa::-ms-fill-upper {\n  background: #dbdbdb;\n  border: 0.2px solid #dbdbdb;\n  border-radius: 8px;\n}\n\n.Slider-module_range__3Dlaa::-ms-thumb {\n  width: 16px;\n  height: 16px;\n  background: var(--wx-focus-color);\n  border: 2px solid #ffffff;\n  border-radius: 50%;\n  cursor: pointer;\n  margin-top: 0px;\n}\n\n.Slider-module_range__3Dlaa:focus::-ms-fill-lower {\n  background: var(--wx-focus-color);\n}\n\n.Slider-module_range__3Dlaa:focus::-ms-fill-upper {\n  background: #dbdbdb;\n}\n");var VC=function(e){zx(r,t.Component);var n=Gx(r);function r(){return Lx(this,r),n.apply(this,arguments)}return Fx(r,[{key:"render",value:function(){var e=this.props,n=e.value,r=void 0===n?0:n,i=e.label,a=void 0===i?"":i,o=e.min,s=void 0===o?0:o,u=e.max,l=void 0===u?100:u,c=e.step,h=void 0===c?1:c,f=e.change,d=(r-s)/(l-s)*100+"%",p={background:"linear-gradient(90deg, var(--wx-input-focus-color) 0% ".concat(d,", ").concat("#dbdbdb"," ").concat(d," 100%)")};return t.createElement("div",{className:"Slider-module_slider__1OyMv"},t.createElement("label",{className:"Slider-module_label__2IPxC"},a),t.createElement("input",{type:"range",className:"Slider-module_range__3Dlaa",style:p,min:s,max:l,step:h,value:r,onChange:function(e){return f?f(e.target.value):null}}))}}]),r}(),BC="Calendar-module_icon__CW5pP";Zx(".Calendar-module_calendar__3_Izo {\n  box-sizing: border-box;\n  width: 183px;\n  padding: 7px;\n  border: var(--wx-calendar-border);\n}\n\n.Calendar-module_control__3390g {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.Calendar-module_icon__CW5pP {\n  font-size: 20px;\n  color: rgba(0, 0, 0, 0.5);\n  cursor: pointer;\n  user-select: none;\n  transition: color 0.15s ease-in;\n}\n\n.Calendar-module_month__1BJVc {\n  font: var(--wx-calendar-month-font);\n  color: var(--wx-calendar-month-font-color);\n}\n\n.Calendar-module_days__3rr6M {\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  grid-template-rows: 28px;\n}\n\n.Calendar-module_day__244Sn {\n  font: var(--wx-calendar-days-font);\n  color: var(--wx-calendar-days-font-color);\n  align-self: center;\n  text-align: center;\n}\n\n.Calendar-module_dates__1rgmM {\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  grid-template-rows: repeat(6, 24px);\n  font: var(--wx-calendar-dates-font);\n  color: var(--wx-calendar-dates-font-color);\n}\n\n.Calendar-module_date__30ydL {\n  cursor: pointer;\n  align-self: center;\n  text-align: center;\n}\n\n.Calendar-module_weekend__ubeWC {\n  color: var(--wx-input-focus-color);\n}\n\n.Calendar-module_outside__2DOF3 {\n  color: rgba(0, 0, 0, 0.3);\n}\n\n.Calendar-module_selected__uxhuA span {\n  display: inline-block;\n  color: #fff;\n  background-color: var(--wx-input-focus-color);\n  width: 20px;\n  height: 20px;\n  line-height: 20px;\n  border-radius: 50%;\n}\n");var zC=function(e){zx(r,t.Component);var n=Gx(r);function r(e){var t;return Lx(this,r),(t=n.call(this)).start=null,t.state={value:e.value||null,date:e.date||new Date},t}return Fx(r,[{key:"changeMonth",value:function(e){var t=this.state.date,n=new Date(t);n.setMonth(n.getMonth()+e),this.setState({date:n})}},{key:"hashDate",value:function(e){return e?12*e.getFullYear()*40+40*e.getMonth()+e.getDate():0}},{key:"selectDate",value:function(e){var t=e.target.dataset.index;if(t||(t=e.target.parentNode.dataset.index),t){var n=new Date(this.start);n.setDate(n.getDate()+1*t),this.props.change&&this.props.change(n)}}},{key:"render",value:function(){var e=this,n=this.context._("__dates"),r=this.props.startOnMonday,i=void 0!==r&&r,a=this.state,o=a.value,s=a.date,u=i?1:0,l=n.days;u&&(l=l.slice(1).concat(l[6]));var c=s.getFullYear(),h=s.getMonth();this.start=new Date(s),this.start.setDate(1);var f=-this.start.getDay()-u+2;this.start.setDate(f);for(var d=this.hashDate(o),p=new Date(this.start),v=[],m=0;m<42;m++){var g=p.getDay(),y=0===g||6===g,k=p.getMonth()===h,_=d===this.hashDate(p);v.push({v:p.getDate(),c:"date "+(_?"selected ":"")+(y?"weekend ":"")+(k?"":"outside ")}),p.setDate(p.getDate()+1)}return t.createElement("div",{className:"Calendar-module_calendar__3_Izo"},t.createElement("div",{className:"Calendar-module_control__3390g"},t.createElement("div",{className:Jx(BC,"mdi mdi-chevron-left"),onClick:function(){return e.changeMonth(-1)}}),t.createElement("div",{className:"Calendar-module_month__1BJVc"},n.months[h]," ",c),t.createElement("div",{className:Jx(BC,"mdi mdi-chevron-right"),onClick:function(){return e.changeMonth(1)}})),t.createElement("div",{className:"Calendar-module_days__3rr6M"},l.map((function(e){return t.createElement("div",{key:e,className:"Calendar-module_day__244Sn"},e)}))),t.createElement("div",{className:"Calendar-module_dates__1rgmM",onClick:function(t){return e.selectDate(t)}},v.map((function(e,n){return t.createElement("div",{key:n,className:"".concat("Calendar-module_date__30ydL"," ").concat(e.c.match("selected")&&"Calendar-module_selected__uxhuA"," ").concat(e.c.match("weekend")&&"Calendar-module_weekend__ubeWC"," ").concat(e.c.match("outside")&&"Calendar-module_outside__2DOF3"),"data-index":n},t.createElement("span",null,e.v))}))))}}]),r}();zC.contextType=nE;function qC(e){var t=e.toString();return 1===t.length?"0"+t:t}function HC(e){return e.getFullYear()+"."+qC(e.getMonth()+1)+"."+qC(e.getDate())}function WC(e){return new Date(e)}Zx(".Datepicker-module_datepicker__2ZaST {\n  position: relative;\n  margin-bottom: 20px;\n}\n\n.Datepicker-module_label__2iLNO {\n  display: block;\n  margin-bottom: 10px;\n  font: var(--wx-label-font);\n  color: var(--wx-label-font-color);\n}\n\n.Datepicker-module_inputWrapper__1-313 {\n  position: relative;\n}\n\n.Datepicker-module_input__1cFNs {\n  box-sizing: border-box;\n  width: 100%;\n  padding: var(--wx-input-padding);\n  border: var(--wx-input-border);\n  border-radius: var(--wx-input-border-radius);\n  font: var(--wx-input-font);\n  color: var(--wx-input-font-color);\n  outline: none;\n}\n\n.Datepicker-module_input__1cFNs:focus {\n  border: 1px solid var(--wx-input-focus-color);\n}\n\n.Datepicker-module_icon__114QK {\n  position: absolute;\n  top: 50%;\n  right: 11px;\n  transform: translateY(-50%);\n  width: 20px;\n  height: 20px;\n  background: var(--wx-calendar-icon) center center no-repeat;\n  pointer-events: none;\n}\n\n.Datepicker-module_wrapper__34G6U {\n  position: absolute;\n  z-index: 1;\n  background: white;\n}\n");var KC=function(e){zx(r,t.Component);var n=Gx(r);function r(e){var t;return Lx(this,r),(t=n.call(this)).state={show:!1},t.readonly=e.readonly||!1,t}return Fx(r,[{key:"componentDidMount",value:function(){var e=this;document.body.addEventListener("mousedown",(function(t){return e.onDown(t)}))}},{key:"componentWillUnmount",value:function(){var e=this;document.body.removeEventListener("mousedown",(function(t){return e.onDown(t)}))}},{key:"onDown",value:function(e){this.node&&!this.node.contains(e.target)&&this.setState({show:!1})}},{key:"onFocus",value:function(){this.setState({show:!0})}},{key:"onBlur",value:function(e){if(!this.readonly){var t=e.target.value,n=(this.props.parse||WC)(t),r=this.props.change;this.isDate(n)&&r&&r(t)}}},{key:"isDate",value:function(e){return e instanceof Date&&!isNaN(e.valueOf())}},{key:"selectDate",value:function(e){this.setState({show:!1});var t=this.props.change;t&&t(e)}},{key:"render",value:function(){var e=this,n=this.state.show,r=this.props,i=r.label,a=void 0===i?"":i,o=r.placeholder,s=void 0===o?"":o,u=r.value,l=void 0===u?new Date:u,c=r.date,h=void 0===c?l:c;return t.createElement("div",{className:"Datepicker-module_datepicker__2ZaST"},t.createElement("label",{className:"Datepicker-module_label__2iLNO"},a),t.createElement("div",{className:"Datepicker-module_inputWrapper__1-313"},t.createElement("input",{type:"text",className:"Datepicker-module_input__1cFNs",readOnly:this.readonly,placeholder:s,value:l?(this.props.format||HC)(l):"",onFocus:function(){return e.onFocus()},onBlur:function(t){return e.onBlur(t)}}),n&&t.createElement("div",{className:"Datepicker-module_wrapper__34G6U",ref:function(t){return e.node=t}},t.createElement(zC,{date:h,value:l,change:function(t){return e.selectDate(t)}})),t.createElement("div",{className:"Datepicker-module_icon__114QK"})))}}]),r}(),GC="Counter-module_btn__1nvpP";Zx(".Counter-module_counter__3nvxW {\n  margin-bottom: 20px;\n}\n\n.Counter-module_label__3nzs- {\n  display: block;\n  margin-bottom: 10px;\n  font: var(--wx-label-font);\n  color: var(--wx-label-font-color);\n}\n\n.Counter-module_controls__pygh3 {\n  display: flex;\n}\n\n.Counter-module_input__jdI62 {\n  box-sizing: border-box;\n  width: 40px;\n  height: 32px;\n  border: var(--wx-input-border);\n  border-radius: var(--wx-input-border-radius);\n  font: var(--wx-input-font);\n  color: var(--wx-input-font-color);\n  text-align: center;\n  outline: none;\n}\n\n.Counter-module_input__jdI62:focus {\n  border: 1px solid var(--wx-input-focus-color);\n}\n\n.Counter-module_input__jdI62.Counter-module_error__16oj4 {\n  border: 1px solid var(--wx-danger-color);\n}\n\n.Counter-module_btn__1nvpP {\n  box-sizing: border-box;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 30px;\n  height: 32px;\n  border: var(--wx-input-border);\n  border-radius: var(--wx-input-border-radius);\n  font: var(--wx-input-font);\n  color: var(--wx-input-font-color);\n  background-color: inherit;\n  outline: none;\n  cursor: pointer;\n}\n\n.Counter-module_btn__1nvpP:active {\n  border: var(--wx-input-border);\n  border-color: var(--wx-input-focus-color);\n}\n\n.Counter-module_btnDec__1iCFu {\n  border-right: 1px solid transparent;\n  border-radius: 2px 0 0 2px;\n}\n.Counter-module_btnInc__Xrqva {\n  border-left: 1px solid transparent;\n  border-radius: 0 2px 2px 0;\n}\n\n.Counter-module_dec__1dY02,\n.Counter-module_inc__1s51d {\n  fill: var(--wx-input-focus-color);\n}\n");var YC=function(e){zx(r,t.Component);var n=Gx(r);function r(e){var t;return Lx(this,r),(t=n.call(this)).step=e.step||1,t.min=e.min||1,t.max=1/0,t.digits=new RegExp("^[0-9]+$"),t.error=!1,t}return Fx(r,[{key:"inc",value:function(){if(!(this.props.value>=this.max)){var e=this.props.value+this.step;this.props.change&&this.props.change(e)}}},{key:"dec",value:function(){if(!(this.props.value<=this.min)){var e=this.props.value-this.step;this.props.change&&this.props.change(e)}}},{key:"change",value:function(e){var t=e.target.value;this.digits.test(t)?(this.error=!1,this.props.change&&this.props.change(t)):this.error=!0}},{key:"render",value:function(){var e=this,n=this.props,r=n.label,i=n.value;return t.createElement("div",{className:"Counter-module_counter__3nvxW"},t.createElement("label",{className:"Counter-module_label__3nzs-"},r),t.createElement("div",{className:"Counter-module_controls__pygh3"},t.createElement("button",{className:Jx(GC,"Counter-module_btnDec__1iCFu"),onClick:function(){return e.dec()}},t.createElement("svg",{className:"Counter-module_dec__1dY02",width:"12",height:"2",viewBox:"0 0 12 2",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M11.2501 1.74994H0.750092V0.249939H11.2501V1.74994Z"}))),t.createElement("input",{className:Jx("Counter-module_input__jdI62",this.error),type:"text",value:i,onChange:function(t){return e.change(t)}}),t.createElement("button",{className:Jx(GC,"Counter-module_btnInc__Xrqva"),onClick:function(){return e.inc()}},t.createElement("svg",{className:"Counter-module_inc__1s51d",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M11.2501 6.74994H6.75009V11.2499H5.25009V6.74994H0.750092V5.24994H5.25009V0.749939H6.75009V5.24994H11.2501V6.74994Z"})))))}}]),r}(),$C={links:"Links-module_links__MZ5Hp",label:"Links-module_label__3Np9K",cell:"Links-module_cell__1DKGk",taskName:"Links-module_taskName__1k8A9",wrapper:"Links-module_wrapper__1AhOd",select:"Links-module_select__xX9qD",iconMore:"Links-module_iconMore__1gJV3",iconDelete:"Links-module_iconDelete__3XxLk"};Zx(".Links-module_links__MZ5Hp {\n  margin-bottom: 10px;\n}\n\n.Links-module_label__3Np9K {\n  margin-bottom: 10px;\n  font: var(--wx-label-font);\n  color: var(--wx-label-font-color);\n}\n\n.Links-module_cell__1DKGk {\n  text-align: center;\n}\n\n.Links-module_taskName__1k8A9 {\n  font: var(--wx-input-font);\n  color: var(--wx-input-font-color);\n  width: 90px;\n  text-align: left;\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.Links-module_wrapper__1AhOd {\n  width: 225px;\n  position: relative;\n  display: flex;\n}\n\n.Links-module_select__xX9qD {\n  width: 100%;\n  padding: var(--wx-input-padding);\n  border: var(--wx-input-border);\n  border-radius: var(--wx-input-border-radius);\n  font: var(--wx-input-font);\n  color: var(--wx-input-font-color);\n  outline: none;\n  appearance: none;\n}\n\n.Links-module_select__xX9qD:focus {\n  border: 1px solid var(--wx-input-focus-color);\n}\n\n.Links-module_iconMore__1gJV3 {\n  position: absolute;\n  top: 50%;\n  right: 11px;\n  width: 20px;\n  height: 20px;\n  transform: translateY(-50%);\n  background: var(--wx-show-more-icon) center center no-repeat;\n  pointer-events: none;\n}\n\n.Links-module_iconDelete__3XxLk {\n  width: 20px;\n  height: 20px;\n  margin-left: 12px;\n  background: var(--wx-remove-link-icon) center center no-repeat;\n  opacity: 0.2;\n  cursor: pointer;\n}\n\n.Links-module_iconDelete__3XxLk:hover {\n  opacity: 1;\n}\n");var QC=[{id:0,text:"End-to-start"},{id:1,text:"Start-to-start"},{id:2,text:"End-to-end"},{id:3,text:"Start-to-end"}],XC=function(e){zx(r,t.Component);var n=Gx(r);function r(){return Lx(this,r),n.apply(this,arguments)}return Fx(r,[{key:"onClick",value:function(e){var t=e.target.dataset,n=t.action,r=t.id;n&&this.props.action({action:n,id:r})}},{key:"onSelect",value:function(e){var t=e.target.dataset.id,n=1*e.target.value;this.props.action({action:"update-link",id:t,obj:{type:n}})}},{key:"render",value:function(){var e=this,n=this.props.linksData;return t.createElement(t.Fragment,null,n.map((function(n){if(n.data.length)return t.createElement("div",{key:n.title,className:$C.links},t.createElement("p",{className:$C.label},n.title),t.createElement("table",{className:$C.table,onClick:function(t){return e.onClick(t)}},t.createElement("tbody",null,n.data.map((function(n,r){return t.createElement("tr",{key:r,className:$C.row},t.createElement("td",{className:$C.cell},t.createElement("div",{className:$C.taskName},n.task.text||n.task.textRight||n.task.textLeft)),t.createElement("td",{className:$C.cell},t.createElement("div",{className:$C.wrapper},t.createElement("select",{className:$C.select,value:n.link.type,onChange:function(t){return e.onSelect(t)},"data-id":n.link.id},QC.map((function(e){return t.createElement("option",{key:e.id,value:e.id},e.text)}))),t.createElement("div",{className:$C.iconMore}))),t.createElement("td",{className:$C.cell},t.createElement("div",{className:$C.iconDelete,"data-action":"delete-link","data-id":n.link.id})))})))))})))}}]),r}(),JC={sidebar:"Sidebar-module_sidebar__1j6r8",compact:"Sidebar-module_compact__25BZC",header:"Sidebar-module_header__2hKk0",body:"Sidebar-module_body__3wOy3",close:"Sidebar-module_close__3Sz9k"};Zx(".Sidebar-module_sidebar__1j6r8 {\n  flex: 0 0 400px;\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  height: 100%;\n  background: #fff;\n  box-shadow: 0px 1px 30px rgba(0, 0, 0, 0.25);\n  overflow: hidden;\n}\n\n.Sidebar-module_sidebar__1j6r8.Sidebar-module_compact__25BZC {\n  position: absolute;\n  width: 100%;\n  z-index: 5;\n}\n\n.Sidebar-module_header__2hKk0 {\n  box-sizing: border-box;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 11px 20px;\n  border-bottom: 1px solid var(--wx-border-color);\n}\n\n.Sidebar-module_body__3wOy3 {\n  flex: 1 1 auto;\n  padding: 20px;\n  overflow: auto;\n}\n\n.Sidebar-module_close__3Sz9k {\n  width: 24px;\n  height: 27px;\n  background: var(--wx-close-sb-icon) center center no-repeat;\n  cursor: pointer;\n}\n");var ZC=uC("day"),eT=lC("day"),tT=function(e){zx(r,t.Component);var n=Gx(r);function r(){return Lx(this,r),n.apply(this,arguments)}return Fx(r,[{key:"update",value:function(e,t){var n=this.props.task;switch(n[e]=t,e){case"start_date":case"end_date":n.duration=ZC(n.end_date,n.start_date);break;case"duration":n.duration=1*n.duration,n.end_date=eT(n.start_date,n.duration)}this.props.action({action:"update-task",id:n.id,obj:n})}},{key:"delete",value:function(){this.props.action({action:"delete-task",id:this.props.task.id}),this.props.action({action:"hide-details"})}},{key:"hide",value:function(){this.props.action({action:"hide-details"})}},{key:"render",value:function(){var e=this,n=this.props,r=n.compactMode,i=n.taskTypes,a=n.templates,o=n.task,s=n.links,u=n.tasksMap,l=n.action,c="milestone"===o.type,h=s.filter((function(e){return e.target==o.id})).map((function(e){return{link:e,task:u[e.source]}})),f=s.filter((function(e){return e.source==o.id})).map((function(e){return{link:e,task:u[e.target]}})),d=this.context.__,p=[{title:"".concat(d("gantt","Predecessors")),data:h},{title:"".concat(d("gantt","Successors")),data:f}];return t.createElement("div",{className:Jx(JC.sidebar,Ux({},JC.compact,r))},t.createElement("div",{className:JC.header},t.createElement("div",{className:JC.close,onClick:function(){return e.hide()}}),t.createElement("div",{className:JC.buttons},t.createElement(LC,{click:function(){return e.hide()}},d("gantt","Save")),t.createElement(LC,{appearance:"danger",click:function(){return e.delete()}},d("gantt","Delete")))),t.createElement("div",{className:JC.body},a.sidebarForm?t.createElement(a.sidebarForm,{task:o,linksData:p,action:l}):t.createElement(t.Fragment,null,t.createElement(jC,{autofocus:!0,label:d("gantt","Name"),value:o.text,change:function(t){return e.update("text",t)}}),t.createElement(FC,{label:d("gantt","Description"),value:o.details,change:function(t){return e.update("details",t)}}),i.length>1&&t.createElement(UC,{label:d("gantt","Type"),value:o.type,options:i,change:function(t){return e.update("type",t)}}),t.createElement(KC,{label:d("gantt","Start Date"),value:o.start_date,change:function(t){return e.update("start_date",t)},readonly:!0}),!c&&t.createElement(t.Fragment,null,t.createElement(KC,{label:d("gantt","End Date"),value:o.end_date,change:function(t){return e.update("end_date",t)},readonly:!0}),t.createElement(YC,{label:d("gantt","Duration"),value:o.duration,change:function(t){return e.update("duration",t)}}),t.createElement(VC,{label:"".concat(d("gantt","Progress"),": ").concat(o.progress,"%"),value:o.progress,change:function(t){return e.update("progress",t)}})),t.createElement(XC,{linksData:p,action:l}))))}}]),r}();tT.contextType=nE;Zx(".Tooltip-module_area__2cE1W {\n  position: relative;\n  height: 100%;\n  width: 100%;\n}\n\n.Tooltip-module_tooltip__sJLxG {\n  position: absolute;\n  z-index: 10;\n  font: var(--wx-small-font);\n  color: var(--wx-font-color);\n  background-color: #fff;\n}\n");var nT=function(e){zx(r,t.Component);var n=Gx(r);function r(){var e;return Lx(this,r),(e=n.call(this)).state={id:null,tooltip:null},e}return Fx(r,[{key:"componentDidUpdate",value:function(){if(this.tooltipNode){var e=this.state.pos,t=e.left,n=e.top;this.tooltipCoords=this.tooltipNode.getBoundingClientRect(),this.tooltipCoords.right>=this.areaCoords.right&&(t=this.areaCoords.width-this.tooltipCoords.width-5),this.tooltipCoords.bottom>=this.areaCoords.bottom&&(n=this.targetCoords.top-this.tooltipCoords.height-5),this.state.pos.left===t&&this.state.pos.top===n||this.setState({pos:{top:n,left:t}})}}},{key:"locate",value:function(e){for(;e;){if(e.getAttribute){var t=e.getAttribute("data-tooltip-id"),n=e.getAttribute("data-tooltip");if(t||n)return{id:t,tooltip:n,target:e}}e=e.parentNode}return{id:null,tooltip:null,target:null}}},{key:"move",value:function(e){var t=this.locate(e.target),n=t.id,r=t.tooltip,i=t.target;if(n||r){n&&this.props.data&&(this.tooltipData=this.props.data(n)),this.targetCoords=i.getBoundingClientRect(),this.areaCoords=this.area.getBoundingClientRect();var a=this.targetCoords.top+this.targetCoords.height-this.areaCoords.top+5,o=this.targetCoords.left-this.areaCoords.left;this.setState({id:n,tooltip:r,pos:{top:a,left:o},tooltipData:this.tooltipData})}else this.setState({id:n,tooltip:r})}},{key:"render",value:function(){var e=this,n=this.props,r=n.content,i=n.children,a=this.state,o=a.id,s=a.tooltip,u=a.tooltipData,l=a.pos;return t.createElement("div",{className:"Tooltip-module_area__2cE1W",ref:function(t){return e.area=t},onMouseMove:function(t){return e.move(t)}},(o&&r||s)&&t.createElement("div",{className:"Tooltip-module_tooltip__sJLxG",ref:function(t){return e.tooltipNode=t},style:{top:l.top,left:l.left}},o?r(u):s),i)}}]),r}(),rT={button:"IconButton-module_button__MI8-D",primary:"IconButton-module_primary__3Fv5X",icon:"IconButton-module_icon__3-9MZ"};Zx(".IconButton-module_button__MI8-D {\n  width: 50px;\n  height: 50px;\n  border: none;\n  outline: none;\n  border-radius: 50%;\n  cursor: pointer;\n}\n\n.IconButton-module_primary__3Fv5X {\n  color: var(--wx-button-primary-font-color);\n  background-color: var(--wx-button-primary-color);\n}\n\n.IconButton-module_primary__3Fv5X:hover {\n  color: var(--wx-button-primary-font-color);\n  background-color: var(--wx-button-primary-color-hover);\n}\n\n.IconButton-module_icon__3-9MZ {\n  font-size: 20px;\n}\n");var iT=function(e){zx(r,t.Component);var n=Gx(r);function r(){return Lx(this,r),n.apply(this,arguments)}return Fx(r,[{key:"render",value:function(){var e=this.props,n=e.appearance,r=void 0===n?"primary":n,i=e.icon,a=e.click;return t.createElement("button",{className:Jx(rT.button,rT[r]),onClick:function(e){return a?a(e):null}},i&&t.createElement("span",{className:Jx(rT.icon,i)}))}}]),r}(),aT=function(){return Promise.resolve()},oT=function(e){zx(n,_C);var t=Gx(n);function n(e,r){var i;return Lx(this,n),(i=t.call(this,r))._vm=e,i._emit=r,i._mounted=!1,i}return Fx(n,[{key:"updateStore",value:function(e){Yx(qx(n.prototype),"updateStore",this).call(this,e),this._mounted&&this._vm.forceUpdate()}},{key:"mounted",value:function(){this._mounted=!0}}]),n}(),sT=function(e){zx(n,wC);var t=Gx(n);function n(e,r){var i;return Lx(this,n),(i=t.call(this,(function(t){var n=[];return{set:function(r){t!==r&&(t=r,n.forEach((function(e){return e(r)})),e.setState(Bx(Bx({},e.state),i.getValues())))},subscribe:function(e){n.push(e),e(t)},get:function(){return t}}})))._emit=r,i}return Fx(n,[{key:"getValues",value:function(){var e=Yx(qx(n.prototype),"getState",this).call(this),t={};for(var r in e)t[r]=e[r].get();return t}},{key:"actions",value:function(e){return Yx(qx(n.prototype),"actions",this).call(this,e,this._emit,aT)}}]),n}();Zx(".Gantt-module_layout__3I6ye {\n  position: absolute;\n  display: flex;\n  height: 100%;\n  width: 100%;\n  background-color: #fff;\n\n  min-height: 100px;\n}\n\n.Gantt-module_content__36naa {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.Gantt-module_icon__1IyX2 {\n  position: absolute;\n  right: 25px;\n  bottom: 35px;\n  z-index: 4;\n}\n");var uT=1,lT=function(e){zx(r,t.Component);var n=Gx(r);function r(e){var t;Lx(this,r);var i=function(t,n){e[t]&&e[t](n)};(t=n.call(this)).store=new oT(Wx(t),i),t.store.init(e),t.state=new sT(Wx(t),i),t.action=t.state.actions(t.store);var a=function(e){return e.map((function(e){var t="number"==typeof e.width?e.width+"px":e.width||"120px",n=e.align||"left",r=e.template;if(!r)switch(e.name){case"start":r=function(e){return iC(e.start_date,"yyyy-MM-dd")};break;case"end":r=function(e){return iC(e.end_date,"yyyy-MM-dd")};break;case"add-task":r=function(){return"add"};break;case"duration":r=function(e){return bC(e.end_date,e.start_date).toString()};break;default:r=function(t){return t[e.name]}}var i=Object.assign(Object.assign({},e),{width:t,align:n,template:r});return"add-task"===i.name&&(i.action=i.name),i}))}(e.columns);return e.store&&e.store(t.store),t.state=Bx({columnsData:a,compactMode:!1},t.state.getValues()),t.compactWith=650,"undefined"!=typeof ResizeObserver&&(t.ro=new ResizeObserver((function(e){return t.resize(e)})),t.ro.observe(document.body)),t}return Fx(r,[{key:"componentDidMount",value:function(){this.store.mounted()}},{key:"componentDidUpdate",value:function(e){var t=this;!function(e,t,n,r){var i=!0;for(var a in t)if(e[a]!==t[a]&&(!r||r[a])){i=!1;break}i||n()}(e,this.props,(function(){return t.store.init(t.props)}),{tasks:1,links:1,start:1,end:1,scales:1,cellWidth:1,cellHeight:1,scaleHeight:1})}},{key:"componentWillUnmount",value:function(){this.ro.disconnect()}},{key:"resize",value:function(e){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=$x(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.target===document.body){var i=r.contentRect.width<=this.compactWith;this.state.compactMode!=i&&this.setState({compactMode:i})}}}catch(e){n.e(e)}finally{n.f()}}},{key:"getTooltipData",value:function(e){return this.store.getTask(e)}},{key:"render",value:function(){var e=this,n=this.state,r=n.dataStart,i=n.dataEnd,a=n.from,o=this.state,s=o.scrollTop,u=o.scrollLeft,l=o.selected,c=o.details,h=o.columnsData,f=o.compactMode,d=this.store.state,p=d.tasks,v=d.links,m=d.scales,g=d.tasksMap,y=this.props,k=y.grid,_=y.cellWidth,w=y.cellHeight,b=y.readonly,x=this.props,E=x.templates,C=x.markers,T=x.taskTypes,S=x.tooltip,I=x.borders,N=f?50:k.width||400,R=b.noDrag||b,D=b.noEdit||b,P=b.noNewLink||b,A=m.width,O=p.length*w,M=p.slice(r,i),L=m.start,j=m.diff,F=C.map((function(e){return Bx(Bx({id:uT++},e),{},{left:j(e.start,L)*_})}));return t.createElement(nT,{content:S,data:this.getTooltipData.bind(this)},t.createElement("div",{className:"Gantt-module_layout__3I6ye"},k&&t.createElement(SC,{compactMode:f,width:N,tasks:M,columns:h,scales:m,scrollTop:s,scrollDelta:a,cellHeight:w,selected:l,action:function(t){return e.action(t)}}),t.createElement("div",{className:"Gantt-module_content__36naa"},t.createElement(IC,{scales:m,scrollLeft:u}),t.createElement(OC,{drag:!R,newLink:!P,markers:F,tasks:M,links:v,scrollTop:s,scrollLeft:u,selected:l,cellWidth:_,cellHeight:w,fullWidth:A,fullHeight:O,templates:E,borders:I,action:function(t){return e.action(t)}})),c&&!D&&t.createElement(tT,{compactMode:f,taskTypes:T,templates:E,task:c,links:v,tasksMap:g,action:function(t){return e.action(t)}}),f&&!c&&t.createElement("div",{className:"Gantt-module_icon__1IyX2"},t.createElement(iT,{icon:"mdi mdi-plus",click:function(){return e.action({action:"add-task",id:0})}}))))}}]),r}();lT.defaultProps={templates:{},markers:[],taskTypes:["task","milestone"],tasks:[],links:[],scales:[{unit:"month",step:1,format:"MMMM yyy"},{unit:"day",step:1,format:"d"}],columns:[{name:"text",label:"Task name",width:"100%"},{name:"add-task",label:"",width:"50px",align:"center"}],start:null,end:null,cellWidth:100,cellHeight:38,scaleHeight:30,readonly:!1,grid:!0,tooltip:null,borders:"full"},Zx("@import \"https://fonts.googleapis.com/css?family=Roboto:400,500,700,900&display=swap&subset=cyrillic-ext\";\n@import \"https://cdn.materialdesignicons.com/2.7.94/css/materialdesignicons.css\";\n\n.wx-material {\n  /* common */\n  --wx-font: 400 14px Roboto;\n  --wx-font-color: #5f5f5f;\n  --wx-border-color: #ededed;\n\n  /* buttons */\n  --wx-button-font: 500 14px Roboto;\n  --wx-button-primary-font-color: #fff;\n  --wx-button-danger-font-color: #ff5252;\n  --wx-button-primary-color: #2a7fff;\n  --wx-button-primary-color-hover: #246cd9;\n  --wx-button-danger-color: transparent;\n  --wx-button-danger-color-hover: rgba(255, 82, 82, 0.2);\n  --wx-button-radius: 30px;\n\n  /* bars */\n  --wx-gantt-bar-font: 400 14px Roboto;\n  --wx-gantt-bar-border-radius: 50px;\n\n  --wx-gantt-task-color: #448aff;\n  --wx-gantt-task-font-color: #fff;\n  --wx-gantt-task-fill-color: #246cd9;\n  --wx-gantt-task-border-color: #448aff;\n\n  --wx-gantt-project-color: #1de9b6;\n  --wx-gantt-project-font-color: #5f5f5f;\n  --wx-gantt-project-fill-color: #00d19a;\n  --wx-gantt-project-border-color: #1de9b6;\n\n  --wx-gantt-milestone-color: #d33daf;\n\n  --wx-gantt-select-color: rgba(0, 199, 181, 0.2);\n  --wx-gantt-link-color: #87a4bc;\n\n  /* shadows */\n  --wx-top-shadow: 0px 3px 5px rgba(0, 0, 0, 0.1),\n    0px 1px 2px rgba(0, 0, 0, 0.1);\n\n  /* grid */\n  --wx-grid-header-font: 500 14px Roboto;\n  --wx-grid-header-font-color: #a6a6a6;\n  --wx-grid-header-text-transform: uppercase;\n  --wx-grid-header-shadow: var(--wx-top-shadow);\n\n  --wx-grid-body-font: 400 14px Roboto;\n  --wx-grid-body-font-color: #5f5f5f;\n  --wx-grid-body-row-border: 1px solid #fff;\n\n  /* timescale */\n  --wx-timescale-font: 500 12px Roboto;\n  --wx-timescale-font-color: #a6a6a6;\n  --wx-timescale-text-transform: uppercase;\n  --wx-timescale-shadow: var(--wx-top-shadow);\n  --wx-timescale-border: 1px solid transparent;\n\n  /* input */\n  --wx-label-font: 500 14px Roboto;\n  --wx-label-font-color: #5f5f5f;\n\n  --wx-input-font: 400 14px Roboto;\n  --wx-input-font-color: #5f5f5f;\n  --wx-input-padding: 8px 11px;\n  --wx-input-border: 1px solid #dfdfdf;\n  --wx-input-border-radius: 2px;\n  --wx-input-focus-color: #2a7fff;\n\n  /* calendar */\n  --wx-calendar-border: 1px solid #dfdfdf;\n  --wx-calendar-month-font: 400 12px Roboto;\n  --wx-calendar-month-font-color: #5f5f5f;\n  --wx-calendar-days-font: 400 10px Roboto;\n  --wx-calendar-days-font-color: rgba(0, 0, 0, 0.5);\n  --wx-calendar-dates-font: 400 12px Roboto;\n  --wx-calendar-dates-font-color: #4f4f4f;\n\n  /* markers */\n  --wx-gantt-marker-font: 500 12px Roboto;\n  --wx-gantt-marker-font-color: #fff;\n  --wx-gantt-marker-color: rgba(6, 189, 248, 0.77);\n\n  /* tooltips */\n  --wx-tooltip-font: 400 12px Roboto;\n  --wx-tooltip-font-color: #5f5f5f;\n\n  /* tooltips */\n\n  /* icons */\n  --wx-add-btn-icon: url(\"data:image/svg+xml,%3Csvg width='14' height='14' viewBox='0 0 14 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M7.52734 0.671875H6.47266C6.37891 0.671875 6.33203 0.71875 6.33203 0.8125V6.33203H1.09375C1 6.33203 0.953125 6.37891 0.953125 6.47266V7.52734C0.953125 7.62109 1 7.66797 1.09375 7.66797H6.33203V13.1875C6.33203 13.2812 6.37891 13.3281 6.47266 13.3281H7.52734C7.62109 13.3281 7.66797 13.2812 7.66797 13.1875V7.66797H12.9062C13 7.66797 13.0469 7.62109 13.0469 7.52734V6.47266C13.0469 6.37891 13 6.33203 12.9062 6.33203H7.66797V0.8125C7.66797 0.71875 7.62109 0.671875 7.52734 0.671875Z' fill='%2300C7B5' fill-opacity='0.54'/%3E%3C/svg%3E \");\n  --wx-open-btn-icon: url(\"data:image/svg+xml,%3Csvg width='5' height='10' viewBox='0 0 5 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 10L5 5L0 0V10Z' fill='%235F5F5F' fill-opacity='0.54'/%3E%3C/svg%3E%0A\");\n  --wx-close-btn-icon: url(\"data:image/svg+xml,%3Csvg width='10' height='5' viewBox='0 0 10 5' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0L5 5L10 0H0Z' fill='%235F5F5F' fill-opacity='0.54'/%3E%3C/svg%3E%0A\");\n  --wx-close-sb-icon: url(\"data:image/svg+xml,%3Csvg width='15' height='14' viewBox='0 0 15 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.0344 1.42188L12.6281 0.015625L7.04999 5.59375L1.47186 0.015625L0.0656128 1.42188L5.64374 7L0.0656128 12.5781L1.47186 13.9844L7.04999 8.40625L12.6281 13.9844L14.0344 12.5781L8.45624 7L14.0344 1.42188Z' fill='black' fill-opacity='0.54'/%3E%3C/svg%3E%0A\");\n  --wx-show-more-icon: url(\"data:image/svg+xml,%3Csvg width='10' height='7' viewBox='0 0 10 7' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1.175 0.158203L5 3.97487L8.825 0.158203L10 1.3332L5 6.3332L0 1.3332L1.175 0.158203Z' fill='%235F5F5F'/%3E%3C/svg%3E \");\n  --wx-calendar-icon: url(\"data:image/svg+xml,%3Csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M13.8203 15.3203H2.17969V6.17969H13.8203V15.3203ZM11.3203 0.320312V2H4.67969V0.320312H3V2H2.17969C1.6849 2 1.28125 2.15625 0.96875 2.46875C0.65625 2.78125 0.5 3.1849 0.5 3.67969V15.3203C0.5 15.7891 0.65625 16.1927 0.96875 16.5312C1.30729 16.8438 1.71094 17 2.17969 17H13.8203C14.2891 17 14.6797 16.8438 14.9922 16.5312C15.3307 16.1927 15.5 15.7891 15.5 15.3203V3.67969C15.5 3.1849 15.3307 2.78125 14.9922 2.46875C14.6797 2.15625 14.2891 2 13.8203 2H13V0.320312H11.3203ZM12.1797 9.5H8V13.6797H12.1797V9.5Z' fill='black' fill-opacity='0.5'/%3E%3C/svg%3E \");\n  --wx-remove-link-icon: url(\"data:image/svg+xml,%3Csvg width='12' height='15' viewBox='0 0 12 15' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 13.3203C1 13.7891 1.15625 14.1927 1.46875 14.5312C1.80729 14.8438 2.21094 15 2.67969 15H9.32031C9.78906 15 10.1797 14.8438 10.4922 14.5312C10.8307 14.1927 11 13.7891 11 13.3203V3.32031H1V13.3203ZM3.03125 7.38281L4.24219 6.21094L6 8.00781L7.75781 6.21094L8.92969 7.38281L7.17188 9.17969L8.92969 10.9375L7.75781 12.1094L6 10.3516L4.24219 12.1094L3.07031 10.9375L4.82812 9.17969L3.03125 7.38281ZM8.92969 0.820312L8.07031 0H3.92969L3.07031 0.820312H0.179688V2.5H11.8203V0.820312H8.92969Z' fill='black' fill-opacity='0.5'/%3E%3C/svg%3E \");\n}\n");!function(e){zx(r,t.Component);var n=Gx(r);function r(){return Lx(this,r),n.apply(this,arguments)}Fx(r,[{key:"render",value:function(){return this.props.children?t.createElement("div",{className:"wx-material",style:{height:"100%"}},this.props.children):null}}])}();Zx("@import \"https://fonts.googleapis.com/css?family=Roboto:400,500,700,900&display=swap&subset=cyrillic-ext\";\n@import \"https://cdn.materialdesignicons.com/2.7.94/css/materialdesignicons.css\";\n\n.wx-default {\n  /* common */\n  --wx-font: 400 14px Arial;\n  --wx-font-color: #5f5f5f;\n  --wx-border-color: #ebebeb;\n\n  /* buttons */\n  --wx-button-font: 500 14px Roboto;\n  --wx-button-primary-font-color: #fff;\n  --wx-button-danger-font-color: #ff5252;\n  --wx-button-primary-color: #0db5cb;\n  --wx-button-primary-color-hover: #2898b0;\n  --wx-button-danger-color: transparent;\n  --wx-button-danger-color-hover: rgba(255, 82, 82, 0.2);\n  --wx-button-radius: 2px;\n\n  /* bars */\n  --wx-gantt-bar-font: 400 12px Arial;\n  --wx-gantt-bar-border-radius: 2px;\n\n  --wx-gantt-task-color: #00bed7;\n  --wx-gantt-task-font-color: #fff;\n  --wx-gantt-task-fill-color: #2898b0;\n  --wx-gantt-task-border-color: #2898b0;\n\n  --wx-gantt-project-color: #2acc69;\n  --wx-gantt-project-font-color: #fff;\n  --wx-gantt-project-fill-color: #3c9445;\n  --wx-gantt-project-border-color: #3c9445;\n\n  --wx-gantt-milestone-color: #d33daf;\n\n  --wx-gantt-select-color: #fff797;\n  --wx-gantt-link-color: #ffa011;\n\n  /* shadows */\n  --wx-top-shadow: none;\n\n  /* grid */\n  --wx-grid-header-font: 400 12px Arial;\n  --wx-grid-header-font-color: #a6a6a6;\n  --wx-grid-header-text-transform: capitalize;\n  --wx-grid-header-shadow: var(--wx-top-shadow);\n\n  --wx-grid-body-font: 400 13px Arial;\n  --wx-grid-body-font-color: #5f5f5f;\n  --wx-grid-body-row-border: 1px solid var(--wx-border-color);\n\n  /* timescale */\n  --wx-timescale-font: 400 12px Arial;\n  --wx-timescale-font-color: #a6a6a6;\n  --wx-timescale-text-transform: capitalize;\n  --wx-timescale-shadow: var(--wx-top-shadow);\n  --wx-timescale-border: 1px solid var(--wx-border-color);\n\n  /* input */\n  --wx-label-font: 700 13px Arial;\n  --wx-label-font-color: #5f5f5f;\n\n  --wx-input-font: 400 12px Arial;\n  --wx-input-font-color: #4f4f4f;\n  --wx-input-padding: 8px 11px;\n  --wx-input-border: 1px solid #dfdfdf;\n  --wx-input-border-radius: 2px;\n  --wx-input-focus-color: #2898b0;\n\n  /* calendar */\n  --wx-calendar-border: 1px solid #dfdfdf;\n  --wx-calendar-month-font: 400 12px Arial;\n  --wx-calendar-month-font-color: #5f5f5f;\n  --wx-calendar-days-font: 400 10px Arial;\n  --wx-calendar-days-font-color: rgba(0, 0, 0, 0.5);\n  --wx-calendar-dates-font: 400 12px Arial;\n  --wx-calendar-dates-font-color: #4f4f4f;\n\n  /* markers */\n  --wx-gantt-marker-font: 400 12px Arial;\n  --wx-gantt-marker-font-color: #fff;\n  --wx-gantt-marker-color: rgba(43, 111, 173, 0.77);\n\n  /* tooltips */\n  --wx-tooltip-font: 400 12px Arial;\n  --wx-tooltip-font-color: #5f5f5f;\n\n  /* icons */\n  --wx-add-btn-icon: url(\"data:image/svg+xml,%3Csvg width='11' height='11' viewBox='0 0 11 11' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.6 4.59998V6.99998H6.59995V11H4.19995V6.99998H0.199951V4.59998H4.19995V0.599976H6.59995V4.59998H10.6Z' fill='%233DB9D3'/%3E%3C/svg%3E \");\n  --wx-close-btn-icon: url(\"data:image/svg+xml,%3Csvg width='14' height='14' viewBox='0 0 14 14' fill='none' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Crect width='14' height='14' fill='url(%23pattern0)'/%3E%3Cdefs%3E%3Cpattern id='pattern0' patternContentUnits='objectBoundingBox' width='1' height='1'%3E%3Cuse xlink:href='%23image0' transform='scale(0.0555556)'/%3E%3C/pattern%3E%3Cimage id='image0' width='18' height='18' xlink:href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAkUlEQVQ4T2NkoBJgpJI5DEPAoFOnTv0/c+YMQR+bmJgwmJmZwX2E4bVp06b9j4yMZODg4MBp2I8fPxiWL1/OkJWVNeIN4uTkxAin79+/M5AcRtgCHGQIyQbhijaiDQoKDmZgZ2PDGf0/f/1iWLd2LeHod3d3Z2BkYsJp0P9//xh27tyJ3yCqpWyCeQOHgsGX+wEZpW4T5LCxKwAAAABJRU5ErkJggg=='/%3E%3C/defs%3E%3C/svg%3E%0A\");\n  --wx-open-btn-icon: url(\"data:image/svg+xml,%3Csvg width='14' height='14' viewBox='0 0 14 14' fill='none' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Crect width='14' height='14' fill='url(%23pattern0)'/%3E%3Cdefs%3E%3Cpattern id='pattern0' patternContentUnits='objectBoundingBox' width='1' height='1'%3E%3Cuse xlink:href='%23image0' transform='scale(0.0555556)'/%3E%3C/pattern%3E%3Cimage id='image0' width='18' height='18' xlink:href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAArklEQVQ4T2NkoBJgpJI5DEPAoFOnTv0/c+YMQR+bmJgwmJmZwX2E4bVp06b9j4yMZODg4MBp2I8fPxiWL1/OkJWVNUAGcXJyMnz//h3uQrJdRLFBIAPQAchlJLsIFuCMjIwM////B5sJMoRkg2CuIdtrQcHBDOxsbHBfCQgIMHz48AHO//nrF8O6tWsJR7+7uzsDIxMTznT0/98/hp07d+I3iGopm2DewKFg8OV+AJWkfRMrTobLAAAAAElFTkSuQmCC'/%3E%3C/defs%3E%3C/svg%3E \");\n  --wx-close-sb-icon: url(\"data:image/svg+xml,%3Csvg width='15' height='14' viewBox='0 0 15 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.0344 1.42188L12.6281 0.015625L7.04999 5.59375L1.47186 0.015625L0.0656128 1.42188L5.64374 7L0.0656128 12.5781L1.47186 13.9844L7.04999 8.40625L12.6281 13.9844L14.0344 12.5781L8.45624 7L14.0344 1.42188Z' fill='black' fill-opacity='0.54'/%3E%3C/svg%3E%0A\");\n  --wx-show-more-icon: url(\"data:image/svg+xml,%3Csvg width='10' height='5' viewBox='0 0 10 5' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0.820312 0.820312L5 5L9.17969 0.820312H0.820312Z' fill='black' fill-opacity='0.5'/%3E%3C/svg%3E \");\n  --wx-calendar-icon: url(\"data:image/svg+xml,%3Csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M13.8203 15.3203H2.17969V6.17969H13.8203V15.3203ZM11.3203 0.320312V2H4.67969V0.320312H3V2H2.17969C1.6849 2 1.28125 2.15625 0.96875 2.46875C0.65625 2.78125 0.5 3.1849 0.5 3.67969V15.3203C0.5 15.7891 0.65625 16.1927 0.96875 16.5312C1.30729 16.8438 1.71094 17 2.17969 17H13.8203C14.2891 17 14.6797 16.8438 14.9922 16.5312C15.3307 16.1927 15.5 15.7891 15.5 15.3203V3.67969C15.5 3.1849 15.3307 2.78125 14.9922 2.46875C14.6797 2.15625 14.2891 2 13.8203 2H13V0.320312H11.3203ZM12.1797 9.5H8V13.6797H12.1797V9.5Z' fill='black' fill-opacity='0.5'/%3E%3C/svg%3E \");\n  --wx-remove-link-icon: url(\"data:image/svg+xml,%3Csvg width='12' height='15' viewBox='0 0 12 15' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 13.3203C1 13.7891 1.15625 14.1927 1.46875 14.5312C1.80729 14.8438 2.21094 15 2.67969 15H9.32031C9.78906 15 10.1797 14.8438 10.4922 14.5312C10.8307 14.1927 11 13.7891 11 13.3203V3.32031H1V13.3203ZM3.03125 7.38281L4.24219 6.21094L6 8.00781L7.75781 6.21094L8.92969 7.38281L7.17188 9.17969L8.92969 10.9375L7.75781 12.1094L6 10.3516L4.24219 12.1094L3.07031 10.9375L4.82812 9.17969L3.03125 7.38281ZM8.92969 0.820312L8.07031 0H3.92969L3.07031 0.820312H0.179688V2.5H11.8203V0.820312H8.92969Z' fill='black' fill-opacity='0.5'/%3E%3C/svg%3E \");\n}\n");var cT=function(e){zx(r,t.Component);var n=Gx(r);function r(){return Lx(this,r),n.apply(this,arguments)}return Fx(r,[{key:"render",value:function(){return this.props.children?t.createElement("div",{className:"wx-default",style:{height:"100%"}},this.props.children):null}}]),r}();var hT=function(){var e=o((0,t.useState)(""),2),n=e[0],r=e[1],i=o((0,t.useState)(""),2),a=i[0],s=i[1],u=o((0,t.useState)("2011-01-11"),2),l=u[0],c=u[1],h=o((0,t.useState)("2011-01-11"),2),f=(h[0],h[1]),d=o((0,t.useState)(""),2),p=(d[0],d[1]),v=o((0,t.useState)(""),2),m=v[0],g=v[1],y=o((0,t.useState)(""),2),k=y[0],_=y[1],w=o((0,t.useState)(""),2),b=w[0],x=w[1],E=o((0,t.useState)("2011-01-11"),2),C=E[0],S=E[1],I=o((0,t.useState)("2011-01-11"),2),N=(I[0],I[1]),R=o((0,t.useState)(1),2),D=R[0],P=R[1],A=o((0,t.useState)(""),2),O=A[0],M=A[1],L=o((0,t.useState)(""),2),j=L[0],F=L[1],U=o((0,t.useState)(""),2),V=U[0],B=U[1],z=o((0,t.useState)("2011-01-11"),2),q=z[0],H=z[1],W=o((0,t.useState)("2011-01-11"),2),G=(W[0],W[1]),$=o((0,t.useState)(2),2),X=$[0],J=$[1],Z=o((0,t.useState)(""),2),ee=Z[0],te=Z[1],ne=o((0,t.useState)(""),2),re=ne[0],ie=ne[1],ae=o((0,t.useState)(""),2),oe=ae[0],se=ae[1],ue=o((0,t.useState)("2011-01-11"),2),le=ue[0],ce=ue[1],he=o((0,t.useState)("2011-01-11"),2),fe=(he[0],he[1]),de=o((0,t.useState)(3),2),pe=de[0],ve=de[1],me=o((0,t.useState)(""),2),ge=me[0],ye=me[1],ke=function(){var e=Y(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.getElementsByClassName("wx-default"),console.log(t),window.print(t.innerHTML);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=[{id:1,start_date:l,duration:a,text:n,progress:m,type:"project"},{id:2,start_date:C,duration:b,text:k,progress:O,source:D},{id:3,start_date:q,duration:V,text:j,progress:ee,source:X},{id:4,start_date:le,duration:oe,text:re,progress:ge,source:pe}],we=window.location.href.split("?")[1][0];console.log(we);var be=o(Nx(vx),3),xe=be[0],Ee=be[1],Ce=(be[2],T()),Te=o((0,t.useState)(""),2),Se=Te[0],Ie=Te[1],Ne=o((0,t.useState)(""),2),Re=Ne[0],De=Ne[1],Pe=o((0,t.useState)(""),2),Ae=Pe[0],Oe=Pe[1],Me=o((0,t.useState)(""),2),Le=(Me[0],Me[1],function(){var e=Y(Q().mark((function e(){var t,n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=vy(Ig(mx,"users"),gy("uid","==",null===xe||void 0===xe?void 0:xe.uid)),e.next=4,Ey(t);case 4:n=e.sent,r=n.docs[0].data(),Ie(r.name),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),alert("An error occured while fetching user data");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}()),je=function(){var e=Y(Q().mark((function e(){var t,n,r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=parseInt(we),console.log("id to del",t),e.prev=2,n={},r=Ng(mx,"users",Se),i=Object.entries(Re),console.log("all"),console.log(i),console.log(typeof i),a=0;a<i.length;a++)i[a][0]==t&&(i.splice(a,1),console.log("ok dell"));for(a=0;a<i.length;a++)n[i[a][0]]=i[a][1];return e.next=13,Ty(r,{projects:n});case 13:console.log("dell"),alert("Projet supprimer avec succes, Vous pouvez retourner au Menu"),alert(""),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),console.error(e.t0),console.log(e.t0.message);case 22:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e=Y(Q().mark((function e(){var t,n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=vy(Ig(mx,"users"),gy("uid","==",null===xe||void 0===xe?void 0:xe.uid)),e.next=4,Ey(t);case 4:n=e.sent,r=n.docs[0].data(),De(r.projects),Oe(r.projects.task),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),alert("An error occured while fetching user data");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return console.log(Ae),(0,t.useEffect)((function(){if(!Ee){if(!xe)return Ce("/");Fe(),Le()}}),[xe,Ee]),0==we?(console.log("return"),(0,Rx.jsxs)("div",{className:"retour",children:[(0,Rx.jsx)("div",{children:"Retour"}),(0,Rx.jsx)("button",{children:(0,Rx.jsx)(K,{to:"/create_project",children:"Create Project"})})]})):(0,Rx.jsxs)(Rx.Fragment,{children:[(0,Rx.jsxs)("header",{className:"header-dash",children:[(0,Rx.jsx)("div",{className:"header-logo",children:(0,Rx.jsx)("a",{href:"/",className:"logo",children:(0,Rx.jsx)("img",{alt:"",src:"images/icone/logo.svg"})})}),(0,Rx.jsx)("div",{className:"nav",children:(0,Rx.jsxs)("ul",{className:"navigation",children:[(0,Rx.jsx)("li",{children:(0,Rx.jsx)("button",{children:(0,Rx.jsx)(K,{className:"acc",to:"/dashboard",children:"Acceuil"})})}),(0,Rx.jsx)("li",{children:(0,Rx.jsx)("button",{children:"A Propos"})}),(0,Rx.jsx)("li",{children:(0,Rx.jsx)("button",{children:"Langue"})}),(0,Rx.jsx)("li",{children:(0,Rx.jsx)("button",{onClick:xx,children:"Se deconcter"})})]})}),(0,Rx.jsxs)("div",{className:"toggle",children:[(0,Rx.jsx)("i",{className:"ouvrir",children:(0,Rx.jsx)("img",{alt:"",src:"icone/menu.png"})}),(0,Rx.jsx)("i",{className:"fermer",children:(0,Rx.jsx)("img",{alt:"",src:"icone/fermer-la-croix.png"})})]})]}),(0,Rx.jsxs)("div",{className:"ap-sup",children:[(0,Rx.jsx)("div",{className:"project-fetch"}),(0,Rx.jsxs)("div",{className:"run",children:[(0,Rx.jsx)("button",{className:"run-btn",children:"Enregistrer"}),(0,Rx.jsx)("button",{onClick:ke,className:"ap",children:"Exporter"}),(0,Rx.jsx)("button",{className:"sup",onClick:function(e){return[je()]},children:"Supprimer"})]})]}),(0,Rx.jsxs)("div",{children:[(0,Rx.jsx)("div",{className:"wbs-title",children:"WBS"}),(0,Rx.jsx)("div",{className:"input-taches",children:(0,Rx.jsx)("div",{class:"container",children:(0,Rx.jsx)("div",{class:"tableau",children:(0,Rx.jsx)("table",{summary:"Editable table with datasets ordered in columns",class:"table-fill",children:(0,Rx.jsxs)("tbody",{className:"tbody",children:[(0,Rx.jsxs)("tr",{className:"tr",children:[(0,Rx.jsx)("th",{className:"th",scope:"col",children:" Nom de la tache "}),(0,Rx.jsx)("th",{className:"th",scope:"col",children:" Duree / jours"}),(0,Rx.jsx)("th",{className:"th",scope:"col",children:" Date debut "}),(0,Rx.jsx)("th",{className:"th",scope:"col",children:" Date fin "}),(0,Rx.jsx)("th",{className:"th",scope:"col",children:" Predecesseur "}),(0,Rx.jsx)("th",{className:"th",scope:"col",children:" Progression "})]}),(0,Rx.jsxs)("tr",{className:"tr",children:[(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{onChange:function(e){return r(e.target.value)},type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{onChange:function(e){return s(e.target.value)},type:"number"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{onChange:function(e){return c(e.target.value)},defaultValue:"2011-01-11",id:"star",type:"date"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{defaultValue:"2022-01-11",onChange:function(e){return f(e.target.value)},type:"date"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{onChange:function(e){return p(e.target.value)},type:"number"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{onChange:function(e){return g(e.target.value)},type:"number"})})]}),(0,Rx.jsxs)("tr",{className:"tr",children:[(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{onChange:function(e){return _(e.target.value)},type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{onChange:function(e){return x(e.target.value)},type:"number"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{onChange:function(e){return S(e.target.value)},defaultValue:"2011-01-11",id:"star",type:"date"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{defaultValue:"2022-01-11",onChange:function(e){return N(e.target.value)},type:"date"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{onChange:function(e){return P(e.target.value)},type:"number"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{onChange:function(e){return M(e.target.value)},type:"number"})})]}),(0,Rx.jsxs)("tr",{className:"tr",children:[(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{onChange:function(e){return F(e.target.value)},type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{onChange:function(e){return B(e.target.value)},type:"number"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{onChange:function(e){return H(e.target.value)},defaultValue:"2011-01-11",id:"star",type:"date"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{defaultValue:"2022-01-11",onChange:function(e){return G(e.target.value)},type:"date"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{onChange:function(e){return J(e.target.value)},type:"number"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{onChange:function(e){return te(e.target.value)},type:"number"})})]}),(0,Rx.jsxs)("tr",{className:"tr",children:[(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{onChange:function(e){return ie(e.target.value)},type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{onChange:function(e){return se(e.target.value)},type:"number"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{onChange:function(e){return ce(e.target.value)},defaultValue:"2011-01-11",id:"star",type:"date"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{defaultValue:"2022-01-11",onChange:function(e){return fe(e.target.value)},type:"date"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{onChange:function(e){return ve(e.target.value)},type:"number"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{onChange:function(e){return ye(e.target.value)},type:"number"})})]}),(0,Rx.jsxs)("tr",{className:"tr",children:[(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"number"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"number"})})]}),(0,Rx.jsxs)("tr",{className:"tr",children:[(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"number"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"number"})})]}),(0,Rx.jsxs)("tr",{className:"tr",children:[(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"number"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"number"})})]}),(0,Rx.jsxs)("tr",{className:"tr",children:[(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"number"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"number"})})]}),(0,Rx.jsxs)("tr",{className:"tr",children:[(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"number"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"number"})})]}),(0,Rx.jsxs)("tr",{className:"tr",children:[(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"number"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"number"})})]}),(0,Rx.jsxs)("tr",{className:"tr",children:[(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"number"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"number"})})]}),(0,Rx.jsxs)("tr",{className:"tr",children:[(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"text"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"number"})}),(0,Rx.jsx)("td",{className:"td",children:(0,Rx.jsx)("input",{type:"number"})})]})]})})})})}),(0,Rx.jsx)(cT,{}),(0,Rx.jsxs)("div",{class:"wx-default",children:[(0,Rx.jsx)("div",{className:"gantt-title",children:"GANTT"}),(0,Rx.jsx)(lT,{scales:[{unit:"month",step:1,format:"MMMM yyy"},{unit:"day",step:1,format:"d"}],columns:[{name:"text",label:"Tache",width:"100%"},{name:"start",label:"Debut",align:"center"},{name:"duration",label:"Durr\xe9e",width:"70px",align:"center"}],tasks:_e,links:[{target:1,type:0}]})]})]}),(0,Rx.jsx)("div",{className:"paginator"})]})};var fT=function(){return(0,Rx.jsxs)("div",{className:"landing",children:[(0,Rx.jsx)("div",{className:"header",children:(0,Rx.jsxs)("div",{className:"content",children:[(0,Rx.jsx)("h3",{children:"Welcome To PGW Project"}),(0,Rx.jsx)("p",{children:"Con\xe7evez le WBS, PERT et le GANTT de votre projet meintenant."}),(0,Rx.jsx)("img",{src:"/images/landing-header-1ac8944e97.png"}),(0,Rx.jsx)("a",{href:"/Login",children:"Commencer"})]})}),(0,Rx.jsx)("div",{className:"main",children:(0,Rx.jsx)("div",{className:"about",children:(0,Rx.jsxs)("div",{className:"container",children:[(0,Rx.jsxs)("div",{className:"one",children:[(0,Rx.jsxs)("div",{className:"text",children:[(0,Rx.jsx)("h3",{children:"PERT"}),(0,Rx.jsx)("p",{children:"PERT est un outil de planification de projet. Il est utilis\xe9 pour calculer, de fa\xe7on r\xe9aliste, le temps n\xe9cessaire pour terminer un projet. PERT signifie \xab Program Evaluation Review Technique \xbb (technique d'\xe9valuation et d'examen de programmes)."})]}),(0,Rx.jsx)("img",{src:"/images/wbs.png"})]}),(0,Rx.jsxs)("div",{className:"two",children:[(0,Rx.jsx)("img",{src:"/images/gantt.png"}),(0,Rx.jsxs)("div",{className:"text",children:[(0,Rx.jsx)("h3",{children:"GANTT"}),(0,Rx.jsx)("p",{children:"Le diagramme de Gantt, couramment utilis\xe9 en gestion de projet, est l'un des outils les plus efficaces pour repr\xe9senter visuellement l'\xe9tat d'avancement des diff\xe9rentes activit\xe9s (t\xe2ches) qui constituent un projet."})]})]}),(0,Rx.jsxs)("div",{className:"three",children:[(0,Rx.jsxs)("div",{className:"text",children:[(0,Rx.jsx)("h3",{children:"WBS"}),(0,Rx.jsx)("p",{children:"Un organigramme des t\xe2ches du projet (OTP)1 ou structure de d\xe9coupage du projet (SDP)2, ou encore work breakdown structure (WBS) (en anglais), est une d\xe9composition hi\xe9rarchique des travaux n\xe9cessaires pour r\xe9aliser les objectifs d'un projet3. Elle a pour but d\u2019aider \xe0 organiser le projet, en d\xe9finissant la totalit\xe9 de son contenu et en servant de r\xe9f\xe9rence pour planifier les activit\xe9s et \xe9tablir le budget pr\xe9visionnel."})]}),(0,Rx.jsx)("img",{src:"/images/wbs.png"})]})]})})}),(0,Rx.jsxs)("div",{className:"available",children:[(0,Rx.jsxs)("div",{className:"title-landing",children:[(0,Rx.jsx)("h3",{children:"PGW Project"}),(0,Rx.jsx)("p",{children:"PGW Project est disponible sur presque toute les plateformes."})]}),(0,Rx.jsx)("img",{src:"images/landing-teams-a19cfef3a4.png"})]}),(0,Rx.jsx)("div",{className:"get",children:(0,Rx.jsx)("a",{href:"/Login",children:"Commencer"})}),(0,Rx.jsx)("div",{className:"footer",children:(0,Rx.jsxs)("div",{className:"team",children:[(0,Rx.jsx)("h3",{children:"Notre Equipe"}),(0,Rx.jsxs)("div",{className:"images",children:[(0,Rx.jsxs)("div",{className:"item",children:[(0,Rx.jsx)("img",{src:"/images/s.png"}),(0,Rx.jsx)("p",{children:"Soro Ange"})]}),(0,Rx.jsxs)("div",{className:"item",children:[(0,Rx.jsx)("img",{src:"/images/y.png"}),(0,Rx.jsx)("p",{children:"Coulibaly Yaya"})]}),(0,Rx.jsxs)("div",{className:"item",children:[(0,Rx.jsx)("img",{src:"/images/s.png"}),(0,Rx.jsx)("p",{children:"Atse Achi"})]}),(0,Rx.jsxs)("div",{className:"item",children:[(0,Rx.jsx)("img",{src:"/images/y.png"}),(0,Rx.jsx)("p",{children:"Yapi H.Joel"})]}),(0,Rx.jsxs)("div",{className:"item",children:[(0,Rx.jsx)("img",{src:"/images/f.jpeg"}),(0,Rx.jsx)("p",{children:"Kouassi K.Fernand"})]}),(0,Rx.jsxs)("div",{className:"item",children:[(0,Rx.jsx)("img",{src:"/images/s.png"}),(0,Rx.jsx)("p",{children:"Kouassi Dominique"})]}),(0,Rx.jsxs)("div",{className:"item",children:[(0,Rx.jsx)("img",{src:"/images/y.png"}),(0,Rx.jsx)("p",{children:"Trah Justin"})]})]})]})})]})};var dT=function(){return(0,Rx.jsx)("div",{className:"app",children:(0,Rx.jsx)(W,{children:(0,Rx.jsxs)(b,{children:[(0,Rx.jsx)(_,{exact:!0,path:"/",element:(0,Rx.jsx)(fT,{})}),(0,Rx.jsx)(_,{exact:!0,path:"/login",element:(0,Rx.jsx)(Dx,{})}),(0,Rx.jsx)(_,{exact:!0,path:"/register",element:(0,Rx.jsx)(Px,{})}),(0,Rx.jsx)(_,{exact:!0,path:"/reset",element:(0,Rx.jsx)(Ax,{})}),(0,Rx.jsx)(_,{exact:!0,path:"/dashboard",element:(0,Rx.jsx)(Ox,{})}),(0,Rx.jsx)(_,{exact:!0,path:"/create_project",element:(0,Rx.jsx)(Mx,{})}),(0,Rx.jsx)(_,{exact:!0,path:"/project",element:(0,Rx.jsx)(hT,{})})]})})})},pT=function(e){e&&e instanceof Function&&n.e(341).then(n.bind(n,341)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.render((0,Rx.jsx)(t.StrictMode,{children:(0,Rx.jsx)(dT,{})}),document.getElementById("root")),pT()}()}();
//# sourceMappingURL=main.b42f4ec8.js.map